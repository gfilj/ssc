!function(e, t, a) {
    var n = {};
    n.cacheData = {},
    n.currentGame = null ,
    n.currentGameTypes = null ,
    n.currentGameStatistics = null ,
    n.currentGameOrder = null ,
    n.currentGameTrace = null ,
    n.currentGameSubmit = null ,
    n.currentGameMessage = null ,
    n.getCurrentGame = function() {
        return n.currentGame
    }
    ,
    n.setCurrentGame = function(e) {
        n.currentGame = e
    }
    ,
    n.getCurrentGameTypes = function() {
        return n.currentGameTypes
    }
    ,
    n.setCurrentGameTypes = function(e) {
        n.currentGameTypes = e
    }
    ,
    n.getCurrentGameStatistics = function() {
        return n.currentGameStatistics
    }
    ,
    n.setCurrentGameStatistics = function(e) {
        n.currentGameStatistics = e
    }
    ,
    n.getCurrentGameOrder = function() {
        return n.currentGameOrder
    }
    ,
    n.setCurrentGameOrder = function(e) {
        n.currentGameOrder = e
    }
    ,
    n.getCurrentGameTrace = function() {
        return n.currentGameTrace
    }
    ,
    n.setCurrentGameTrace = function(e) {
        n.currentGameTrace = e
    }
    ,
    n.getCurrentGameSubmit = function() {
        return n.currentGameSubmit
    }
    ,
    n.setCurrentGameSubmit = function(e) {
        n.currentGameSubmit = e
    }
    ,
    n.getCurrentGameMessage = function() {
        return n.currentGameMessage
    }
    ,
    n.setCurrentGameMessage = function(e) {
        n.currentGameMessage = e
    }
    ,
    e[t] = n
}(dsgame, "Games"),
function(e, t, a, n) {
    var r = {
        id: -1,
        name: "",
        jsNameSpace: "dsgame.Games.SSC.",
        eventProxyPanel: "body"
    }
      , i = e.Games
      , o = function(e) {
        for (var t, a = $.trim(e).split("&"), n = 0, r = a.length, i = {}; r > n; n++)
            t = a[n].split("="),
            t.length > 0 && (2 == t.length ? i[t[0]] = t[1] : i[t[0]] = "");
        return i
    }
      , l = {
        init: function(e) {
            var t = this;
            t.setName(e.name),
            i.setCurrentGame(t),
            t.setJsNameSpace(e.jsNameSpace),
            t.loadedHas = {},
            t.currentGameMethod = null ,
            t.addEvent("afterSwitchGameMethod", function() {
                i.getCurrentGame().getCurrentGameMethod().reSet();
                var e = i.getCurrentGame().getCurrentGameMethod().getId()
                  , t = i.getCurrentGameStatistics().getMoneyUnit()
                  , a = i.getCurrentGame().getGameConfig().getInstance().getLimitByMethodId(e, t)
                  , n = i.getCurrentGameStatistics().getMultip();
                n = n > a ? a : n,
                iido = i.getCurrentGame().getGameConfig().getInstance().getGameId(),
                i.getCurrentGameStatistics().setMultipleDom(n),($.inArray(parseInt(iido,10),[1,9,3,8,29,7,2,36,32,37,13,23,29,11,8,4,34,31,39,40,5,20,15,24,25,26,27,14,6,43,44,41])>-1 ? ($('.chktrend').attr('href','/static/html/line.html?id='+iido+'&w=1&q=50&v=20170118106').show(),$('.float-trend').show()) : $('.float-trend,.chktrend').hide())
            })
        },
        getId: function() {
            return this.id
        },
        setId: function(e) {
            this.id = e
        },
        getServerDynamicConfig: function(e) {
            var t = this
              , a = i.getCurrentGame().getGameConfig().getInstance();
              var nextend = a.getNextLastTime()/1000;
              jQuery.ajax({
                  url: a.getLoadIssueUrl(),
                  dataType: "JSON",
                  cache: false,
                  success: function(n) {
                      var anew = {};
                      anew.currentNumber = n.current_issue;
                      a.updateConfig(anew);
                  }
              })
              var addZero = function(str,length){
                  return new Array(length - str.length + 1).join("0") + str;
              }
              var newa ={};
              if (Number(a.getNextNumber().replace('-',''))>Number(a.getCurrentGameNumber().replace('-',''))) {
                newa ={currentNumber:a.getNextNumber()};
              }else {
                //var splitnum = a.getCurrentGameNumber().split('-');
                //var fulllen = splitnum[1].length;
                //newa ={currentNumber:splitnum[0]+'-'+addZero(String(parseInt(splitnum[1],10)+1),fulllen)};
              }
              t.setDynamicConfig(newa),$.isFunction(e) && e.call(t, newa)
        },
        setDynamicConfig: function(e) {
            i.getCurrentGame().getGameConfig().getInstance().updateConfig(e),
            this.fireEvent("changeDynamicConfigQuick", e)
        },
        eventProxy: function() {
            var e = this
              , t = e.defConfig
              , a = $(t.eventProxyPanel);
            a.click(function(t) {
                var a, n, r = t.target.getAttribute("data-param");
                r && "" != $.trim(r) && (t.preventDefault(),
                a = o(r),
                n = e.getCurrentGameMethod(),
                n && n.exeEvent(a, t.target, e))
            })
        },
        setLoadedHas: function(e, t) {
            this.loadedHas[e] = t
        },
        getCacheMethod: function(e) {
            var t = this
              , a = t.loadedHas
              , n = i.getCurrentGame().getGameConfig().getInstance().getMethodFullNameById(e).join(".");
            return a.hasOwnProperty(n) ? a[n] : void 0
        },
        switchGameMethod: function(e) {
            var t, a = this, e = Number(e), n = a.loadedHas, r = i.getCurrentGame().getGameConfig().getInstance().getMethodFullNameById(e).join(".");
            a.currentGameMethod && a.currentGameMethod.getId() == e || (n[r] ? (t = n[r],
            a.fireEvent("beforeSwitchGameMethod"),
            a.currentGameMethod && a.currentGameMethod.hide(),
            a.currentGameMethod = t,
            t.setId(e),
            t.show(),
            a.fireEvent("afterSwitchGameMethod")) : a.setup(e, function() {
                a.fireEvent("beforeSwitchGameMethod"),
                a.currentGameMethod && a.currentGameMethod.hide(),
                t = a.getCacheMethod(e),
                t.setId(e),
                t.show(),
                a.currentGameMethod = t,
                a.fireEvent("afterSetup"),
                a.fireEvent("afterSwitchGameMethod")
            }))
        },
        getCurrentGameMethod: function() {
            return this.currentGameMethod
        },
        setup: function(e, t) {
            var a, n = this, r = n.buildPath(e), i = function() {}
            ;
            a = arguments.length > 0 ? arguments[arguments.length - 1] : i,
            $.isFunction(a) || (a = i),
            n.isSetuped(e) || jQuery.ajax({
                url: r,
                cache: 1,
                dataType: "script",
                success: function() {
                    n.loadedHas[r] = !0,
                    a.call(n)
                },
                error: function(e, t) {
                    //console.log("资源加载失败\n" + r + "\n错误类型：" + t);
                    alert("资源加载失败\n" + r + "\n错误类型：" + t)
                }
            })
        },
        buildPath: function(e) {
            var t = this
              , a = i.getCurrentGame().getGameConfig().getInstance()
              , n = a.getJsPath()
              , r = a.getMethodFullNameById(e).join(".")
              , o = t.getJsNamespace()
              , l = n + o + r + ".js";
            return l
        },
        isSetuped: function(e) {
            var t = this
              , a = t.loadedHas
              , n = t.buildPath(e);
            return a.hasOwnProperty(n)
        },
        setSetuped: function(e, t, a) {},
        setJsNameSpace: function(e) {
            this.jsNameSpace = e
        },
        getJsNamespace: function() {
            return this.jsNameSpace
        },
        getGameConfig: function() {},
        getName: function() {
            return this.name
        },
        setName: function(e) {
            this.name = e
        },
        //编辑提交数据
        editSubmitData: function(e) {
            var t, a, n = this;
            var drrr = [];
            var deleteIndexArr = [];
            //如果是龙虎，则需拆分注数
            var qq = e.balls;
            var thisWayId = qq[0].wayId;
            for (var i = 0; i < qq.length; i++) {
                var thisType = qq[i].type;
                if(thisType.split('.')[0] === 'longhu') { // 通过玩法类型来判断，即如果有一单为龙虎玩法注单，则需进行注数拆分处理
                    deleteIndexArr.push(i); // 定义出一个需要在e.balls里面删除的未拆分的龙虎注单数据的下标位置集合
                    var oldArr = [];
                    var thisBallStr = qq[i].ball;
                    thisBallStr = thisBallStr.split('');
                    for (var j = 0; j < thisBallStr.length; j++) {
                        // 数组对象继承拷贝
                        oldArr[j] = $.extend(true, {}, qq[i]);
                        oldArr[j].ball = thisBallStr[j];
                        oldArr[j].num = 1;
                    }
                    drrr = drrr.concat(oldArr);
                }
            }
            if(deleteIndexArr.length > 0) { // 去除e.balls里面未拆分的龙虎注数
                Array.prototype.clean = function(deleteValue) {
                  for (var i = 0; i < this.length; i++) {
                    if (this[i] == deleteValue) {
                      this.splice(i, 1);//返回指定的元素
                      i--;
                    }
                  }
                  return this;
                };
                for (var i = 0; i < deleteIndexArr.length; i++) {
                    e.balls[deleteIndexArr[i]] = '';
                }
                e.balls.clean(''); // 此时的e.balls为已经清除了未拆分注单数据之后的数组
            }
            r = e.balls.concat(drrr); // e.balls的值为拆分出来的龙虎注单数据和其他玩法的注单数据合并（如果没有提交龙虎注单，则数组drrr为空）
            return $.each(r, function() {
                t = this;
                a = n.getCacheMethod(t.wayId),
                a ? (a.editSubmitData(t),
                t.viewBalls = "") : (alert("当前玩法文件未加载:" + t.type),
                e.balls = [])
            }),
            e.balls = r,
			e.ballstr = JSON.stringify(e.balls),
			e.orderstr = JSON.stringify(e.orders),
			e.balls = [],
            e
        }
    }
      , s = e.Class(l, a);
    s.defConfig = r,
    e[t] = s
}(dsgame, "Game", dsgame.Event),
function(e, t, a, n) {
    var r = {
        id: -1,
        name: "",
        UIContainer: "#J-balls-main-panel",
        ballsDom: ".ball-number",
        ballCurrentCls: "ball-number-current",
        methodMassageDom: ".prompt .method-tip",
        methodExampleDom: ".prompt .example-tip",
        randomBetsNum: 500
    }
      , i = e.Games
      , o = {
        init: function(e) {
            var t = this;
            t.id = e.id,
            t.name = e.name,
            t.UIContainer = $(e.UIContainer),
            t.container = $("<div></div>").appendTo(t.UIContainer),
            t.buildUI(),
            t.hide(),
            t.balls = [],
            t.rebuildData(),
            t.setOrderSplitType(""),
            t.ballsDom = t.getBallsDom(),
            t.isBallsComplete = !1,
            t.addEvent("updateData", function(e, t) {
                var a = this
                  , t = a.isBallsComplete ? t : {
                    lotterys: [],
                    original: []
                };
                i.getCurrentGameStatistics().updateData(t, a.getName()),
                a.batchSetBallDom()
            }),
            t.addEvent("afterReset", function() {
                t.exeEvent_cancelCurrentButton()
            }),
            t.addEvent("afterSetBallData", function(e, a, n, r) {
                t.exeEvent_cancelCurrentButton(a, n, r)
            })
        },
        getId: function() {
            return this.id
        },
        setId: function(e) {
            this.id = Number(e)
        },
        getOrderSplitType: function() {
            return this.orderSplitType
        },
        setOrderSplitType: function(e) {
            this.orderSplitType = e
        },
        getBallsDom: function() {
            var e = this
              , t = e.defConfig
              , a = e.balls;
            return a.length < 1 ? [] : e.ballsDom || function() {
                var n, r = e.container.find(t.ballsDom), i = 0, o = [];
                return $.each(a, function(e) {
                    n = this,
                    o[e] = [],
                    $.each(n, function(t) {
                        o[e][t] = r[i],
                        i++
                    })
                }),
                o
            }()
        },
        updataGamesInfo: function() {
            var e = this
              , t = e.getGameMethodName()
              , a = i.getCurrentGame()
              , n = t + "lostcurrentFre"
              , r = "simulatedata/getBetAward.php?type=" + t + "&extent=currentFre&line=5&lenth=30&lotteryid=99101&userid=31";
            i.cacheData.gameBonus || (i.cacheData.gameBonus = {}),
            i.cacheData.gameTips || (i.cacheData.gameTips = {}),
            i.cacheData.frequency || (i.cacheData.frequency = {}),
            i.cacheData.gameBonus[r] && a.addDynamicBonus(t, i.cacheData.gameBonus[r]),
            i.cacheData.gameTips[r] && e.methodTip(i.cacheData.gameTips[r]),
            i.cacheData.frequency[n] && e.getHotCold(t, "currentFre", "lost"),
            i.cacheData.gameBonus[r] && i.cacheData.frequency[n] && i.cacheData.gameTips[r] || $.ajax({
                url: r,
                dataType: "json",
                success: function(o) {
                    1 == Number(o.isSuccess) && (data = o.data,
                    "undefined" != typeof data.gameTips && (i.cacheData.gameTips[r] = data.gameTips,
                    e.methodTip(data.gameTips)),
                    "undefined" != typeof data.frequency && (i.cacheData.frequency[n] = data.frequency,
                    e.getHotCold(t, "currentFre", "lost")),
                    "undefined" != typeof data.bonus && (i.cacheData.gameBonus[r] = data.bonus,
                    a.addDynamicBonus(t, data.bonus)))
                }
            })
        },
        methodTip: function(e) {
            var t = this
              , a = t.defConfig;
            $(a.methodMassageDom).html(e.tips),
            $(a.methodExampleDom).html(e.example)
        },
        //拼合选号参数
        formatViewBalls: function(e) {
            for (var t = [], a = e.length, n = 0; a > n; n++)
                t = t.concat(e[n].join(""));
            return t.join("|")
        },
        //拼合选号参数快速
        formatViewBallsQuick: function(e) {
            return e.join("|")
        },
        makePostParameter: function(e) {
            for (var t = [], a = e.length, n = 0; a > n; n++)
                t = t.concat(e[n].join(""));
            return t.join("|")
        },
        arrIndexOf: function(e, t) {
            for (var a = 0, n = 0; n < t.length; n++)
                t[n] == e && (a += 1);
            return a || -1
        },
        rebuildData: function() {},
        getBallData: function() {
            return this.balls
        },
        setBallData: function(e, t, a) {
            var n = this
              , r = n.getBallData();
            n.fireEvent("beforeSetBallData", e, t, a),
            e >= 0 && e < r.length && t >= 0 && (r[e][t] = a),
            n.fireEvent("afterSetBallData", e, t, a)
        },
        setBallAidData: function(e, t, a, n) {
            var r = this
              , i = "ball-aid"
              , o = r.getBallsAidDom()
              , n = n ? i + " " + n : i;
            e >= 0 && e < o.length && t >= 0 && t < o[0].length && (o[e][t].innerHTML = a,
            o[e][t].className = n)
        },
        reSet: function() {
            var e = this;
            e.isBallsComplete = !1,
            e.rebuildData(),
            e.updateData(),
            e.fireEvent("afterReset")
        },
        getName: function() {
            return this.name
        },
        setName: function(e) {
            this.name = e
        },
        show: function() {
            var e = this;
            e.fireEvent("beforeShow"),
            e.container.show(),
            e.fireEvent("afterShow")
        },
        hide: function() {
            var e = this;
            e.fireEvent("beforeHide"),
            e.container.hide(),
            e.fireEvent("afterHide")
        },
        exeEvent: function(e, t, l) {
            var a = this;
            $.isFunction(a["exeEvent_" + e.action]) && a["exeEvent_" + e.action].call(a, e, t, i)
        },
        exeEvent_batchSetBall: function(e, t,l) {
            var a = this
              , aconfig = a.defConfig
              , n = a.balls
              , r = Number(e.row)
              , i = e.bound
              , o = n[r]
              , l = 0
              , s = o.length
              , u = "undefined" == typeof e.start ? 0 : Number(e.start);

            var candup = true;
            var reverser = {'0':1,'1':0}
            if (String(aconfig.name).indexOf('zusandt')>-1 || String(aconfig.name).indexOf('zuliudt')>-1) {
              candup = false;
              var chrow = a.balls[reverser[e.row]];
              var chkedindex = []
              for (k = 0; k < chrow.length; k++) {
                if (chrow[k]!=-1) {
                  chkedindex.push(k)
                }
              }
            }

            for (halfLen = Math.ceil((s - u) / 2 + u),dom = $(t),l = u; s > l; l++)
                a.setBallData(r, l, -1);
            switch (i) {
              case "all":
                  for (l = u; s > l; l++)
                      candup ? a.setBallData(r, l, 1) : ($.inArray(l,chkedindex)==-1 ? a.setBallData(r, l, 1) : !0);
                  break;
              case "big":
                  for (l = halfLen; s > l; l++)
                      candup ? a.setBallData(r, l, 1) : ($.inArray(l,chkedindex)==-1 ? a.setBallData(r, l, 1) : !0);
                  break;
              case "small":
                  for (l = u; l < halfLen; l++)
                      candup ? a.setBallData(r, l, 1) : ($.inArray(l,chkedindex)==-1 ? a.setBallData(r, l, 1) : !0);
                  break;
              case "odd":
                  for (l = u; s > l; l++)
                      candup ? (l + 1) % 2 != 1 && a.setBallData(r, l, 1) : ($.inArray(l,chkedindex)==-1 ? (l + 1) % 2 != 1 && a.setBallData(r, l, 1) : !0);
                  break;
              case "even":
                  for (l = u; s > l; l++)
                      candup ? (l + 1) % 2 == 1 && a.setBallData(r, l, 1) : ($.inArray(l,chkedindex)==-1 ? (l + 1) % 2 == 1 && a.setBallData(r, l, 1) : !0);
                  break;
              case "none":
            }
            dom.addClass("current"),
            a.updateData()
        },
        exeEvent_cancelCurrentButton: function(e, t, a) {
            var n = this
              , r = n.container
              , i = "undefined" != typeof e ? r.find(".ball-control").eq(e) : r.find(".ball-control");
            i.find("a").removeClass("current")
        },
        exeEvent_ball: function(e, t, l) {
            var a = this
              , aconfig = a.defConfig
              , amsg = l.getCurrentGameMessage()
              , r = $(t)
              , i = a.defConfig.ballCurrentCls;
            var choosetag = 1;
            var nowchk = $(t).parent().parent().parent().parent();
            if (String(aconfig.name).indexOf('zusandt')>-1 || String(aconfig.name).indexOf('zuliudt')>-1) {
              if (e.row=='0' && nowchk.find('[data-param="action=ball&value='+e.value+'&row=1"]').hasClass(i)) {
                choosetag = -1;
                amsg.show({
                    mask: !0,
                    content: '<i class="ico-waring <#=icon-class#>"></i>胆码拖码数字不能相同！',
                    closeIsShow: !0,
                    closeFun: function() {
                        this.hide()
                    }
                });
              }
              if (e.row=='1' && nowchk.find('[data-param="action=ball&value='+e.value+'&row=0"]').hasClass(i)) {
                choosetag = -1;
                amsg.show({
                    mask: !0,
                    content: '<i class="ico-waring <#=icon-class#>"></i>胆码拖码数字不能相同！',
                    closeIsShow: !0,
                    closeFun: function() {
                        this.hide()
                    }
                });
              }
            }
            if (e.value != n && e.row != n)
                r.hasClass(i) ? a.setBallData(Number(e.row), Number(e.value), -1) : (a.fireEvent("beforeSelect", e),
                a.setBallData(Number(e.row), Number(e.value), choosetag));
            else
                try {} catch (o) {}
            a.updateData()
        },
        batchSetBallDom: function() {
            for (var e = this, t = e.defConfig, a = t.ballCurrentCls, n = e.balls, r = 0, i = 0, o = n.length, l = 0, s = e.getBallsDom(), u = ""; o > r; r++){
                if (String(e.name).indexOf('zusandt')>-1 || String(e.name).indexOf('zuliudt')>-1) {
                  var reverser = {'0':1,'1':0}
                  for (l = n[r].length,i = 0; l > i; i++){
                    if (typeof s[r][i] !== 'undefined' && String(s[reverser[r]][i].className).indexOf(a)==-1) {
                      1 == n[r][i] ? (u = s[r][i].className,
                      u = (" " + u + " ").replace(" " + a, ""),
                      u += " " + a,
                      s[r][i].className = u.replace(/\s+/g, " ")) : (u = s[r][i].className,
                      u = (" " + u + " ").replace(" " + a, ""),
                      s[r][i].className = u.replace(/\s+/g, " "))
                    }
                  }
                }else {
                  for (l = n[r].length,i = 0; l > i; i++)
                    if (typeof s[r][i] !== 'undefined') {
                      1 == n[r][i] ? (u = s[r][i].className,
                      u = (" " + u + " ").replace(" " + a, ""),
                      u += " " + a,
                      s[r][i].className = u.replace(/\s+/g, " ")) : (u = s[r][i].className,
                      u = (" " + u + " ").replace(" " + a, ""),
                      s[r][i].className = u.replace(/\s+/g, " "))
                    }
                }

            }
        },
        updateData: function() {
            var e = this
              , t = e.getLottery();
            e.fireEvent("updateData", {
                lotterys: t,
                original: e.getOriginal(),
                quick:e.getQuickOriginal(),
                quickdiff:e.getQuickDiff()
            })
        },
        editSubmitData: function(e) {},
        getOriginal: function() {
            for (var e = this, t = e.getBallData(), a = t.length, n = 0, r = 0, i = 0, o = [], l = []; a > r; r++) {
                for (o = [],
                n = t[r].length,
                i = 0; n > i; i++)
                    t[r][i] > 0 && o.push(i);
                l.push(o);
            }
            return l
        },
        getQuickOriginal: function() {
            return []
        },
        getQuickDiff: function() {
            return []
        },
        reSelect: function(e) {
            var t, a, n, r, i, o, l = this, s = (l.getName(),
            e), u = !1;
            for (l.reSet(),
            t = 0,
            a = s.length; a > t; t++)
                for (n = 0,
                r = s[t].length; r > n; n++)
                    i = t,
                    o = s[t][n],
                    l.setBallData(i, o, 1),
                    u = !0;
            u && l.updateData()
        },
        getLottery: function(e) {
            for (var t, a = this, n = a.getBallData(), r = 0, i = n.length, o = !0, l = 0, s = 0, u = [], c = 1, m = 0; i > r; r++) {
                for (u[r] = [],
                t = n[r],
                s = t.length,
                o = !0,
                m = 0,
                l = 0; s > l; l++)
                    t[l] > 0 && (o = !1,
                    e || u[r].push(l),
                    m++);
                if (o)
                    return a.isBallsComplete = !1,
                    [];
                c *= m
            }
            return a.isBallsComplete = !0,
            e ? c : a.isBallsComplete ? a.combination(u) : []
        },
        removeSame: function(e) {
            var t, a = 0, n = this, r = this.getBallData()[0].length;
            e.length;
            for (t = Math.floor(Math.random() * r); a < e.length; a++)
                if (t == e[a])
                    return arguments.callee.call(n, e);
            return t
        },
        removeArraySame: function(e) {
            var t, a = this, n = 0, r = a.getBallData()[0].length;
            data.length;
            for (t = Math.floor(Math.random() * r); n < e.length; n++)
                if (t == e[n])
                    return arguments.callee.call(a, e);
            return t
        },
        getRandomBetsNum: function() {
            return this.defConfig.randomBetsNum
        },
        createRandomNum: function() {
            for (var e = this, t = [], a = e.getBallData().length, n = e.getBallData()[0].length, r = 0; a > r; r++)
                t[r] = [Math.floor(Math.random() * n)],
                t[r].sort(function(e, t) {
                    return e > t ? 1 : -1
                });
            return t
        },
        checkRandomBets: function(e, t) {
            var a = this
              , n = "undefined" == typeof e ? !0 : !1
              , e = e || {}
              , r = []
              , t = t || 0
              , o = (a.getBallData().length,
            a.getBallData()[0].length,
            i.getCurrentGameOrder().getTotal().orders);
            if (r = a.createRandomNum(),
            Number(t) > Number(a.getRandomBetsNum()))
                return r;
            if (n)
                for (var l = 0; l < o.length; l++)
                    if (o[l].type == a.defConfig.name) {
                        var s = o[l].original.join("");
                        e[s] = s
                    }
            return e[r.join("")] ? (t++,
            arguments.callee.call(a, e, t)) : r
        },
        randomNum: function() {
            var e = this
              , t = []
              , a = null
              , n = (e.getBallData(),
            e.defConfig.name,
            i.getCurrentGame().getCurrentGameMethod().getGameMethodName())
              , r = []
              , o = [];
            return t = e.checkRandomBets(),
            o = t,
            r = e.combination(o),
            a = {
                type: n,
                original: o,
                lotterys: r,
                moneyUnit: i.getCurrentGameStatistics().getMoneyUnit(),
                multiple: i.getCurrentGameStatistics().getMultip(),
                onePrice: i.getCurrentGame().getGameConfig().getInstance().getOnePrice(n),
                num: r.length
            },
            a.amountText = i.getCurrentGameStatistics().formatMoney(a.num * a.moneyUnit * a.multiple * a.onePrice),
            a
        },
        randomLotterys: function(e) {
            var t = this
              , a = 0;
            for (i.getCurrentGameOrder().cancelSelectOrder(); e > a; a++)
                i.getCurrentGameOrder().add(t.randomNum())
        },
        ballsErrorTip: function() {},
        countBallsNum: function() {
            for (var e = this, t = 0, a = e.getBallData(), n = a.length - 1; n >= 0; n--)
                if ("[object Array]" == Object.prototype.toString.call(a[n]) && a[n].length > 0)
                    for (var r = a[n].length - 1; r >= 0; r--)
                        1 == a[n][r] && t++;
                else
                    1 == a[n] && t++;
            return t
        },
        countBallsNumInLine: function(e) {
            var t = this
              , a = 0
              , n = t.getBallData();
            if ("[object Array]" == Object.prototype.toString.call(n[e]) && n[e].length > 0)
                for (var r = n[e].length - 1; r >= 0; r--)
                    1 == n[e][r] && a++;
            else
                1 == n[e] && a++;
            return a || -1
        },
        LimitMaxBalls: function(e) {
            var t = this
              , a = 0;
            t.getBallData(),
            Number(a);
            return a = t.countBallsNum(),
            a > e ? !0 : !1
        },
        checkBallIsComplete: function() {
            for (var e, t = this, a = t.getBallData(), n = 0, r = a.length, i = !0, o = 0, l = 0; r > n; n++) {
                for (e = a[n],
                l = e.length,
                i = !0,
                o = 0; l > o; o++)
                    e[o] > 0 && (i = !1);
                if (i)
                    return t.isBallsComplete = !1,
                    !1
            }
            return t.isBallsComplete = !0
        },
        combine: function(e, t, a) {
            var n = []
              , r = 0;
            if (a = a || [],
            0 == t)
                return [a];
            for (; r <= e.length - t; r++)
                n = n.concat(arguments.callee(e.slice(r + 1), t - 1, a.slice(0).concat(e[r])));
            return n
        },
        combination_unique: function(e) {
            if (e.length < 1)
                return [];
            var t, a, n, r = (e[0].length,
            e.length), i = [], o = [],o_only=[], l = [];
            for (i[t = r] = 1; t--; )
                i[t] = i[t + 1] * e[t].length;
            var insert=1;
            for (n = i[0],t = 0; n > t; t++) {
                insert=1;
                for (l = [],a = 0; r > a; a++){
                    if (insert) {
                      if (String(['-',l.join('-'),'-'].join('')).indexOf('-'+String(e[a][~~(t % i[a] / i[a + 1])]+'-'))>-1) {
                        insert=0;
                      }
                    }
                    l[a] = e[a][~~(t % i[a] / i[a + 1])];
                }
                if (insert) {o_only.push(l)};
                o[t] = l
            }
            return o_only
            //return o
        },
        combination: function(e) {
            if (e.length < 1)
                return [];
            var t, a, n, r = (e[0].length,
            e.length), i = [], o = [], l = [];
            for (i[t = r] = 1; t--; )
                i[t] = i[t + 1] * e[t].length;
            for (n = i[0],
            t = 0; n > t; t++) {
                for (l = [],
                a = 0; r > a; a++)
                    l[a] = e[a][~~(t % i[a] / i[a + 1])];
                o[t] = l
            }
            return o
        },
        permutations: function(arr, num) {
            var r = [];
            (function f(t, a, n) {
                if (n == 0) return r.push(t);
                for (var i = 0, l = a.length; i < l; i++) {
                    f(t.concat(a[i]), a.slice(0, i).concat(a.slice(i + 1)), n - 1);
                }
            })([], arr, num);
            return r;
        },
        miniTrend_create: function() {
            var e, t = this, a = [];
            return a.push(t.miniTrend_createHeadHtml()),
            a.push(t.miniTrend_createRowHtml()),
            a.push(t.miniTrend_createFootHtml()),
            e = $(a.join("")),
            t.miniTrend_getContainer().prepend(e),
            e
        },
        miniTrend_createHeadHtml: function() {
            var e = this
              , t = [];
            return t.push('<table width="100%" class="table bet-table-trend" id="J-minitrend-trendtable-' + e.getId() + '">'),
            t.push("<thead><tr>"),
            t.push('<th><span class="number">奖期</span></th>'),
            t.push('<th><span class="balls">开奖</th>'),
            t.push("</tr></thead>"),
            t.push("<tbody>"),
            t.join("")
        },
        miniTrend_createRowHtml: function() {
            var e, t = this, a = t.miniTrend_getBallsData(), n = a.length, r = "", i = "curr", o = [];
            return $.each(a, function(t) {
                e = this,
                r = "",
                r = 0 == t ? "first" : r,
                r = t == n - 1 ? "last" : r;
                var a = -1 == e.wn_number.indexOf(" ") ? e.wn_number.split("") : e.wn_number.split(" ");
                o.push('<tr class="' + r + '">'),
                o.push('<td><span class="number">' + e.issue.substr(2) + " 期</span></td>"),
                o.push('<td><span class="balls">'),
                $.each(a, function(e) {
                    o.push("<i class=" + i + ">" + this + "</i>")
                }),
                o.push("</span></td>"),
                o.push("</tr>")
            }),
            o.join("")
        },
        miniTrend_createFootHtml: function() {
            var e = [];
            return e.push("</tbody>"),
            e.push("</table>"),
            e.join("")
        },
        miniTrend_updateTrend: function(e) {
            var t = this
              , a = t.miniTrend_getTrendTable().find("tbody");
            e && t.miniTrend_setBallsData(e),
            a.html(t.miniTrend_createRowHtml()),
            t.miniTrend_getContainer().find(".bet-table-trend").hide(),
            t.miniTrend_getTrendTable().show()
        },
        miniTrend_getTrendTable: function() {
            var e = this
              , t = this.getId()
              , a = $("#J-minitrend-trendtable-" + t);
            return a.size() > 0 ? a : e.miniTrend_create()
        },
        miniTrend_getContainer: function() {
            return this.miniTrendContainer || (this.miniTrendContainer = $("#J-minitrend-cont"))
        },
        miniTrend_setBallsData: function(e) {
            this.miniTrendData = e
        },
        miniTrend_getBallsData: function() {
            return this.miniTrendData ? this.miniTrendData : gameConfigData.issueHistory.issues
        },
        miniTrend_updateTrendUrl: function() {}
    }
      , l = e.Class(o, a);
    l.defConfig = r,
    e[t] = l
}(dsgame, "GameMethod", dsgame.Event),
function(e, t, a, n) {
    var r, i = {
        lotteryClose: ['<div class="bd text-center">', '<p class="text-title text-left">非常抱歉，本彩种已休市。<br />请与<#=orderDate#>后再购买</p>', '<div class="lottery-numbers text-left">', '<div class="tltle"><#=lotteryName#> 第<strong class="color-green"><#=lotteryPeriods#></strong>期开奖号码：</div>', '<div class="content">', "<#=lotterys#>", '<a href="#">查看更多&raquo;</a>', "</div>", "</div>", '<dl class="lottery-list">', "<dt>您可以购买以下彩种</dt>", "<#=lotteryType#>", "</dl>", "</div>"].join(""),
        checkLotters: ['<div class="bd game-submit-confirm-cont">', '<p class="game-submit-confirm-title">', '<label class="ui-label">彩种：<#=lotteryName#></label>', '<br/><label class="ui-label" style="display:none;" id="issue-for-print">奖期：<#=lotteryIssue#></label>', "</p>", '<ul class="ui-form">', "<li>", '<div class="textarea" id="project-for-print">', "<#=lotteryInfo#>", "</div>", "</li>", '<li class="game-submit-confirm-tip">', '<label class="ui-label">付款总金额：<span class="color-red"><#=lotteryamount#></span>元</label>', "</li>", "</ul>", "</div>"].join(""),
        nonSaleTime: ['<div class="bd text-center">', '<p class="text-title text-left">非常抱歉，本彩种未到销售时间。<br />请与<#=orderDate#>后再购买</p>', '<dl class="lottery-list">', "<dt>您可以购买以下彩种</dt>", "<#=lotteryType#>", "</dl>", "</div>"].join(""),
        normal: ['<div class="bd text-center">', '<div class="pop-waring">', '<i class="ico-waring <#=icon-class#>"></i>', '<h4 class="pop-text"><#=msg#><br /></h4>', "</div>", "</div>"].join(""),
        invalidtext: ['<div class="bd text-center">', '<div class="pop-waring">', '<i class="ico-waring <#=icon-class#>"></i>', '<h4 class="pop-text"><#=msg#><br /></h4>', "</div>", "</div>"].join(""),
        betExpired: ['<div class="bd text-center">', '<div class="pop-waring">', '<i class="ico-waring <#=icon-class#>"></i>', '<h4 class="pop-text"><#=msg#><br /></h4>', "</div>", "</div>"].join(""),
        multipleOver: ['<div class="bd text-center">', '<div class="pop-waring">', '<i class="ico-waring <#=icon-class#>"></i>', '<h4 class="pop-text"><#=msg#><br /></h4>', "</div>", "</div>"].join(""),
        pauseBet: ['<div class="bd text-center">', '<div class="pop-waring">', '<i class="ico-waring <#=icon-class#>"></i>', '<h4 class="pop-text"><#=msg#><br /></h4>', "</div>", "</div>"].join(""),
        successTip: ['<div class="bd text-center">', '<div class="pop-title">', '<i class="ico-success <#=icon-class#>"></i>', '<h4 class="pop-text"><#=msg#><br /></h4>', "</div>", '<p class="text-note" style="padding:5px 0;">您可以通过”<a href="<#=link#>" id="successview" target="_blank">游戏记录</a>“查询您的投注记录！</p>', "</div>"].join(""),
        betPart: ['<div class="bd text-center">', '<div class="pop-title">', '<i class="ico-error"></i>', '<h4 class="pop-text"><#=msg#></h4>', "</div>", "</div>"].join(""),
        betFailed: ['<div class="bd text-center">', '<div class="pop-waring">', '<i class="ico-waring <#=icon-class#>"></i>', '<h4 class="pop-text"><#=msg#><br /></h4>', '<div class="bet-failed-content"><#=failed_html#></div>', "</div>", "</div>"].join(""),
        checkBalls: ['<div class="bd text-center">', '<div class="pop-title">', '<i class="ico-waring <#=iconClass#>"></i>', '<h4 class="pop-text">请至少选择一注投注号码！</h4>', "</div>", '<div class="pop-btn ">', '<a href="javascript:void(0);" class="btn closeBtn">关 闭<b class="btn-inner"></b></a>', "</div>", "</div>"].join(""),
        errorTip: ['<div class="bd text-center">', '<div class="pop-title">', '<i class="ico-error"></i>', '<h4 class="pop-text"><#=msg#></h4>', "</div>", "</div>"].join(""),
        blockade: ['<div class="bd panel-game-msg-blockade" id="J-blockade-panel-main">', '<form id="J-form-blockade-detail" action="ssc-blockade-detail.php" target="_blank" method="post"></form>', '<div class="game-msg-blockade-text">存在<#=blockadeType#>内容，系统已为您做出 <a href="#" data-action="blockade-detail">最佳处理</a> ，点击<span class="color-red">“确认”</span>完成投注</div>', "<div>", '<div class="game-msg-blockade-line-title">彩种：<#=gameTypeTitle#></div>', '<div class="game-msg-blockade-line-title">期号：<#=currentGameNumber#></div>', "</div>", '<div id="J-game-panel-msg-blockade-0">', '<div class="game-msg-blockade-cont" id="J-msg-panel-submit-blockade-error0"><#=blockadeData0#></div>', "</div>", '<div class="game-msg-blockade-panel-money">', '<div><b>付款总金额：</b><span class="color-red"><b id="J-money-blockade-adjust"><#=amountAdjust#></b></span> 元&nbsp;&nbsp;&nbsp;&nbsp;<span style="display:<#=display#>"><b>减少投入：</b><span class="color-red"><b id="J-money-blockade-change"><#=amountChange#></b></span> 元</span></div>', "<div><b>付款账号：</b><#=username#></div>", "</div>", "<div>", '<p class="text-note">购买后请您尽量避免撤单，如撤单将收取手续费：￥<span class="handlingCharge">0.00</span>元</p>', '<p class="text-note">本次投注，若未涉及到付款金额变化，将不再提示</p>', "</div>", "</div>"].join(""),
        userTypeError: ['<div class="bd text-center">', '<div class="pop-title">', '<i class="ico-error"></i>', '<h4 class="pop-text">对不起，仅玩家允许投注</h4>', "</div>", "</div>"].join("")
    }, o = null , l = e.Games, s = {
        init: function(t) {
            var a = this;
            a.win = new e.MiniWindow({
                cls: "pop w-9"
            }),
            a.mask = e.Mask.getInstance(),
            a.reSet(),
            a.win.addEvent("afterHide", function() {
                a.reSet()
            })
        },
        doAction: function(e) {
            var t = this
              , a = "rebuild" + e.type
              , n = "getHtml" + e.type
              , r = function() {}
            ;
            n = n.replace("-", "_"),
            a = a.replace("-", "_"),
            t[a] && $.isFunction(t[a]) && (r = t[a]);
			if(t[n]){
				e.tpl = "undefined" == typeof e.tpl ? t[n]() : "" + e.tpl;
			}else{
				e.tpl = e.data.tpl;
			}

            delete e.type,
            r.call(t, e)
        },
        formatHtml: function(e, t) {
            var a, n, r = t;
            for (a in r)
                r.hasOwnProperty(a) && (n = RegExp("<#=" + a + "#>", "g"),
                e = e.replace(n, r[a]));
            return e
        },
        arrIndexOf: function(e, t) {
            for (var a = 0, n = 0; n < t.length; n++)
                t[n] == e && (a += 1);
            return a || -1
        },
        getHtmlerrorTip: function() {
            var e = this.defConfig;
            return e.errorTip
        },
        rebuilderrorTip: function(e) {
            var t = this
              , a = {};
            a.mask = !0,
            a.closeText = "关 闭",
            a.closeIsShow = !0,
            a.closeFun = function() {
                t.hide()
            }
            ,
            a.content = t.formatHtml(e.tpl, e.data.tplData),
            t.show($.extend(a, e))
        },
        getHtmlbet_part: function() {
            var e = this.defConfig;
            return e.betPart
        },
        rebuildbet_part: function(e) {
            var t = this
              , a = {};
            a.mask = !0,
            a.closeText = "关 闭",
            a.closeIsShow = !0,
            a.closeFun = function() {
                t.hide()
            }
            ,
            a.content = t.formatHtml(e.tpl, e.data.tplData),
            t.show($.extend(a, e))
        },
        getHtmlWaring: function() {
            var e = this.defConfig;
            return e.normal
        },
        rebuildnormal: function(e) {
            var t = this
              , a = {};
            a.mask = !0,
            a.closeText = "关 闭",
            a.closeIsShow = !0,
            a.closeFun = function() {
                t.hide()
            }
            ,
            a.content = t.formatHtml(e.tpl, e.data.tplData),
            t.show($.extend(a, e))
        },
        getHtmlnormal: function() {
            return this.getHtmlWaring()
        },
        rebuildlow_balance: function(e) {
            var t = this
              , a = {};
            a.mask = !0,
            a.iconClass = "",
            a.closeIsShow = !0,
            a.closeFun = function() {
                t.hide()
            }
            ,
            a.content = t.formatHtml(e.tpl, e.data.tplData),
            t.show($.extend(a, e))
        },
        getHtmllow_balance: function() {
            return this.getHtmlWaring()
        },
        rebuildissue_error: function(e) {
            var t = this
              , a = {};
            a.mask = !0,
            a.iconClass = "",
            a.closeIsShow = !0,
            a.closeFun = function() {
                t.hide()
            }
            ,
            a.content = t.formatHtml(e.tpl, e.data.tplData),
            t.show($.extend(a, e))
        },
        getHtmlissue_error: function() {
            return this.getHtmlWaring()
        },
        rebuildbet_failed: function(e) {
            var t = this
              , a = {}
              , n = [];
            a.mask = !0,
            a.iconClass = "",
            a.closeIsShow = !0,
            a.closeFun = function() {
                t.hide()
            }
            ,
            $.each(e.data.tplData.failed, function(e, t) {
                n.push('<div class="bet-failed-list">'),
                t.way_name && n.push('<p class="bet-failed-name">[' + t.way_name + "]</p>"),
                n.push('<p class="bet-failed-detail">' + t.ball + "</p>"),
                n.push('<p class="bet-failed-reason c-red">' + t.reason + "</p>"),
                n.push("</div>")
            }),
            e.data.tplData.failed_html = n.join(""),
            a.content = t.formatHtml(e.tpl, e.data.tplData),
            t.show($.extend(a, e))
        },
        getHtmlbet_failed: function() {
            var e = this.defConfig;
            return e.betFailed
        },
        rebuildcheckLotters: function(e) {
            var t = this
              , a = {};
            a.mask = !0,
            a.iconClass = "",
            a.title = "投注确认",
            a.content = t.formatHtml(e.tpl, e.data.tplData),
            t.show($.extend(a, e))
        },
        getHtmlcheckLotters: function() {
            var e = this.defConfig;
            return e.checkLotters
        },
        rebuildlotteryClose: function(e) {
            var t = this
              , a = {};
            lotteryName = e.data.tplData.lotteryName,
            lotteryPeriods = e.data.tplData.lotteryPeriods,
            time = e.data.tplData.orderDate,
            lotterys = e.data.tplData.lotterys,
            typeArray = e.data.tplData.lotteryType,
            a.mask = !0,
            a.iconClass = "",
            a.closeIsShow = !0,
            a.closeFun = function() {
                t.hide()
            }
            ,
            e.data.tplData.lotteryName = function() {
                return lotteryName || ""
            }
            ,
            e.data.tplData.lotteryPeriods = function() {
                return lotteryPeriods || ""
            }
            ,
            e.data.tplData.orderDate = function() {
                return time.year + "年" + time.month + "月" + time.day + "日 " + time.hour + ":" + time.min
            }
            ,
            e.data.tplData.lotterys = function() {
                var e = "";
                if ($.isArray(lotterys))
                    for (var t = 0; t < lotterys.length; t++)
                        e += "<em>" + lotterys[t] + "</em>";
                return e
            }
            ,
            e.data.tplData.lotteryType = function() {
                var e = "";
                if ($.isArray(typeArray))
                    for (var t = 0; t < typeArray.length; t++)
                        e += '<dd><span style="background:url(' + typeArray[t].pic + ')" class="pic" title="' + typeArray[t].name + '" alt="' + typeArray[t].name + '"></span><a href="' + typeArray[t].url + '" class="btn">去投注<b class="btn-inner"></b></a></dd>';
                return e
            }
            ,
            a.content = t.formatHtml(e.tpl, e.data.tplData),
            t.show($.extend(a, e))
        },
        getHtmllotteryClose: function() {
            var e = this.defConfig;
            return e.lotteryClose
        },
        rebuildnonSaleTime: function(e) {
            var t = this
              , a = {};
            time = e.data.tplData.orderDate,
            typeArray = e.data.tplData.lotteryType,
            a.mask = !0,
            a.iconClass = "",
            a.closeIsShow = !0,
            a.closeFun = function() {
                t.hide()
            }
            ,
            e.data.tplData.orderDate = function() {
                return time.year + "年" + time.month + "月" + time.day + "日 " + time.hour + ":" + time.min
            }
            ,
            e.data.tplData.lotteryType = function() {
                var e = "";
                if ($.isArray(typeArray))
                    for (var t = 0; t < typeArray.length; t++)
                        e += '<dd><span style="background:url(' + typeArray[t].pic + ')" class="pic" title="' + typeArray[t].name + '" alt="' + typeArray[t].name + '"></span><a href="' + typeArray[t].url + '" class="btn">去投注<b class="btn-inner"></b></a></dd>';
                return e
            }
            ,
            a.content = t.formatHtml(e.tpl, e.data.tplData),
            t.show($.extend(a, e))
        },
        getHtmlnonSaleTime: function() {
            var e = this.defConfig;
            return e.nonSaleTime
        },
        rebuildno_right: function(e) {
            var t = this
              , a = {};
            a.mask = !0,
            a.iconClass = "",
            a.closeIsShow = !0,
            a.closeFun = function() {
                t.hide()
            }
            ,
            a.content = t.formatHtml(e.tpl, e.data.tplData),
            t.show($.extend(a, e))
        },
        rebuildmustChoose: function(e) {
            var t = this
              , a = {};
            a.mask = !0,
            a.iconClass = "",
            a.closeIsShow = !0,
            a.closeFun = function() {
                t.hide()
            }
            ,
            a.content = t.formatHtml(e.tpl, e.data.tplData),
            t.show($.extend(a, e))
        },
        getHtmlmustChoose: function() {
            return this.getHtmlWaring()
        },
        rebuildnetAbnormal: function(e) {
            var t = this
              , a = {};
            a.mask = !0,
            a.iconClass = "",
            a.closeIsShow = !0,
            a.closeFun = function() {
                t.hide()
            }
            ,
            a.content = t.formatHtml(e.tpl, e.data.tplData),
            t.show($.extend(a, e))
        },
        getHtmlnetAbnormal: function() {
            return this.getHtmlWaring()
        },
        rebuildsuccess: function(e) {
            var t = this
              , a = {};
            a.mask = !0,
            a.iconClass = "",
            a.closeIsShow = !0,
            a.printIsShow = !0,
            a.closeFun = function() {
                t.hide()
            }
            ,
            a.printFun = function() {
                t.print()
            }
            ,
            a.content = t.formatHtml(e.tpl, e.data.tplData),
            t.show($.extend(a, e))
        },
        getHtmlsuccess: function() {
            var e = this.defConfig;
            return (isMobile.any() ? String(e.successTip).replace(' target="_blank"',' onclick="$(\'.closeTip\').click();"') : e.successTip);
        },
        rebuildloginTimeout: function(e) {
            var t = this
              , a = {};
            a.mask = !0,
            a.closeIsShow = !0,
            a.closeFun = function() {
                t.hide()
            }
            ,
            a.content = t.formatHtml(e.tpl, e.data.tplData),
            t.show($.extend(a, e))
        },
        getHtmlloginTimeout: function() {
            return this.getHtmlWaring()
        },
        rebuildserverError: function(e) {
            var t = this
              , a = {};
            a.mask = !0,
            a.iconClass = "",
            a.closeIsShow = !0,
            a.closeFun = function() {
                t.hide()
            }
            ,
            a.content = t.formatHtml(e.tpl, e.data.tplData),
            t.show($.extend(a, e))
        },
        getHtmlserverError: function() {
            return this.getHtmlWaring()
        },
        rebuildInsufficientbalance: function(e) {
            var t = this
              , a = {};
            a.mask = !0,
            a.closeIsShow = !0,
            a.closeFun = function() {
                t.hide()
            }
            ,
            a.content = t.formatHtml(e.tpl, e.data.tplData),
            t.show($.extend(a, e))
        },
        getHtmlInsufficientbalance: function() {
            return this.getHtmlWaring()
        },
        rebuildpauseBet: function(e) {
            var t = this
              , a = {};
            a.mask = !0,
            a.confirmText = "投 注",
            a.confirmIsShow = !0,
            a.confirmFun = function() {
                for (var t = l.getCurrentGameOrder(), a = 0; a < e.data.tplData.balls.length; a++)
                    t.removeData(e.data.tplData.balls[a].id);
                l.getCurrentGameSubmit().submitData()
            }
            ,
            a.closeText = "关 闭",
            a.closeIsShow = !0,
            a.closeFun = function() {
                t.hide()
            }
            ,
            e.data.tplData.msg = function() {
                for (var a = [], n = l.getCurrentGame().getGameConfig().getInstance(), r = 0; r < e.data.tplData.balls.length; r++) {
                    var i = e.data.tplData.balls[r].type
                      , o = n.getTitleByName(i);
                    -1 == t.arrIndexOf(o.join(""), a) && a.push(o.join(""))
                }
                return "您的投注内容中“" + a.join("") + "”已暂停销售，是否完成剩余内容投注？"
            }
            ,
            a.content = t.formatHtml(e.tpl, e.data.tplData),
            t.show($.extend(a, e))
        },
        getHtmlpauseBet: function() {
            var e = this.defConfig;
            return e.pauseBet
        },
        rebuildmultipleOver: function(e) {
            var t = this
              , a = {};
            a.mask = !0,
            a.iconClass = "",
            a.closeText = "关 闭",
            a.closeIsShow = !0,
            a.closeFun = function() {
                t.hide()
            }
            ,
            e.data.tplData.msg = function() {
                for (var a = [], n = l.getCurrentGame().getGameConfig().getInstance(), r = 0; r < e.data.tplData.balls.length; r++) {
                    var i = e.data.tplData.balls[r].type
                      , o = n.getTitleByName(i);
                    -1 == t.arrIndexOf(o.join(""), a) && a.push(o.join(""))
                }
                return "您的投注内容中“" + a.join("") + "”超出倍数限制，请调整！"
            }
            ,
            a.content = t.formatHtml(e.tpl, e.data.tplData),
            t.show($.extend(a, e))
        },
        getHtmlmultipleOver: function() {
            var e = this.defConfig;
            return e.multipleOver
        },
        rebuildinvalidtext: function(e) {
            var t = this
              , a = {};
            a.mask = !0,
            a.confirmText = "刷新页面",
            a.confirmIsShow = !0,
            a.confirmFun = function() {
                window.location.reload()
            }
            ,
            a.content = t.formatHtml(t.getHtmlinvalidtext(), e),
            t.show($.extend(a, e))
        },
        getHtmlinvalidtext: function() {
            var e = this.defConfig;
            return e.invalidtext
        },
        rebuildbetExpired: function(e) {
            var t = this
              , a = {};
            a.mask = !0,
            a.closeText = "关 闭",
            a.closeIsShow = !0,
            a.closeFun = function() {
                t.hide()
            }
            ,
            e.data.tplData.msg = function() {
                return "您好，" + e.data.tplData.bitDate.expiredDate + "期 已截止销售，当前期为" + e.data.tplData.bitDate.current + "期 ，请留意！"
            }
            ,
            a.content = t.formatHtml(t.getHtmlbetExpired(), e.data.tplData),
            t.show($.extend(a, e))
        },
        getHtmlbetExpired: function() {
            var e = this.defConfig;
            return e.betExpired
        },
        rebuildillegalTools: function(e) {
            var t = this
              , a = {};
            a.mask = !0,
            a.confirmText = "刷新页面",
            a.confirmIsShow = !0,
            a.confirmFun = function() {
                window.location.reload()
            }
            ,
            a.content = t.formatHtml(t.getHtmlbetExpired(), e.data.tplData),
            t.show($.extend(a, e))
        },
        getHtmlblockade: function() {
            return this.defConfig.blockade
        },
        rebuildblockade: function(t) {
            var a = this
              , n = {}
              , r = t.data.tplData
              , i = t.data.orderData
              , o = t.data.blockadeInfo
              , s = i.balls
              , u = {}
              , c = ""
              , m = ""
              , d = l.getCurrentGameOrder().formatMoney
              , g = 28
              , p = !1
              , f = ['<ul class="game-msg-blockade-balls">'];
            n.mask = !0,
            n.closeIsShow = !0,
            n.closeText = "关 闭",
            n.confirmIsShow = !0,
            n.confirmText = "确 认",
            n.closeFun = function() {
                a.hide()
            }
            ,
            $.each(s, function(e) {
                u["" + this.id] = this,
                c = this.ball,
                c.length > g && (c = c.substr(0, g) + "..."),
                m = l.getCurrentGame().getGameConfig().getInstance().getTitleByName(this.type).join("_"),
                f.push('<li data-id="' + this.id + '">[' + m + "] " + c + "</li>")
            }),
            f.push("</ul>"),
            r.gameTypeTitle = l.getCurrentGame().getGameConfig().getInstance().getGameTypeCn(),
            r.blockadeData0 = f.join(""),
            r.amount = d(i.amount),
            r.username = o.username,
            r.amountAdjust = d(o.amountAdjust),
            r.amountChange = d(i.amount - o.amountAdjust),
            r.display = "",
            1 == o.type ? r.blockadeType = "受限" : 2 == o.type ? (r.blockadeType = "奖金变动",
            r.display = "none") : r.blockadeType = "奖金变动及受限",
            n.callback = function() {
                $.ajax({
                    url: l.getCurrentGameSubmit().defConfig.handlingChargeURL + "?amout=" + o.amountAdjust,
                    dataType: "json",
                    method: "GET",
                    success: function(e) {
                        1 == Number(e.isSuccess) && a.getContentDom().find(".handlingCharge").html(e.data.handingcharge)
                    }
                })
            }
            ,
            n.content = a.formatHtml(a.getHtmlbetExpired(), r),
            n.confirmFun = function() {
                var e = l.getCurrentGameMessage();
                return p ? !1 : void $.ajax({
                    url: l.getCurrentGameSubmit().defConfig.URL,
                    data: i,
                    dataType: "json",
                    method: "POST",
                    beforeSend: function() {
                        p = !0
                    },
                    success: function(t) {
                        1 == Number(t.isSuccess) ? (e.show(t),
                        a.clearData(),$('[data-user-account-balance]').html(t.data.tplData.money),
                        a.fireEvent("afterSubmitSuccess")) : e.show(t)
                    },
                    complete: function() {
                        p = !1,
                        a.fireEvent("afterSubmit")
                    }
                })
            }
            ,
            a.show($.extend(n, t)),
            e.util.toViewCenter(a.win.dom),
            $("#J-blockade-panel-main").on("click", "[data-action]", function(e) {
                var t = $(this)
                  , a = $.trim(t.attr("data-action"));
                $.trim(t.parent().attr("data-id"));
                switch (e.preventDefault(),
                a) {
                case "blockade-detail":
                    var n = $("#J-form-blockade-detail")
                      , r = "-";
                    n.html(""),
                    $('<input type="hidden" value="' + i.gameType + '" name="gameType" />').appendTo(n),
                    $.each(s, function() {
                        var e = this;
                        e.lockPoint && ("" != $.trim(e.lockPoint.beforeBlockadeList) && $.each(e.lockPoint.beforeBlockadeList, function() {
                            var t = this;
                            $('<input type="hidden" value="' + t.beishu + r + t.blockadeDetail + r + t.realBeishu + r + e.type + r + e.ball + '" name="beforeBlockadeList[]" />').appendTo(n)
                        }),
                        "" != $.trim(e.lockPoint.pointsList) && $.each(e.lockPoint.pointsList, function() {
                            var t = this;
                            $('<input type="hidden" value="' + t.mult + r + t.point + r + t.retValue + r + e.type + r + e.ball + '" name="pointsList[]" />').appendTo(n)
                        }))
                    }),
                    n.submit()
                }
            })
        },
        getHtmlillegalTools: function() {
            return this.getHtmlWaring()
        },
        rebuildsubFailed: function(e) {
            var t = this
              , a = {};
            a.mask = !0,
            a.closeText = "关 闭",
            a.closeIsShow = !0,
            a.closeFun = function() {
                t.hide()
            }
            ,
            a.content = t.formatHtml(t.getHtmlbetExpired(), e.data.tplData),
            t.show($.extend(a, e))
        },
        getHtmlsubFailed: function() {
            return this.getHtmlWaring()
        },
        rebuildgroup_error: function(e) {
            var t = this
              , a = {};
            a.mask = !0,
            a.closeText = "关 闭",
            a.closeIsShow = !0,
            a.closeFun = function() {
                t.hide()
            }
            ,
            a.content = t.formatHtml(t.getHtmlbetExpired(), e.data.tplData),
            t.show($.extend(a, e))
        },
        getHtmlgroup_error: function() {
            return this.getHtmlWaring()
        },
        getHtmlno_right: function() {
            return this.defConfig.userTypeError
        },
        setTitle: function(e) {
            var t = this
              , a = t.win;
            a.setTitle(e)
        },
        setContent: function(e, t) {
            var a = this
              , n = a.win;
            n.setContent(e, t)
        },
        hideClose: function() {
            var e = this
              , t = e.win;
            t.getCloseDom().hide()
        },
        hideTitle: function() {
            var e = this
              , t = e.win;
            t.getTitleDom().hide()
        },
        show: function(e) {
            var t = this
              , a = t.win;
            if (t.reSet(),
            "undefined" == typeof e.data && (e.data = {}),
            e.data.tplData = "undefined" == typeof e.data.tplData ? {} : e.data.tplData,
            e) {

                if (e.type)
                    return void t.doAction(e);
                "undefined" != typeof e.tpl && (e.content = t.formatHtml(e.tpl, e.data.tplData)),
                o && (clearTimeout(o),
                o = null ),
                t.setTitle(e.title || "温馨提示"),
                t.setContent(e.content || ""),
                e.confirmText && a.setConfirmName(e.confirmText),
                e.cancelText && a.setCancelName(e.cancelText),
                e.closeText && a.setCloseName(e.closeText),
                e.normalCloseFun && (a.doNormalClose = e.normalCloseFun),
                e.confirmFun && (a.doConfirm = e.confirmFun),
                e.cancelFun && (a.doCancel = e.cancelFun),
                e.closeFun && (a.doClose = e.closeFun),
                e.printFun && (a.doPrint = e.printFun),
                e.confirmIsShow && a.showConfirmButton(),
                e.cancelIsShow && a.showCancelButton(),
                e.closeIsShow && a.showCloseButton(),
                e.printIsShow && a.showPrintButton(),
                e.hideTitle && t.hideTitle(),
                e.hideClose && t.hideClose(),
                e.mask && (t.mask.show(),
                $("#print-project-panel").html($(".game-submit-confirm-cont").html())),
                a.show(),
                e.callback && e.callback.call(t),
                e.time && (o = setTimeout(function() {
                    t.hide(),
                    clearTimeout(o),
                    o = null
                }, 1e3 * e.time))
            }
        },
		showError: function(e) {//Add by fin.
			var t = this;
			var a = t.win;
			t.hide();
			a.show();
			var content='<div class="bd text-center"><div class="pop-waring"><i class="ico-waring <#=icon-class#>"></i><h4 class="pop-text">'
			+ e.Msg +'<br></h4></div></div>';
			a.setTitle("温馨提示 - 下单失败");
            a.setContent(content);
			a.showCloseButton();
			t.mask.show()
			a.doClose = function(){
				a.hide();
				t.mask.hide();
			};
		},
        getContainerDom: function() {
            var e = this;
            return e.win.getContainerDom()
        },
        getContentDom: function() {
            var e = this;
            return e.win.getContentDom()
        },
        hide: function() {
            var e = this
              , t = e.win;
            t.hide(),
            e.reSet()
        },
        print: function() {
            var e = this
              , t = e.win;
            t.hide(),
            e.reSet(),
            $("#issue-for-print").show(),
            $(".amount-for-print").show(),
            $(".game-submit-confirm-tip").css("text-align", "left"),
            $("#project-for-print").removeClass("textarea").append($('<div style="font-size:8px">购买时间：' + (new Date).toLocaleString() + "</div>")),
            $(".game-submit-confirm-list").removeClass("game-submit-confirm-list"),
            $("#print-project-panel").show().css("font-size", "14px"),
            window.print(),
            $("#print-project-panel").hide()
        },
        reSet: function() {
            var e = this
              , t = e.win;
            e.mask.hide(),
            e.setTitle("提示"),
            e.setContent(""),
            t.hideConfirmButton(),
            t.hideCancelButton(),
            t.hideCloseButton(),
            t.hidePrintButton(),
            t.doConfirm = function() {}
            ,
            t.doCancel = function() {}
            ,
            t.doClose = function() {}
            ,
            t.doNormalClose = function() {}
            ,
            t.setConfirmName("确 认"),
            t.setCancelName("取 消"),
            t.setCloseName("关 闭")
        },
        showTip: function(e, t) {
            var a = this;
            a.mask.show(),
            a.win.showTip(e, t)
        },
        hideTip: function() {
            var e = this;
            e.win.hideTip(),
            e.mask.hide()
        }
    }, u = e.Class(s, a);
    u.defConfig = i,
    u.getInstance = function(e) {
        return r || (r = new u(e))
    }
    ,
    e[t] = u
}(dsgame, "GameMessage", dsgame.Event),
function(e, t, a, n) {
    var r, i = {
        mainPanel: "#J-balls-statistics-panel",
        lotteryNumDom: "#J-balls-statistics-lotteryNum",
        multipleDom: "#J-balls-statistics-multiple",
        amountDom: "#J-balls-statistics-amount",
        moneyUnitDom: "#J-balls-statistics-moneyUnit",
        moneyUnitTriggerDom: "#J-balls-statistics-moneyUnit-trigger",
        moneyUnit: gameConfigData.defaultCoefficient,
        moneyUnitData: gameConfigData.availableCoefficients,
        multiple: gameConfigData.defaultMultiple,
        bonusGroupMax: gameConfigData.maxPrizeGroup
    }, o = e.Games, l = {
        init: function(e) {
            var t = this;
            o.setCurrentGameStatistics(t),
            t.panel = $(e.mainPanel),
            t.moneyUnit = e.moneyUnit,
            t.multiple = e.multiple,
            t.setProjectNum(1),
            t.lotteryData = [],
            o.getCurrentGame().addEvent("afterProjectNumSet", function(e, a, n) {
                var r = n.length || 1;
                t.setProjectNum(r),
                t.setDigitChoose(n),
                a != r && o.getCurrentGame().getCurrentGameMethod().updateData()
            }),
            t.multipleDom = new dsgame.Select({
                cls: "select-game-statics-multiple",
                realDom: e.multipleDom,
                isInput: !0,
                isCounter: !0,
                expands: {
                    inputEvent: function() {
                        var e = this;
                        this.getInput().keyup(function(a) {
                            var n = this.value
                              , r = o.getCurrentGame().getCurrentGameMethod().getId()
                              , i = t.getMoneyUnit()
                              , l = l = 0 == o.getCurrentGame().getGameConfig().getInstance().getLimitByMethodId(r, i) ? n : o.getCurrentGame().getGameConfig().getInstance().getLimitByMethodId(r, i);
                            this.value = this.value.replace(/[^\d]/g, ""),
                            "" != $.trim(this.value) && (n = Number(this.value),
                            1 > n ? this.value = 1 : n > l && (this.value = l),
                            e.setValue(this.value))
                        }),
                        this.getInput().blur(function() {
                            var a = this.value
                              , n = o.getCurrentGame().getCurrentGameMethod().getId()
                              , r = t.getMoneyUnit()
                              , i = 0 == o.getCurrentGame().getGameConfig().getInstance().getLimitByMethodId(n, r) ? a : o.getCurrentGame().getGameConfig().getInstance().getLimitByMethodId(n, r);
                            this.value = this.value.replace(/[^\d]/g, ""),
                            a = Number(this.value),
                            1 > a ? this.value = 1 : a > i && (this.value = i),
                            e.setValue(this.value)
                        })
                    }
                }
            }),
            t.multipleDom.setValue(0 == t.multiple ? 1 : t.multiple),
            t.multipleDom.addEvent("change", function(e, a, n) {
                var r = Number(a)
                  , i = o.getCurrentGame().getCurrentGameMethod().getId()
                  , l = t.getMoneyUnit()
                  , s = 0 == o.getCurrentGame().getGameConfig().getInstance().getLimitByMethodId(i, l) ? r : o.getCurrentGame().getGameConfig().getInstance().getLimitByMethodId(i, l);
                r > s && (r = s,
                this.setValue(r)),
                t.setMultiple(r),
                t.updateData({
                    lotterys: o.getCurrentGame().getCurrentGameMethod().getLottery(),
                    original: o.getCurrentGame().getCurrentGameMethod().getOriginal()
                }, o.getCurrentGame().getCurrentGameMethod().getName()),
                $("#J-balls-statistics-multipleNum").text(r)
            }),
            t.moneyUnitDom = new dsgame.Select({
                cls: "select-game-statics-moneyUnitDom",
                realDom: e.moneyUnitDom
            }),
            t.moneyUnitDom.setValue(t.moneyUnit),
            t.moneyUnitDom.addEvent("change", function(e, a, n) {
                var r = t.getMultip()
                  , i = o.getCurrentGame().getCurrentGameMethod().getId()
                  , l = Number(a)
                  , s = 0 == o.getCurrentGame().getGameConfig().getInstance().getLimitByMethodId(i, l) ? 1 : o.getCurrentGame().getGameConfig().getInstance().getLimitByMethodId(i, l);
                r = r > s ? s : r,
                t.setMultipleDom(r),
                t.setMoneyUnit(Number(a)),
                t.multipleDom.setMaxValue(s),
                t.updateData({
                    lotterys: o.getCurrentGame().getCurrentGameMethod().getLottery(),
                    original: o.getCurrentGame().getCurrentGameMethod().getOriginal()
                }, o.getCurrentGame().getCurrentGameMethod().getName())
            }),
            t.hidesetMoneyUnitDom();
            var a = jQuery(e.moneyUnitTriggerDom);
            t.setMoneyUnitTriggerDom(a),
            a.on("click", "a[data-value]", function() {
                var e = $(this).data("value");
                return e && !$(this).hasClass("current") && (t.moneyUnitDom.setValue(e),
                $(this).addClass("current").siblings().removeClass("current")),
                !1
            }),
            $('a[data-value="' + t.moneyUnit + '"]', a).addClass("current");
			      var ps = o.getCurrentGame().getGameConfig().getInstance().getOptionalPrizes();
            for (var n = ps, r = n.length, l = $(".J-prize-group-slider"), s = $("#J-bonus-select-value"), u = l.find("[data-slider-percent]"), c = l.find("[data-slider-value]"), m = r - 1, d = i.bonusGroupMax && "0" != i.bonusGroupMax ? i.bonusGroupMax : n[r - 1].prize_group; m >= 0 && !(n[m].prize_group <= d); m--)
                ;

            n = ps.reverse();
            o.getCurrentGame().getGameConfig().getInstance().setOptionalPrizes(n);
            t.bonusGroup = n,
            t.prizeSlider = new dsgame.SliderBar({
                minDom: "[data-slider-sub]",
                maxDom: "[data-slider-add]",
                contDom: "[data-slider-cont]",
                handleDom: "[data-slider-handle]",
                innerDom: "[data-slider-inner]",
                minNumDom: "[data-slider-min]",
                maxNumDom: "[data-slider-max]",
                parentDom: l,
                step: 1,
                minBound: 0,
                maxBound: r - 1,
                rangeBound: [0, m],
                value: m
            });//alert('2');

            t.prizeSlider.addEvent("change", function() {
                var e = n[this.getValue()].prize_group
                  , a = n[this.getValue()].rate
                  , r = (100 * a).toFixed(2) + "%";
                s.val(e),
                u.text(r),
                c.text(e);
              if(o.getCurrentGame().getCurrentGameMethod()){
                var oddSpan = $("#J-method-prize>span");
                var mId =  o.getCurrentGame().getCurrentGameMethod().getId();
                var prize = o.getCurrentGame().getGameConfig().getInstance().getPrizeById(mId);
                var pl = o.getCurrentGame().getGameConfig().getInstance().getOptionalPrizes().length;
                var mp = o.getCurrentGame().getGameConfig().getInstance().getOptionalPrizes()[0].rate
                var max = prize.prize;
                var unit = t.getMoneyUnit();
                var odds = (Number(max) + prize.x * (mp - a))* unit;
                odds = dsgame.util.formatMoneySmall(odds,4);
                oddSpan.html(odds)
                o.getCurrentGameStatistics().point = a;
              }
                var i = t.getResultData();
                i && i.amount && t.setRebate(i.amount, a)
            }),
            t.updateData({
                lotterys: [],
                original: []
            }),$(function() {
                t.prizeSlider.setValue(m)
            })//,
        },
        setProjectNum: function(e) {
            this.projectNum = e
        },
        getProjectNum: function() {
            return this.projectNum
        },
        setDigitChoose: function(e) {
            this.digitChoose = e
        },
        getDigitChoose: function() {
            return this.digitChoose
        },
        getMultipleDom: function() {
            return this.multipleDom
        },
        getMoneyUnitText: function(e) {
            return this.defConfig.moneyUnitData["" + e]
        },
        updateData: function(e, t) {
            var a = this
              , n = (a.defConfig,
            e.lotterys ? e.lotterys.length : 0)
              , r = 2
              , i = a.multiple
              , l = a.moneyUnit
              , s = a.projectNum;
            o.getCurrentGame() && o.getCurrentGame().getCurrentGameMethod() && (r = o.getCurrentGame().getGameConfig().getInstance().getOnePriceById(o.getCurrentGame().getCurrentGameMethod().getId()));
            var u = n * l * i * r * s;
            a.setLotteryData(e),
            a.setMoneyUnitDom(l),
            a.setLotteryNumDom(n * s),
            a.setAmountDom(a.formatMoney(u)),
            a.fireEvent("afterUpdate", n, u)
        },
        getResultData: function() {
            var e, t = this, a = o.getCurrentGame().getCurrentGameMethod(), n = t.getLotteryData();

            return n.lotterys.length < 1 ? {} : (e = o.getCurrentGame().getGameConfig().getInstance().getOnePriceById(a.getId()),
            count = n.lotterys.length * t.projectNum,
            amount = count * t.moneyUnit * t.multiple * e,
            {
                mid: a.getId(),
                type: a.getName(),
                original: n.original,
                lotterys: n.lotterys,
                quick: n.quick,
                quickdiff: n.quickdiff,
                moneyUnit: t.moneyUnit,
                num: count,
                multiple: t.multiple,
                projectNum: t.projectNum,
                digitChoose: t.getDigitChoose(),
                orderSplitType: a.getOrderSplitType(),
                onePrice: e,
                amount: amount,
                amountText: t.formatMoney(amount),
                prizeGroup: o.getCurrentGame().getGameConfig().getInstance().setOptionalPrizes(),
                prizeGroupVal: $("#J-balls-statistics-rebate").text()
            })
        },
        setMoneyUnit: function(e) {
            var t = this;
            t.moneyUnit = e
        },
        getMoneyUnit: function() {
            return this.moneyUnit
        },
        getLotteryData: function() {
            return this.lotteryData
        },
        setLotteryData: function(e) {
            var t = this;
            t.lotteryData = e
        },
        formatMoney: function(e) {
            var e = Number(e)
              , t = /(-?\d+)(\d{3})/;
            for (e = Number.prototype.toFixed ? e.toFixed(3) : Math.round(100 * e) / 100,
            e = "" + e; t.test(e); )
                e = e.replace(t, "$1,$2");
            return e
        },
        getLotteryNumDom: function() {
            var e = this
              , t = e.defConfig;
            return e.lotteryNumDom || (e.lotteryNumDom = $(t.lotteryNumDom))
        },
        setLotteryNumDom: function(e) {
            var t = this;
            $('#mobile_dealcount').html(e),
            t.getLotteryNumDom().html(e)
        },
        getMultipleDom: function() {
            return this.multipleDom
        },
        getMultip: function() {
            var e = this;
            return e.multiple
        },
        setMultipleDom: function(e) {
            var t = this;
            t.getMultipleDom().setValue(e)
        },
        setMultiple: function(e) {
            this.multiple = e
        },
        getMoneyUnitDom: function() {
            return this.moneyUnitDom
        },
        setMoneyUnitDom: function(e) {
            var t = this
              , a = e;
            i.moneyUnitData[e] && (a = i.moneyUnitData[e]),
            t.setMoneyUnit(e),
            $(".select-game-statics-moneyUnitDom input").val(a)
        },
        setMoneyUnitTriggerDom: function(e) {
            this.moneyUnitTriggerDom = e
        },
        getMoneyUnitTriggerDom: function() {
            return this.moneyUnitTriggerDom
        },
        triggerMoneyUnit: function(e) {
            var t = this
              , a = $.Event("click")
              , n = t.getMoneyUnitTriggerDom();
            a.target = n.find("a[data-value]").filter(function() {
                return Number($(this).data("value")) == Number(e)
            })[0],
            n.trigger(a)
        },
        hidesetMoneyUnitDom: function() {
            this.moneyUnitDom.hide()
        },
        getPrizeSlider: function() {
            return this.prizeSlider
        },
        getPrizeGroup: function() {
            return this.bonusGroup[this.prizeSlider.getValue()].prize_group
        },
        getPrizeGroupRate: function() {
            return this.bonusGroup[this.prizeSlider.getValue()].rate
        },
        setSliderValueByPrizeGroup: function(e) {
            var t = -1;
            $.each(this.bonusGroup, function(a, n) {
                return n.prize_group == e ? t = a : void 0
            }),
            this.getPrizeSlider().setValue(t)
        },
        setRebate: function(t, a) {
			var point;
			if(t&&a){
				point = t*a;
			}else{
				point = 0;
			}
            // var n = ""
              // , r = Math.pow(10, 8);
            // if (0 >= t || 0 >= a)
                // n = "0.00";
            // else if (t = "" + parseFloat(t * (a * r) / r || 0),
            // t = t.split("."),
            // t[1]) {
                // var i = "" + t[1];
                // i.length > 8 && (i = i.slice(0, 8)),
                // n = e.util.formatMoney(t[0], 0) + "." + i
            // } else
                // n = e.util.formatMoney(t[0], 2);
			point = dsgame.util.formatMoneySmall(point,4);
            $("#J-balls-statistics-rebate").html(point)
        },
        getAmountDom: function() {
            var e = this
              , t = e.defConfig;
            return e.amountDom || (e.amountDom = $(t.amountDom))
        },
        setAmountDom: function(e) {
            var t = this;
            $('#mobile_amount').html(e),
            t.getAmountDom().html(e)
        },
        reSet: function() {
            var e = this;
            e.defConfig;
            e.multipleDom.setValue(1)
        }
    }, s = e.Class(l, a);
    s.defConfig = i,
    s.getInstance = function(e) {
        return r || (r = new s(e))
    }
    ,
    e[t] = s
}(dsgame, "GameStatistics", dsgame.Event),
function(e, t, a, n) {
    var r, i = {
        panel: "#J-panel-gameTypes"
    }, o = e.Games, l = {
        init: function(e) {
            var t = this;
            o.setCurrentGameTypes(t),
            t.container = $(e.panel),
            t.data = o.getCurrentGame().getGameConfig().getInstance().getMethods(),
            t.buildDom(),
            t.initEvent()
        },
        buildDom: function() {
            var e, t = this, a = [], n = [], r = [];
            t.renxuanCount = 0,
            $.each(t.data, function() {
                a = [],
                e = this,
                e.isRenxuan ? (t.renxuanCount += 1,
                a.push('<li class="gametypes-menu-' + e.name_en + ' gametypes-menu-renxuan" data-renxuan>')) : a.push('<li class="gametypes-menu-' + e.name_en + '">'),
                a.push('<div class="title">'),
                a.push(e.name_cn),
                r[0] = e.name_en,
                a.push("<span></span>"),
                a.push("</div>"),
                a.push("</li>"),
                n.push(a.join(""))
            }),
            t.renxuanCount && n.push('<li class="gametypes-menu-toggle">任选</li>'),
            $('.method-lst').html(n.join("")),
            t.getContainerDom().html(n.join("")),
            t.buildPanelMenu(),
            setTimeout(function() {
                t.fireEvent("endShow")
            }, 20)
        },
        buildPanelMenu: function() {
            var e, t, a, n = this, r = [], i = [], o = [], l = n.getPanelDom();
            $.each(n.data, function() {
                r = [],
                e = this,
                r.push('<li class="gametypes-sort gametypes-menu-' + e.name_en + '">'),
                r.push('<div class="content clearfix">'),
                $.each(e.children, function() {
                    t = this,
                    o[1] = t.name_en,
                    r.push("<dl>"),
                    r.push('<dt class="types-node types-node-' + t.name_en + '">' + t.name_cn + "</dt>"),
                    $.each(t.children, function() {
                        a = this,
                        o[2] = a.name_en,
                        r.push('<dd class="types-item" data-id="' + a.id + '">' + a.name_cn + "</dd>")
                    }),
                    r.push("</dl>")
                }),
                r.push("</div>"),
                r.push("</li>"),
                i.push(r.join(""))
            }),
            $('.second-method-lst ul').html(i.join("")),

            (typeof readCookieMethod !== 'undefined' ? readCookieMethod($('lottery .now_lottery').data('lid')) : !0),
            l.html(i.join(""));
            if (typeof $.cookie('mymethod'+$('lottery .now_lottery').data('lid')) !== 'undefined') {
               var cookiemid = $.cookie('mymethod'+$('lottery .now_lottery').data('lid'));
               var allmid = cookiemid.split(',');
               for (i = 0; i < allmid.length; i++) {
                  $('lottery .second-method-lst ul dd.types-item[data-id="'+allmid[i]+'"]').addClass('added')
               }


            }
        },
        initEvent: function() {
            var e = this;
            e.getPanelDom().on("click", ".types-item", function() {
                var t = $(this)
                  , a = t.attr("data-id");
                a && e.changeMode(a, t)
            }),
            e.container.on("click", ".title", function() {
                var t = $(this).parent().index()
                  , a = $(this).parents("ul").find("li")
                  , n = e.getPanelDom().find(".gametypes-sort");

                a.removeClass("current").eq(t).addClass("current"),
                n.hide().removeClass("current").eq(t).addClass("current").show();
                var r = n.eq(t).find("dd.types-item").first().attr("data-id");
                e.changeMode(r)
            }),
            e.container.on("click", ".gametypes-menu-toggle", function() {
                e.fireEvent("afterGametypesChange", this)
            })
        },
        getContainerDom: function() {
            return this.container
        },
        getPanelDom: function() {
            return this.panelDom || (this.panelDom = $("#J-gametyes-menu-panel"))
        },
        changeMode: function(e, t) {
            var a = this;
            a.getContainerDom();
            a.fireEvent("beforeChange", e);
            try {
                if (e == o.getCurrentGame().getCurrentGameMethod().getGameMethodName())
                    return
            } catch (n) {}
            o.getCurrentGame().switchGameMethod(e)
        }
    }, s = e.Class(l, a);
    s.defConfig = i,
    s.getInstance = function(e) {
        return r || (r = new s(e))
    }
    ,
    e[t] = s
}(dsgame, "GameTypes", dsgame.Event),
function(e, t, a, n) {
    var r, o = {
        containerEvent: "#J-panel-order-list-cont",
        containerDom: "#J-balls-order-container",
        totalLotterysNumDom: "#J-gameOrder-lotterys-num",
        totalBounsLists: "#J-bouns-lists-value",
        totalAmountDom: "#J-gameOrder-amount",
        totalRebateDom: "#J-rebate-amount",
        selectedClass: "game-order-current",
        rowTemplate: '<li data-param="action=reselect&id=<#=id#>&mid=<#=mid#>" id="gameorder-<#=id#>">	<span data-param="action=reselect&id=<#=id#>" class="name" title="<#=typeText#>"><#=typeText#></span>	<span data-param="action=reselect&id=<#=id#>" class="number" title="<#=lotterysText#>"><#=lotterysText#></span>	<span data-param="action=reselect&id=<#=id#>" class="unit"><#=moneyUnitText#></span>	<span data-param="action=reselect&id=<#=id#>" class="bet"><#=num#>注</span>	<span data-param="action=reselect&id=<#=id#>" class="multiple"><#=multiple#>倍</span>	<span data-param="action=reselect&id=<#=id#>" class="price"><span>&yen;</span><#=amountText#></span>	<span data-param="action=reselect&id=<#=id#>" class="prizeGroup" prizeGroup="<#=prizeGroup#>" >返<#=prizeGroupVal#>元</span>	<a data-param="action=del&id=<#=id#>" href="javascript:void(0);" title="删除" class="delete"></a> </li>',
        lotterysTextLength: 40,
        addOrderDom: "#J-add-order"
    }, l = e.Games, s = 1, u = (Object.prototype.toString,
    function(e) {
        for (var t, a = $.trim(e).split("&"), n = 0, r = a.length, i = {}; r > n; n++)
            t = a[n].split("="),
            t.length > 0 && (2 == t.length ? i[t[0]] = t[1] : i[t[0]] = "");
        return i
    }
    ), c = {
        init: function(e) {
            //getOrders();
            //setInterval(getOrders, 20 * 1000);
            if (!isMobile.any()) {
              (function pollOrders() {
                getOrders(function() {
                  setTimeout(pollOrders, 20000);
                })
              }());
            }

            var t = this
              , e = t.defConfig;
            t.cacheData = {},
            t.cacheData.detailPostParameter = {},
            t.orderData = [],
            l.setCurrentGameOrder(t),
            t.container = $(e.containerDom),
            t.containerEvent = $(e.containerEvent),
            t.totalLotterysNum = 0,
            t.totalLotterysNumDom = $(e.totalLotterysNumDom),
            t.totalAmount = 0,
            t.totalAmountDom = $(e.totalAmountDom),
            t.totalRebateDom = $(e.totalRebateDom),
            t.currentSelectId = 0,
            t.eventProxy(),
            t.addEvent("afterAdd", function() {
                l.getCurrentGameTrace().getRowTableType();
                if (typeof MobileTrace !== 'undefined') {
                  if (typeof MobileTrace.afterAdd == 'function') {
                    MobileTrace.afterAdd();
                  }
                }
                1 == l.getCurrentGameTrace().getIsTrace() && l.getCurrentGameTrace().autoDeleteTrace();
            }),
            t.addEvent("afterRemoveData", function() {
                l.getCurrentGameTrace().getRowTableType();
                1 == l.getCurrentGameTrace().getIsTrace() && l.getCurrentGameTrace().autoDeleteTrace()
            }),
            t.addEvent("afterResetData", function() {
                l.getCurrentGameTrace().getRowTableType();
                1 == l.getCurrentGameTrace().getIsTrace() && l.getCurrentGameTrace().autoDeleteTrace()
            }),
            l.getCurrentGameTypes().addEvent("endChange", function() {
                t.cancelSelectOrder()
            })
        },
        setTotalLotterysNum: function(e) {
            var t = this
              , a = t.totalLotterysNum;
            t.totalLotterysNum = Number(e),
            t.totalLotterysNumDom.html(e),
            a != t.totalLotterysNum && t.fireEvent("afterChangeLotterysNum", t.totalLotterysNum)
        },
        setTotalAmount: function(e) {
            var t = this
              , a = t.totalAmount;
            t.totalAmount = Number(e),
            t.totalAmountDom.html(t.formatMoney(e)),
            a != t.totalAmount && t.fireEvent("afterChangeAmout", t.totalAmount)
        },
        setTotalRebate: function(t) {
            var a = this
              , n = a.totalRebate
              , t = t || 0
              , r = Math.pow(10, 6);
            if (t = "" + parseFloat(t * r / r),
            t = t.split("."),
            t[1]) {
                var i = "" + t[1];
                i.length > 6 && (i = i.slice(0, 6)),
                str = e.util.formatMoney(t[0], 0) + "." + i
            } else
                str = e.util.formatMoney(t[0], 2);
            a.totalRebate = Number(str),
            a.totalRebateDom.html(str),
            n != a.totalRebate && a.fireEvent("afterChangeRebate", a.totalRebate)
        },
        addData: function(e) {
            var t = this;
            t.orderData.unshift(e)
        },
        getOrderById: function(e) {
            var t = this
              , e = Number(e)
              , a = t.orderData
              , n = 0
              , r = a.length;
            for (n = 0; r > n; n++)
                if (Number(a[n].id) == e)
                    return a[n]
        },
        removeData: function(e) {
            for (var t = this, e = Number(e), a = t.orderData, n = 0, r = a.length; r > n; n++)
                if (a[n].id == e) {
                    t.fireEvent("beforeRemoveData", a[n]),
                    t.orderData.splice(n, 1),
                    t.updateData(),
                    t.fireEvent("afterRemoveData");
                    break
                }
            $("#gameorder-" + e).remove(),
            t.fireEvent("afterRemoveData")
        },
        reSet: function() {
            var e = this;
            return e.container.empty(),
            e.orderData = [],
            e.updateData(),
            e.fireEvent("afterResetData"),
            e
        },
        updateData: function() {
            var e = this
              , t = e.getTotal();
            e.setTotalLotterysNum(t.count),
            e.setTotalAmount(t.amount),
            e.setTotalRebate(t.rebate)
        },
        getTotal: function() {
            for (var e = this, t = e.orderData, a = 0, n = t.length, r = 0, i = 0, o = 0; n > a; a++)
                r += t[a].num,
                i += t[a].num * t[a].onePrice * t[a].moneyUnit * t[a].multiple,
                o += Number(t[a].prizeGroupVal);
            return {
                count: r,
                amount: i,
                rebate: o,
                orders: t
            }
        },
        getOrderMaxMultiple: function() {
            for (var e, t, a, n, r, i, o = this, s = o.getTotal().orders, u = 0, c = s.length, m = [], d = ""; c > u; u++) {
                if (n = s[u].mid,
                r = s[u].multiple,
                e = l.getCurrentGame().getGameConfig().getInstance().getPrizeById(n),
                a = l.getCurrentGame().getGameConfig().getInstance().getMethodFullNameById(n),
                !e || !e.max_multiple)
                    return d = l.getCurrentGame().getGameConfig().getInstance().getMethodCnFullNameById(n).join(""),
                    void alert("[" + d + "]\n玩法未配置奖金组中奖金额，投注倍数未能得到限制\n请配置该玩法相关配置");
                t = e.max_multiple,
                i = Number(t) < 0 ? 99999999 : Number(t),
                m.push({
                    gameMethod: a,
                    maxnum: Math.floor(i / r)
                })
            }
            return m.sort(function(e, t) {
                return e.maxnum - t.maxnum
            }),
            m.length > 0 ? m[0] : {
                gameMethod: "",
                maxnum: 1e8
            }
        },
        add: function(e) {
            var t, a = this, n = "", r = -1, i = a.defConfig.rowTemplate, o = 0, u = l.getCurrentGameTrace().getIsTrace();
            if (a.fireEvent("beforeAdd", e),
            e.lotterys && e.lotterys.length > 0) {
                if (a.currentSelectId > 0)
                    e.id = a.currentSelectId;
                else {
                    if (r = a.checkData(e),
                    -1 != r)
                        return void l.getCurrentGameMessage().show({
                            type: "normal",
                            closeText: "确定",
                            closeFun: function() {
                                a.addMultiple(e.multiple, e.prizeGroupVal, r),
                                this.hide()
                            },
                            data: {
                                tplData: {
                                    msg: "您选择的号码在号码篮已存在，将直接进行倍数累加"
                                }
                            }
                        });
                    e.id = s++
                }
                if (e.amountText = a.formatMoney(e.num * e.moneyUnit * e.multiple * e.onePrice),
                u && ("yingli" == l.getCurrentGameTrace().getRowTableType() || "yinglilv" == l.getCurrentGameTrace().getRowTableType()))
                    for (o = 0,
                    t = a.orderData.length; t > o; o++)
                        if (a.orderData[o].type != e.type || a.orderData[o].moneyUnit != e.moneyUnit)
                            return void alert("盈利追号和盈利率追号不允许混投，\n 请确保玩法类型和元角模式一致");
                e.postParameter = l.getCurrentGame().getCurrentGameMethod().makePostParameter(e.original, e),
                e.oldMultiple = e.multiple,
                n = a.formatRow(i, a.rebuildData(e)),
                a.currentSelectId > 0 ? a.replaceOrder(e.id, e) : a.addData(e),
                a.currentSelectId > 0 ? ($(n).replaceAll($("#gameorder-" + a.currentSelectId)),
                a.cancelSelectOrder()) : $(n).prependTo(a.container),
                l.getCurrentGame().getCurrentGameMethod().reSet(),
                l.getCurrentGameStatistics().reSet(),
                a.updateData(),
                a.fireEvent("afterAdd", e)
            }
        },
        fastOrder: function(e) {
            var t = this;
            e = t.getFastOrder(e),
            l.getCurrentGameSubmit().submitData(e)
        },
        getFastOrder: function(e) {
            var t = this;
            return e.id = s++,
            (e.type=='wuxing.zhixuan.danshi' ? e.postParameter = l.getCurrentGame().getCurrentGameMethod().makePostParameterQuick(typeof _isCompressingPost == 'undefined' ? e.quick : e.quickdiff, e) : e.postParameter = l.getCurrentGame().getCurrentGameMethod().makePostParameter(e.original, e)),//e.postParameter = l.getCurrentGame().getCurrentGameMethod().makePostParameter(e.original, e),
            e = t.rebuildData(e),
            l.getCurrentGameSubmit().getFastSubmitData(e)
        },
        replaceOrder: function(e, t) {
            for (var a = this, n = a.orderData, r = 0, i = n.length; i > r; r++)
                if (n[r].id == e)
                    return void (n[r] = t)
        },
        render: function() {
            for (var e = this, t = e.getTotal().orders, a = 0, n = t.length, r = [], i = e.defConfig.rowTemplate; n > a; a++)
                r[a] = e.formatRow(i, e.rebuildData(t[a]));
            e.updateData(),
            e.container.html(r.join(""))
        },
        rebuildData: function(e) {
            var t = this
              , a = (t.defConfig,
            l.getCurrentGame().getGameConfig().getInstance())
              , n = a.getMethodCnFullNameById(e.mid);
            return typeText = a.getMethodCnFullNameById(e.mid).join(","),
            method = l.getCurrentGame().getCacheMethod(e.mid),
            n[0] == n[1] && n[1] == n[2] && (typeText = a.getMethodCnFullNameById(e.mid)[2]),
            e.typeText = typeText,
            e.lotterysText = method.formatViewBalls(e.original).substr(0, 200),
            e.viewBalls = e.lotterysText,
            e.moneyUnitText = e.moneyUnitText || l.getCurrentGameStatistics().getMoneyUnitDom().getText(),
            e
        },
        formatRow: function(e, t) {
            var a, n, r = t;
            for (a in r)
                r.hasOwnProperty(a) && (n = RegExp("<#=" + a + "#>", "g"),
                e = e.replace(n, r[a]));
            return e
        },
        originalData: function(e) {
            for (var t = this, a = [], n = 0; n < e.length; n++)
                for (var r = 0; r < e[n].length; r++)
                    a[r] = a[r] || [],
                    t.arrIndexOf(e[n][r], a[r]) || a[r].push(e[n][r]);
            return a
        },
        arrIndexOf: function(e, t) {
            for (var a, n = 0; n < t.length; n++)
                t[n] == e && (a = !0);
            return a || !1
        },
        checkData: function(e) {
            for (var t, a, n, r = this, i = [], o = 0, a = e.type, t = e.original, n = e.prizeGroup, l = e.digitChoose, o = 0; o < t.length; o++)
                i.push(t[o].join(""));
            return moneyUnit = e.moneyUnit,
            r.searchSameResult(a, i.join(), moneyUnit, n, l)
        },
        eventProxy: function() {
            var e = this
              , t = e.containerEvent;
            t.on("click", function(t) {
                var a, n = t.target.getAttribute("data-param");
                n && "" != $.trim(n) && (a = u(n),
                $.isFunction(e["exeEvent_" + a.action]) && e["exeEvent_" + a.action].call(e, a, t.target))
            })
        },
        exeEvent_del: function(e) {
            var t = this
              , a = Number(e.id);
            t.currentSelectId == a && (l.getCurrentGame().getCurrentGameMethod().reSet(),
            t.cancelSelectOrder()),
            t.removeData(a)
        },
        exeEvent_detailhide: function(e, t) {
            $(t).parents(".lottery-details-area").eq(0).hide()
        },
        exeEvent_detail: function(e, t) {
            var a = this
              , t = $(t)
              , n = Number(e.id)
              , r = n
              , i = t.next()
              , o = i.find(".multiple")
              , l = i.find(".list")
              , s = a.getTotal().orders
              , u = "";
            if (a.cacheData.currentDetailId && $("#gameorder-" + a.cacheData.currentDetailId + " .lottery-details-area").hide(),
            a.cacheData.detailPostParameter[r])
                u = a.cacheData.detailPostParameter[r],
                a.cacheData.currentDetailId = r;
            else {
                for (var c = s.length - 1; c >= 0; c--)
                    if (s[c].id == n) {
                        s = s[c];
                        break
                    }
                o.text("共 " + s.num + " 注"),
                u = s.postParameter,
                a.cacheData.currentDetailId = r,
                a.cacheData.detailPostParameter[r] = u,
                i.css({
                    left: i.position().left + i.width() + 5
                })
            }
            l.html(u),
            i.show()
        },
        exeEvent_reselect: function(e) {
            var t = this
              , a = Number(e.id);
            t.selectOrderById(a)
        },
        updateDomStatus: function() {
            var e = this
              , t = "button-game-edit"
              , a = e.currentSelectId
              , n = $(e.defConfig.addOrderDom);
            a > 0 ? n.addClass(t) : n.removeClass(t)
        },
        selectOrderById: function(e) {
            var t = this
              , a = t.getOrderById(e)
              , n = a.original
              , r = (a.type,
            t.defConfig.selectedClass)
              , i = $("#gameorder-" + e);
            -1 == t.getOrderById(e).type.indexOf("danshi") && (i.parent().children().removeClass(r),
            i.addClass(r),
            l.getCurrentGameTypes().changeMode(a.mid),
            l.getCurrentGameStatistics().getMultipleDom().setValue(a.multiple),
            l.getCurrentGameStatistics().triggerMoneyUnit(a.moneyUnit),
            l.getCurrentGameStatistics().setSliderValueByPrizeGroup(a.prizeGroup),
            l.getCurrentGame().getCurrentGameMethod().reSelect(n),
            t.currentSelectId = e,
            t.updateDomStatus())
        },
        cancelSelectOrder: function() {
            var e = this
              , t = e.currentSelectId;
            $(e.defConfig.addOrderDom);
            t > 0 && ($("#gameorder-" + t).removeClass(e.defConfig.selectedClass),
            e.currentSelectId = 0,
            e.updateDomStatus(),
            l.getCurrentGame().getCurrentGameMethod().reSet())
        },
        formatMoney: function(e) {
            var e = Number(e)
              , t = /(-?\d+)(\d{3})/;
            for (e = Number.prototype.toFixed ? e.toFixed(3) : Math.round(100 * e) / 100,
            e = "" + e; t.test(e); )
                e = e.replace(t, "$1,$2");
            return e
        },
        searchSameResult: function(e, t, a, n, r) {
            for (var i, o = this, l = 0, s = [], u = o.getTotal().orders; l < u.length; l++) {
                s = [],
                i = u[l],
                ordersLotteryText = i.original;
                for (var c = 0; c < ordersLotteryText.length; c++)
                    s.push(ordersLotteryText[c].join(""));
                if (i.type == e && t == s.join() && i.moneyUnit == a && i.prizeGroup == n && i.digitChoose == r)
                    return l
            }
            return -1
        },
        addMultiple: function(e, t, a) {
            var n = this
              , r = n.getTotal().orders
              , i = r[a]
              , o = (i.type,
            i.mid)
              , s = 999999;
            if (1 != l.getCurrentGameTrace().getIsTrace()) {
                if (s = l.getCurrentGame().getGameConfig().getInstance().getLimitByMethodId(o, i.moneyUnit),
                s = 0 > s ? i.multiple + e : s,
                i.multiple + e > s)
                    return void setTimeout(function() {
                        l.getCurrentGameMessage().show({
                            type: "normal",
                            closeText: "确定",
                            closeFun: function() {
                                r[a].multiple = s,
                                r[a].oldMultiple = r[a].multiple,
                                r[a].amount = r[a].num * r[a].moneyUnit * r[a].multiple * r[a].onePrice,
                                r[a].amountText = n.formatMoney(r[a].num * r[a].moneyUnit * r[a].multiple * r[a].onePrice),
                                r[a].prizeGroupVal = Number(r[a].prizeGroupVal),
                                n.render(),
                                l.getCurrentGame().getCurrentGameMethod().reSet(),
                                l.getCurrentGame().getCurrentGameMethod().ballsErrorTip(),
                                l.getCurrentGameStatistics().reSet(),
                                this.hide()
                            },
                            data: {
                                tplData: {
                                    msg: "该组号码倍数已经超过最大限制(" + s + "倍)，将调整为系统支持的最大倍数进行添加"
                                }
                            }
                        })
                    }, 100);
                r[a].multiple += e,
                r[a].oldMultiple = r[a].multiple,
                r[a].amount = r[a].num * r[a].moneyUnit * r[a].multiple * r[a].onePrice,
                r[a].amountText = n.formatMoney(r[a].num * r[a].moneyUnit * r[a].multiple * r[a].onePrice),
                r[a].prizeGroupVal = Number(r[a].prizeGroupVal) + Number(t),
                n.render(),
                l.getCurrentGame().getCurrentGameMethod().reSet(),
                l.getCurrentGame().getCurrentGameMethod().ballsErrorTip(),
                l.getCurrentGameStatistics().reSet(),
                n.cancelSelectOrder()
            }
        },
        editMultiples: function(e) {
            for (var t = this, a = t.getTotal().orders, n = 0, r = a.length; r > n; n++)
                a[n].multiple = e,
                a[n].amount = a[n].num * a[n].moneyUnit * a[n].multiple * a[n].onePrice,
                a[n].amountText = t.formatMoney(a[n].amount);
            t.render(),
            t.cancelSelectOrder()
        },
        editMultiple: function(e, t) {
            var a = this
              , n = a.getTotal().orders;
            n[t].multiple = e,
            n[t].amount = n[t].num * n[t].moneyUnit * n[t].multiple * n[t].onePrice,
            n[t].amountText = a.formatMoney(n[i].amount),
            a.render(),
            a.cancelSelectOrder()
        },
        restoreMultiples: function() {
            for (var e = this, t = e.getTotal().orders, a = 0, n = t.length; n > a; a++)
                t[a].multiple = t[a].oldMultiple,
                t[a].amount = t[a].num * t[a].moneyUnit * t[a].multiple * t[a].onePrice,
                t[a].amountText = e.formatMoney(t[a].amount);
            e.render(),
            e.cancelSelectOrder()
        }
    }, m = e.Class(c, a);
    m.defConfig = o,
    m.getInstance = function(e) {
        return r || (r = new m(e))
    }
    ,
    e[t] = m
}(dsgame, "GameOrder", dsgame.Event),
function(e, t, a, n) {
    var r, o = {
        mainPanel: "#J-trace-panel",
        advancedTypeHas: ["fanbei", "yingli", "yinglilv"],
        defaultType: "tongbei",
        dataRowHeader: '<tr><th style="width:125px;" class="text-center">序号</th><th><input data-action="checkedAll" type="checkbox"  checked="checked"/> 追号期次</th><th>倍数</th><th>金额</th><th>预计开奖时间</th></tr>',
        dataRowTemplate: '<tr><td class="text-center"><#=No#></td><td><input data-action="checkedRow" class="trace-row-checked" type="checkbox" checked="checked"> <span class="trace-row-number"><#=traceNumber#></span></td><td><input class="trace-row-multiple input" value="<#=multiple#>" type="text" style="width:30px;text-align:center;"> 倍</td><td>&yen; <span class="trace-row-money"><#=money#></span> 元</td><td><span class="trace-row-time"><#=publishTime#></span></td></tr>',
        dataRowYingliHeader: '<tr><th class="text-center">序号</th><th><input data-action="checkedAll" type="checkbox" checked="checked" /> 追号期次</th><th>倍数</th><th>金额</th><th>奖金</th><th>预期盈利金额</th><th>预期盈利率</th></tr>',
        dataRowLirunlvTemplate: '<tr><td class="text-center"><#=No#></td><td><input data-action="checkedRow" class="trace-row-checked" type="checkbox" checked="checked"> <span class="trace-row-number"><#=traceNumber#></span></td><td><input class="trace-row-multiple" value="<#=multiple#>" type="text" style="width:30px;text-align:center;"> 倍</td><td>&yen; <span class="trace-row-money"><#=money#></span> 元</td><td>&yen; <span class="trace-row-userGroupMoney"><#=userGroupMoney#></span> 元</td><td>&yen; <span class="trace-row-winTotalAmount"><#=winTotalAmout#></span> 元</td><td><span class="trace-row-yinglilv"><#=yinglilv#></span>%</td></tr>'
    }, l = e.Games, s = function(e, t, a) {
        var e = "" + e
          , a = a || 1e9;
        return e = e.replace(/[^\d]/g, ""),
        e = "" == e ? t : Number(e) > a ? a : e,
        Number(e)
    }
    , u = function(e) {
        return e = e.replace(/[^\d]/g, ""),
        Number(e)
    }
    , c = {
        init: function(e) {
            var t = this;
            t.opts = e,
            l.setCurrentGameTrace(t),
            t.panel = $(e.mainPanel),
            t.panelIsVisible = !1,
            t.TraceTab = null ,
            t.TraceAdvancedTab = null ,
            t.orderData = null ,
            t.traceType = e.defaultType,
            t.times = 0,
            t.traceStartNumber = "",
            t.currentTraceNumber = "",
            t.isTrace = 0,
            t.savedTraceData = null ,
            t.advancedType = e.advancedTypeHas[0],
            t.typeTypeType = "a",
            t.initEvent(),
            t.setCurrentTraceNumber(),
            l.getCurrentGame().addEvent("changeDynamicConfig", function() {
                t.buildStartNumberSelectDom(),
                t.updateTableNumber()
            })
        },
        getIsTrace: function() {
            return this.isTrace
        },
        setIsTrace: function(e) {
            this.isTrace = Number(e),
            1 > e ? $("#J-button-trace-confirm").addClass("disable") : $("#J-button-trace-confirm").removeClass("disable")
        },
        setAdvancedType: function(e) {
            "[object Number]" == Object.prototype.toString.call(e) ? this.advancedType = this.getAdvancedTypeBuIndex(e) : this.advancedType = e
        },
        getAdvancedType: function() {
            return this.advancedType
        },
        getAdvancedTypeBuIndex: function(e) {
            var t = this
              , a = t.defConfig.advancedTypeHas
              , n = a.length;
            return n > e ? a[e] : ""
        },
        initEvent: function() {
            var t = this;
            t.TraceTab = new e.Tab({
                par: "#J-trace-panel",
                triggers: ".trace-radio a",
                panels: ".chase-tab-content",
                currPanelClass: "chase-tab-content-current",
                eventType: "click"
            }),
            t.TraceTab.addEvent("afterSwitch", function(e, a) {
                var n = ["tongbei", "lirunlv", "fanbei"];
                a < n.length && t.setTraceType(n[a]),
                t.updateStatistics()
            }),
            t.TraceAdvancedTab = new e.Tab({
                par: "#J-trace-advanced-type-panel",
                triggers: ".tab-title li",
                panels: ".tab-content li",
                eventType: "click"
            }),
            t.TraceAdvancedTab.addEvent("afterSwitch", function(e, a) {
                var n = this.getPanel(a).find(".trace-advanced-type-switch");
                t.setAdvancedType(a),
                n.each(function() {
                    return this.checked ? (t.setTypeTypeType($(this).parent().attr("data-type")),
                    !1) : void 0
                })
            });
            var a = new e.Hover({
                triggers: "#J-trace-iswintimesstop-hover",
                panels: "#chase-stop-tip-1",
                currPanelClass: "chase-stop-tip-current",
                hoverDelayOut: 300
            });
            $("#chase-stop-tip-1").mouseleave(function() {
                a.hide()
            }),
            $("#J-chase-stop-switch-1").click(function(e) {
                e.preventDefault(),
                $("#J-trace-iswintimesstop-panel").hide(),
                $("#J-trace-iswinstop-panel").show(),
                $("#J-trace-iswintimesstop").get(0).checked = !1,
                $("#J-trace-iswinstop").get(0).checked = !0,
                $("#J-trace-iswinstop-money").removeAttr("disabled"),
                $("#J-trace-iswintimesstop-times").attr("disabled", "disabled")
            }),
            $("#J-chase-stop-switch-2").click(function(e) {
                e.preventDefault(),
                $("#J-trace-iswinstop-panel").hide(),
                $("#J-trace-iswintimesstop-panel").show(),
                $("#J-trace-iswintimesstop").get(0).checked = !0,
                $("#J-trace-iswinstop").get(0).checked = !1,
                $("#J-trace-iswinstop-money").attr("disabled", "disabled"),
                $("#J-trace-iswintimesstop-times").removeAttr("disabled")
            }),
            $("#J-trace-iswinstop-money").keyup(function() {
                this.value = s(this.value, 1, 999999)
            }),
            $("#J-trace-iswintimesstop-times").keyup(function() {
                this.value = s(this.value, 1, 999999)
            }),
            $("#J-trace-iswintimesstop").click(function() {
                var e = $("#J-trace-iswintimesstop-times");
                this.checked ? e.attr("disabled", !1).focus() : e.attr("disabled", "disabled")
            }),
            $("#J-trace-iswinstop").click(function() {
                var e = $("#J-trace-iswinstop-money");
                this.checked ? e.attr("disabled", !1).focus() : e.attr("disabled", "disabled")
            }),
            $("#J-trace-normal-times").keyup(function() {
                var e, a = l.getCurrentGame().getGameConfig().getInstance().getTraceMaxTimes(), n = "" + this.value, r = $("#J-function-select-tab").find(".function-select-title li"), i = "current";
                n = n.replace(/[^\d]/g, ""),
                n = "" == n ? 1 : Number(n) > a ? a : n,
                this.value = n,
                e = Number(n),
                e > 0 && 20 >= e && e % 5 == 0 && r.removeClass(i).eq(e / 5 - 1).addClass(i),
                t.buildDetail()
            });
            var n = new e.Tab({
                par: "#J-function-select-tab",
                triggers: ".function-select-title li",
                panels: ".function-select-panel li",
                eventType: "click",
                index: 1
            });
            n.addEvent("afterSwitch", function(e, a) {
                var n = this
                  , r = parseInt(n.getTrigger(a).text());
                $("#J-trace-normal-times").val(r),
                t.buildDetail()
            }),
            t.tongbeiSelectMultiple = new e.Select({
                realDom: "#J-trace-tongbei-multiple-select",
                cls: "w-1",
                isInput: !0,
                expands: {
                    inputEvent: function() {
                        var e = this;
                        e.getInput().keyup(function(t) {
                            var a = this.value
                              , n = 99999999;
                            this.value = this.value.replace(/[^\d]/g, ""),
                            a = Number(this.value),
                            a > n && (this.value = n),
                            e.setValue(this.value)
                        })
                    }
                }
            }),
            t.tongbeiSelectMultiple.addEvent("change", function(e, t, a) {
                $("#J-trace-tongbei-multiple").val(t)
            }),
            $(".J-trace-tongbei-times-filter > a").on("click", function() {
                var e = $(this)
                  , t = e.data("value");
                return e.hasClass("current") ? !1 : (e.addClass("current").siblings(".current").removeClass("current"),
                $("#J-trace-tongbei-times").val(t),
                !1)
            }).eq(0).trigger("click"),
            t.panel.find(".chase-table").keyup(function(e) {
                var a = $(e.target)
                  , n = t.getOrderData().amount;
                if (a.hasClass("trace-row-multiple")) {
                    var r = Number(u(a.val()))
                      , i = t.getRowTableType()
                      , o = Number(l.getCurrentGameOrder().getOrderMaxMultiple().maxnum);
                    0 == r ? (a.val(a.val().replace(/^0/g, "")),
                    t.updateStatistics()) : r > o ? a.val(o) : (a.parent().parent().find(".trace-row-money").html(t.formatMoney(n * r)),
                    a.val(r),
                    ("trace_advanced_yingli_a" == i || "trace_advanced_yingli_b" == i || "trace_advanced_yinglilv_a" == i || "trace_advanced_yinglilv_b" == i) && t.rebuildYinglilvRows(),
                    t.updateStatistics())
                }
            }).on("blur", ".trace-row-multiple", function(e) {
                var a = $(e.target);
                a.val(s(a.val(), 1, l.getCurrentGameOrder().getOrderMaxMultiple().maxnum)),
                t.updateStatistics()
            }),
            setTimeout(function() {
                t.buildStartNumberSelectDom()
            }, 10),
            $("#J-trace-advanced-times").keyup(function() {
                this.value = s(this.value, 10, Number($("#J-trace-number-max").text()))
            }),
            $("#J-trace-advance-multiple").keyup(function(e) {
                var t = $(e.target)
                  , a = Number(u(t.val()))
                  , n = Number(l.getCurrentGameOrder().getOrderMaxMultiple().maxnum);
                0 == a ? t.val(t.val().replace(/^0/g, "")) : a > n ? t.val(n) : t.val(a)
            }).blur(function() {
                this.value = s(this.value, 1, l.getCurrentGameOrder().getOrderMaxMultiple().maxnum)
            }),
            t.panel.find(".trace-advanced-type-switch").click(function() {
                var e, a = $(this), n = a.parent(), r = n.parent().children();
                r.each(function(i) {
                    e = r.get(i),
                    n.get(0) != e ? $(e).find('input[type="text"]').attr("disabled", "disabled") : ($(e).find('input[type="text"]').attr("disabled", !1).eq(0).focus(),
                    t.setTypeTypeType(n.attr("data-type"))),
                    a.parent().hasClass("trace-input-multiple") ? this.value = s(this.value, 1, l.getCurrentGameOrder().getOrderMaxMultiple().maxnum) : this.value = s(this.value, 1, 99999999)
                })
            }),
            $("#J-trace-advanced-type-panel").on("keyup", "input[type=text]", function(e) {
                var t = $(e.target);
                t.hasClass("trace-input-multiple") ? this.value = s(this.value, 1, l.getCurrentGameOrder().getOrderMaxMultiple().maxnum) : this.value = s(this.value, 1, 99999999)
            }),
            $("#J-trace-panel .trace-button-detail").click(function() {
                var a = l.getCurrentGame().getGameConfig().getInstance();
                var ty = t;
                jQuery.ajax({
                  url: a.getUpdateUrl()+'?t='+new Date().getTime(),
                  dataType: "JSON",
                  success: function(b) {
                      b.data.optionalPrizes.reverse();
                      a.updateConfig(b.data);
                      ty.buildStartNumberSelectDom();
                      ty.updateTableNumber();
                      ty.confirmSetting();
                      ty.applyTraceData();
                      //a.data.optionalPrizes.reverse();
                      //1 == Number(a.isSuccess) && (t.setDynamicConfig(a.data),
                      //$.isFunction(e) && e.call(t, a.data))
                  }
                })
                //t.confirmSetting(),
                //t.applyTraceData()
            }),
            t.panel.find(".chase-table").click(function(e) {
                var a, n = $(e.target), r = $.trim(n.attr("data-action")), i = !0, o = t.getTraceType();
                if (r && "" != r)
                    switch (r) {
                    case "checkedAll":
                        i = n.get(0).checked ? !0 : !1,
                        a = t.getRowTableType(o),
                        t.getRowTable(o).find(".trace-row-checked").each(function() {
                            this.checked = i
                        }),
                        "lirunlv" == a && t.rebuildYinglilvRows(),
                        t.updateStatistics();
                        break;
                    case "checkedRow":
                        n.size() > 0 && (a = t.getRowTableType(),
                        ("trace_advanced_yingli_a" == a || "trace_advanced_yingli_b" == a || "trace_advanced_yinglilv_a" == a || "trace_advanced_yinglilv_b" == a) && t.rebuildYinglilvRows(),
                        t.updateStatistics())
                    }
            })
        },
        buildStartNumberSelectDom: function() {
            var t, a = this, n = l.getCurrentGame().getGameConfig().getInstance(), r = n.getGameNumbers(), i = r ? r.length:0, o = 0, s = [], u = n.getCurrentGameNumber(), c = "(当前期)", m = c, d = "";
            for (a.traceStartNumberSelect && (t = a.traceStartNumberSelect.getValue()); i > o; o++)
                m = u == r[o].number ? c : "",
                d = a.traceStartNumberSelect && r[o].number == t ? ' selected="selected" ' : "",
                s.push('<option value="' + r[o].number + '" ' + d + " >" + r[o].number + m + "</option>");
            $("#J-traceStartNumber").html(s.join("")),
            $("#J-trace-number-max").text(i),
            a.traceStartNumberSelect && a.traceStartNumberSelect.dom.remove(),
            a.traceStartNumberSelect = new e.Select({
                realDom: "#J-traceStartNumber",
                cls: "chase-trace-startNumber-select"
            }),
            a.traceStartNumberSelect.addEvent("change", function(e, t, n) {
                a.setTraceStartNumber(t)
            })
        },
        updateTableNumber: function() {
            var e, t, a, n, r, i, o, s, u = this, c = l.getCurrentGame().getGameConfig().getInstance().getGameNumbers();
			if(!c){
				return;
			}
			var m = c.length, d = l.getCurrentGame().getGameConfig().getInstance().getCurrentGameNumber(), g = "", p = "", f = '<span class="icon-period-current"></span>';
            m > 0 && (e = u.getNormalRowTable().find("tr"),
            t = u.getAdvancedRowTable().find("tr"),
            o = u.getStartNumberIndexByNumber(a),
            e.each(function(e) {
                return 0 == e ? !0 : (n = $(this),
                r = n.find(".trace-row-number"),
                i = n.find(".trace-row-time"),
                multipleDom = n.find(".trace-row-multiple"),
                a = r.text().replace(/[^\d]/g, ""),
                s = n.find(".text-center"),
                n.find(".trace-row-multiple").removeAttr("disabled"),
                void (m > o + 1 && (g = c[o + 1].number == d ? f : "",
                r.html(c[o + 1].number + g),
                multipleDom.text("1"),
                i.text(c[o + 1].time),
                s.html("").html(e),
                p = r.text().substr(0, 8),
                o++)))
            }),
            o = u.getStartNumberIndexByNumber(a),
            t.each(function(e) {
                return 0 == e ? !0 : (n = $(this),
                r = n.find(".trace-row-number"),
                i = n.find(".trace-row-time"),
                multipleDom = n.find(".trace-row-multiple"),
                a = r.text().replace(/[^\d]/g, ""),
                s = n.find(".text-center"),
                n.find(".trace-row-multiple").removeAttr("disabled"),
                void (m > o + 1 && (g = c[o + 1].number == d ? f : "",
                r.html(c[o + 1].number + g),
                multipleDom.text("1"),
                i.text(c[o + 1].time),
                s.html("").html(e),
                p = r.text().substr(0, 8),
                o++)))
            }))
        },
        rebuildYinglilvRows: function() {
            var e = this
              , t = e.getRowTable().find("tr")
              , a = e.getOrderData()
              , n = e.getWinMoney()
              , r = null
              , i = null
              , o = null
              , l = 1
              , s = null
              , u = 0
              , c = null
              , m = null
              , d = null
              , g = -1;
            costAmount = 0,
            t.each(function(t) {
                t > 0 && (r = $(this),
                i = r.find(".trace-row-checked"),
                i.size() > 0 && i.get(0).checked && (o = r.find(".trace-row-multiple"),
                l = Number(o.val()),
                s = r.find(".trace-row-money"),
                u = Number(s.text().replace(",", "")),
                c = r.find(".trace-row-userGroupMoney"),
                m = r.find(".trace-row-winTotalAmount"),
                d = r.find(".trace-row-yinglilv"),
                costAmount += a.amount * l,
                s.text(e.formatMoney(a.amount * l)),
                c.text(e.formatMoney(n * l)),
                m.text(e.formatMoney(n * l - costAmount)),
                g = (n * l - costAmount) / costAmount * 100,
                d.text(Number(g).toFixed(2))))
            })
        },
        setTypeTypeType: function(e) {
            this.typeTypeType = e
        },
        getTypeTypeType: function() {
            return this.typeTypeType
        },
        getIsWinStop: function() {
            var e = $("#J-trace-iswintimesstop")
              , t = $("#J-trace-iswinstop");
            return e.get(0).checked ? 1 : t.get(0).checked ? 2 : 0
        },
        getTraceWinStopValue: function() {
            var e = this
              , t = e.getIsWinStop();
            return 1 == t ? Number($("#J-trace-iswintimesstop-times").val()) : 2 == t ? Number($("#J-trace-iswinstop-money").val()) : -1
        },
        updateStatistics: function() {
            var e = this
              , t = e.getResultData();
            $("#J-trace-statistics-times").html(t.times),
            $("#J-trace-statistics-lotterys-num").html(t.lotterysNum),
            $("#J-trace-statistics-amount").html(e.formatMoney(t.amount))
        },
        getSavedTraceData: function() {
            return this.savedTraceData
        },
        setSavedTraceData: function(e) {
            this.savedTraceData = e
        },
        getResultData: function() {
            var e, t, a, n, r, i = this, o = i.getOrderData(), s = i.getRowTable(i.getTraceType()).find("tr"), u = 0, c = 0, m = 0, d = [], g = {
                times: 0,
                lotterysNum: 0,
                amount: 0,
                orderData: o,
                traceData: [],
                traceType: i.getTraceType()
            }, p = "", f = l.getCurrentGame().getGameConfig().getInstance().getGameNumbers();
            return s.each(function(l) {
                e = jQuery(this),
                t = e.find(".trace-row-checked"),
                tracenumber = e.find(".trace-row-number"),
                traceNo = e.find(".text-center"),
                0 != l && traceNo.html("").html(l),
                t.size() > 0 && t.get(0).checked ? (a = t.parent(),
                r = i.getStartNumberIndexByNumber(a.find(".trace-row-number").text()),
                r = -1 == r ? 0 : r,
                n = f[r].issueCode,
                e.find(".trace-row-multiple").removeAttr("disabled"),
                "0" == e.find(".trace-row-multiple").val() && (e.find(".trace-row-multiple").val("1"),
                e.find(".trace-row-money").text(i.formatMoney(1 * o.amount))),
                d.push({
                    traceNumber: a.find(".trace-row-number").text(),
                    issueCode: n,
                    multiple: Number(a.parent().find(".trace-row-multiple").val())
                }),
                u++,
                m += Number(e.find(".trace-row-money").text().replace(/,/g, ""))) : (e.find(".trace-row-money").text("0"),
                e.find(".trace-row-multiple").val("0"),
                e.find(".trace-row-multiple").attr("disabled", "disabled").css("border", "1px solid #CECECE")),
                p = tracenumber.text().substr(0, 8)
            }),
            o && (c = u * o.count,
            g = {
                times: u,
                lotterysNum: c,
                amount: m,
                orderData: o,
                traceData: d,
                traceType: i.getTraceType()
            }),
            g
        },
        updateOrder: function(e) {
            var t = this
              , a = l.getCurrentGameOrder().getTotal()
              , n = t.getRowTableType()
              , r = l.getCurrentGameOrder().getOrderMaxMultiple()
              , i = r.maxnum
              , o = Number(t.normalSelectMultiple.getValue())
              , s = Number($("#J-trace-advance-multiple").val());
            t.setOrderData(a),
            o > i && t.normalSelectMultiple.setValue(i),
            s > i && $("#J-trace-advance-multiple").val(i),
            e || "trace_advanced_fanbei_a" != n && "trace_advanced_fanbei_b" != n && "trace_advanced_yingli_a" != n && "trace_advanced_yingli_b" != n && "trace_advanced_yinglilv_a" != n && "trace_advanced_yinglilv_b" != n || l.getCurrentGameMessage().show({
                type: "normal",
                closeFun: function() {
                    this.hide()
                },
                data: {
                    tplData: {
                        msg: "您的方案已被修改，如果需要根据最新方案进行追号，请点击生成追号计划按钮"
                    }
                }
            }),
            t.getAdvancedRowTable().html(""),
            t.updateDetail(a.amount),
            t.updateStatistics()
        },
        updateDetail: function(e) {
            var t, a = this, n = a.getTable().find("tr"), r = null , i = a.getRowTableType();
            "trace_advanced_yingli_a" == i || "trace_advanced_yingli_b" == i || "trace_advanced_yinglilv_a" == i || "trace_advanced_yinglilv_b" == i ? a.rebuildYinglilvRows() : (t = a.getAdvancedRowTable().attr("data-type"),
            ("trace_advanced_fanbei_a" == t || "trace_advanced_fanbei_b" == t) && (n = a.getAdvancedTable().find("tr"),
            n.each(function() {
                r = $(this),
                rowMoney = r.find(".trace-row-money"),
                rowMultiple = Number(r.find(".trace-row-multiple").val()),
                rowMoney.text(a.formatMoney(rowMultiple * e))
            }))),
            n = a.getNormalTable().find("tr"),
            n.each(function() {
                r = $(this),
                rowMoney = r.find(".trace-row-money"),
                rowMultiple = Number(r.find(".trace-row-multiple").val()),
                rowMoney.text(a.formatMoney(rowMultiple * e))
            })
        },
        getWinMoney: function() {
            for (var e = this, t = e.getOrderData().orders, a = 0, n = t.length, r = 0; n > a; a++)
                r += e.getPlayGroupMoneyByGameMethodName(t[a].mid) * t[a].moneyUnit;
            return r
        },
        confirmSetting: function() {
            var e = this;
            e.setOrderData(l.getCurrentGameOrder().getTotal()),
            e.buildDetail()
        },
        isSameGameMethod: function() {
            var e = this
              , t = e.getOrderData().orders
              , a = ""
              , n = -1;
            for (i = 0,
            len = t.length; i < len; i++) {
                if ("" != a) {
                    if (a != t[i].type)
                        return !1
                } else
                    a = t[i].type;
                if (-1 != n) {
                    if (n != t[i].moneyUnit)
                        return !1
                } else
                    n = t[i].moneyUnit
            }
            return !0
        },
        getSameGameMethodName: function() {
            var e = this
              , t = e.getOrderData().orders;
            return t.length > 0 ? t[0].type : void 0
        },
        getSameGameMoneyUnti: function() {
            var e = this
              , t = e.getOrderData().orders;
            return t.length > 0 ? t[0].moneyUnit : void 0
        },
        setOrderData: function(e) {
            this.orderData = e
        },
        getOrderData: function() {
            return null  == this.orderData ? {
                count: 0,
                amount: 0,
                orders: []
            } : this.orderData
        },
        getStartNumberIndexByNumber: function(e) {
            var t = l.getCurrentGame().getGameConfig().getInstance().getGameNumbers();
            for (a = t.length, n = 0; a > n; n++)
                if (t[n].number == e)
                    return n;
            return -1
        },
        getStartNumberByIndex: function(e) {
            var t = l.getCurrentGame().getGameConfig().getInstance().getGameNumbers();
            return t.length > e ? t[e] : {}
        },
        buildDetail: function() {
            var e = this
              , t = e.getTraceType()
              , a = l.getCurrentGameMessage();
            return e.setOrderData(l.getCurrentGameOrder().getTotal()),
            orderAmount = e.getOrderData().amount,
            orderAmount <= 0 ? void a.show({
                type: "mustChoose",
                msg: "请至少选择一注投注号码！",
                data: {
                    tplData: {
                        msg: "请至少选择一注投注号码！"
                    }
                }
            }) : ($.isFunction(e["trace_" + t]) && e["trace_" + t].call(e),
            void e.updateStatistics())
        },
        trace_lirunlv: function() {
            var e, t = this, a = t.getTraceType(), n = t.defConfig.dataRowTemplate, r = [], i = t.getTimes(a), o = i, s = l.getCurrentGameOrder().getOrderMaxMultiple(), u = t.getMultiple(), c = [], m = Number($("#J-trace-lirunlv-num").val()) / 100, d = t.getSameGameMoneyUnti(), g = 0, p = 0, n = t.defConfig.dataRowLirunlvTemplate, f = t.getOrderData().orders, h = l.getCurrentGame().getGameConfig().getInstance().getCurrentGameNumber(), v = '<span class="icon-period-current"></span>', b = "", y = t.traceStartNumberSelect.getValue(), C = 0, G = !1, T = l.getCurrentGame().getGameConfig().getInstance().getGameNumbers();
            if (!t.isSameGameMethod())
                return void l.getCurrentGameMessage().show({
                    type: "mustChoose",
                    msg: "",
                    data: {
                        tplData: {
                            msg: "利润率追号不支持混投<br />请确保您的投注都为同一玩法类型<br />且元角模式一致。"
                        }
                    }
                });
            if ($.each(f, function() {
                var e = l.getCurrentGame().getGameConfig().getInstance().getMethodById(this.mid)
                  , t = l.getCurrentGame().getGameConfig().getInstance().getPrizeById(this.mid);
                g += Number(t.prize),
                p += this.num * Number(e.price)
            }),
            g *= d,
            p *= d,
            r.push(t.defConfig.dataRowYingliHeader),
            e = t.getStartNumberIndexByNumber(y),
            o = i,
            c = t.getMultipleByYinglilv(m, g, p, o, u, s.maxnum),
            c.length < 1)
                return void alert("您设置的参数无法达到盈利，请重新设置");
            for ($.each(c, function() {
                return this.oldMultiple > s.maxnum ? (G = !0,
                alert("生成方案中的倍数超过了系统最大允许设置的倍数，将自动调整为系统最大可设置倍数"),
                !1) : void 0
            }),
            C = 0; C < c.length; C++)
                b = T[C + e].number,
                b == h && (b += v),
                rowData = {
                    No: C + 1,
                    traceNumber: b,
                    multiple: c[C].multiple,
                    money: t.formatMoney(p * c[C].multiple),
                    userGroupMoney: t.formatMoney(g * c[C].multiple),
                    winTotalAmout: t.formatMoney(c[C].winAmountAll),
                    yinglilv: Number(c[C].winAmountAll / c[C].amountAll * 100).toFixed(2)
                },
                r.push(t.formatRow(n, rowData));
            t.getRowTable(a).html(r.join("")),
            t.getRowTable(a).attr("data-type", "lirunlv")
        },
        trace_tongbei: function() {
            var e, t, a, n = this, r = n.getTraceType(), i = n.defConfig, o = i.dataRowTemplate, s = [], r = n.getTraceType(), u = n.getTimes(r), c = Number($("#J-trace-tongbei-multiple").val()), m = (l.getCurrentGameOrder().getOrderMaxMultiple().maxnum,
            0), d = 0, g = l.getCurrentGame().getGameConfig().getInstance().getCurrentGameNumber(), p = '<span class="icon-period-current"></span>', f = "", h = n.traceStartNumberSelect.getValue();
            l.getCurrentGame().getGameConfig().getInstance().getGameNumbers().length;
            for (n.setOrderData(l.getCurrentGameOrder().getTotal()),
            m = n.getOrderData().amount,
            s.push(i.dataRowHeader),
            e = n.getStartNumberIndexByNumber(h),
            d = e,
            u += d; u > d; d++)
                t = n.getStartNumberByIndex(d),
                f = t.number,
                f == g && (f += p),
                t.number && (a = {
                    No: d + 1,
                    traceNumber: f,
                    multiple: c,
                    money: n.formatMoney(m * c),
                    publishTime: t.time
                },
                s.push(n.formatRow(o, a)));
            n.getRowTable(r).html(s.join("")),
            n.getRowTable(r).attr("data-type", "tongbei")
        },
        trace_fanbei: function() {
            var e, t = this, a = t.getTraceType(), n = t.defConfig.dataRowTemplate, r = [], i = t.getTimes(a), o = t.getOrderData().orders, s = t.getSameGameMoneyUnti(), u = l.getCurrentGameOrder().getOrderMaxMultiple(), c = u.maxnum, m = Number($("#J-trace-fanbei-jump").val()), d = m, g = Number($("#J-trace-fanbei-multiple").val()), p = g, f = Number($("#J-trace-fanbei-num").val()), h = 0, v = 0, b = l.getCurrentGame().getGameConfig().getInstance().getCurrentGameNumber(), y = '<span class="icon-period-current"></span>', C = "", G = t.traceStartNumberSelect.getValue(), T = l.getCurrentGame().getGameConfig().getInstance().getGameNumbers(), D = 1;
            for ($.each(o, function() {
                var e = l.getCurrentGame().getGameConfig().getInstance().getMethodById(this.mid);
                h += this.num * e.price
            }),
            h *= s,
            e = t.getStartNumberIndexByNumber(G),
            r.push(t.defConfig.dataRowHeader),
            v += e,
            i += e; i > v; v++)
                1 > d && (d = m,
                p *= f),
                p > c/s && (p = c/s),
                C = T[v].number,
                C == b && (C += y),
                rowData = {
                    No: D,
                    traceNumber: C,
                    multiple: p,
                    money: t.formatMoney(h * p),
                    publishTime: T[v].time
                },
                d -= 1,
                D++,
                r.push(t.formatRow(n, rowData));
            t.getRowTable(a).html(r.join("")),
            t.getRowTable(a).attr("data-type", "fanbei")
        },
        trace_normal: function() {
            var e, t, a, n = this, r = n.defConfig, i = r.dataRowTemplate, o = [], s = (n.getTraceType(),
            n.getTimes()), u = n.getMultiple(), c = (l.getCurrentGameOrder().getOrderMaxMultiple().maxnum,
            0), m = 0, d = l.getCurrentGame().getGameConfig().getInstance().getCurrentGameNumber(), g = '<span class="icon-period-current"></span>', p = "", f = n.traceStartNumberSelect.getValue();
            l.getCurrentGame().getGameConfig().getInstance().getGameNumbers().length;
            for (n.setOrderData(l.getCurrentGameOrder().getTotal()),
            c = n.getOrderData().amount,
            o.push(r.dataRowHeader),
            e = n.getStartNumberIndexByNumber(f),
            m = e,
            s += m; s > m; m++)
                t = n.getStartNumberByIndex(m),
                p = t.number,
                p == d && (p += g),
                t.number && (a = {
                    No: m + 1,
                    traceNumber: p,
                    multiple: u,
                    money: n.formatMoney(c * u),
                    publishTime: t.time
                },
                o.push(n.formatRow(i, a)));
            n.getRowTable().html(o.join("")),
            n.getRowTable().attr("data-type", "trace_normal")
        },
        trace_advanced: function() {
            var e = this
              , t = e.getTraceType()
              , a = e.getAdvancedType()
              , n = e.getTypeTypeType()
              , r = "trace_" + t + "_" + a + "_" + n;
            return e.isSameGameMethod() || "yingli" != a && "yinglilv" != a ? ($.isFunction(e[r]) && e[r](),
            void e.getRowTable().attr("data-type", r)) : void l.getCurrentGameMessage().show({
                type: "mustChoose",
                msg: "",
                data: {
                    tplData: {
                        msg: "盈利金额追号不支持混投<br />请确保您的投注都为同一玩法类型<br />且元角模式一致。"
                    }
                }
            })
        },
        trace_advanced_fanbei_a: function() {
            var e, t = this, a = t.defConfig.dataRowTemplate, n = [], r = t.getTimes(), i = t.getOrderData().orders, o = t.getSameGameMoneyUnti(), s = l.getCurrentGameOrder().getOrderMaxMultiple(), u = s.maxnum, c = Number($("#J-trace-advanced-fanbei-a-jiange").val()), m = c, d = (t.getMultiple(),
            1), g = Number($("#J-trace-advanced-fanbei-a-multiple").val()), p = 0, f = 0, h = l.getCurrentGame().getGameConfig().getInstance().getCurrentGameNumber(), v = '<span class="icon-period-current"></span>', b = "", y = t.traceStartNumberSelect.getValue(), C = l.getCurrentGame().getGameConfig().getInstance().getGameNumbers(), G = 1;
            for ($.each(i, function() {
                var e = l.getCurrentGame().getGameConfig().getInstance().getMethodById(this.mid);
                p += this.num * e.price
            }),
            p *= o,
            e = t.getStartNumberIndexByNumber(y),
            n.push(t.defConfig.dataRowHeader),
            f += e,
            r += e; r > f; f++)
                1 > m && (m = c,
                d *= g),
                d > u && (d = u),
                b = C[f].number,
                b == h && (b += v),
                rowData = {
                    No: G,
                    traceNumber: b,
                    multiple: d,
                    money: t.formatMoney(p * d),
                    publishTime: C[f].time
                },
                m -= 1,
                G++,
                n.push(t.formatRow(a, rowData));
            t.getRowTable().html(n.join(""))
        },
        trace_advanced_fanbei_b: function() {
            var e, t, a, n = this, r = n.defConfig.dataRowTemplate, i = [], o = n.getTimes(), s = n.getOrderData().orders, u = n.getSameGameMoneyUnti(), c = l.getCurrentGameOrder().getOrderMaxMultiple().maxnum, m = (Number($("#J-trace-advanced-fanbei-a-jiange").val()),
            n.getMultiple(),
            1), d = (Number($("#J-trace-advanced-fanbei-a-multiple").val()),
            0), g = 0, p = Number($("#J-trace-advanced-fanbei-b-num").val()), f = Number($("#J-trace-advance-multiple").val()), h = Number($("#J-trace-advanced-fanbei-b-multiple").val()), v = l.getCurrentGame().getGameConfig().getInstance().getCurrentGameNumber(), b = '<span class="icon-period-current"></span>', y = "", C = n.traceStartNumberSelect.getValue(), G = (l.getCurrentGame().getGameConfig().getInstance().getGameNumbers().length,
            ""), T = "";
            for ($.each(s, function() {
                var e = l.getCurrentGame().getGameConfig().getInstance().getMethodById(this.mid);
                d += this.num * e.price
            }),
            d *= u,
            i.push(n.defConfig.dataRowHeader),
            e = n.getStartNumberIndexByNumber(C),
            g = e,
            o += g,
            t = n.getStartNumberByIndex(g); o > g && (m = p + e > g ? f > c ? c : f : h > c ? c : h,
            t = n.getStartNumberByIndex(g),
            t.number); g++)
                y = t.number,
                y == v && (y += b),
                T = g + 1,
                a = {
                    No: T,
                    traceNumber: y,
                    multiple: m,
                    money: n.formatMoney(d * m),
                    publishTime: t.time
                },
                G = y.substr(0, 8),
                i.push(n.formatRow(r, a));
            n.getRowTable().html(i.join(""))
        },
        trace_advanced_yingli_a: function(e) {
            var t, a, n, r = this, i = r.defConfig.dataRowTemplate, o = [], s = r.getTimes(), u = l.getCurrentGameOrder().getOrderMaxMultiple(), c = e || u.maxnum, m = l.getCurrentGame().getGameConfig().getInstance().getMethodFullName(u.gameMethod).join("-"), d = r.getMultiple(), g = 0, p = (r.getSameGameMethodName(),
            Number($("#J-trace-advanced-yingli-a-money").val())), f = (r.getSameGameMoneyUnti(),
            r.getWinMoney()), d = 1, i = r.defConfig.dataRowYingliTemplate, h = r.getOrderData().orders, v = 0, b = 0, y = 0, C = 0, G = l.getCurrentGame().getGameConfig().getInstance().getCurrentGameNumber(), T = '<span class="icon-period-current"></span>', D = "", w = r.traceStartNumberSelect.getValue(), x = (l.getCurrentGame().getGameConfig().getInstance().getGameNumbers().length,
            ""), N = "";
            for (o.push(r.defConfig.dataRowYingliHeader),
            t = r.getStartNumberIndexByNumber(w),
            g = t,
            s += g,
            a = r.getStartNumberByIndex(g); s > g; g++) {
                if (v = 0,
                y = 0,
                d = 1,
                $.each(h, function(e) {
                    var t = this
                      , a = t.num
                      , n = t.onePrice
                      , r = t.multiple
                      , i = a * r * n
                      , o = f * r;
                    y += o,
                    v += i
                }),
                d = r.getMultipleByMoney(f, p, v, b),
                0 > d)
                    return void alert("盈利金额追号无法到达您预期设定的目标值，请修改您的设置");
                if (d > c) {
                    if (l.getCurrentGameMessage().show({
                        type: "normal",
                        closeText: "确定",
                        closeFun: function() {
                            r.trace_advanced_yingli_a(c),
                            r.updateStatistics(),
                            this.hide()
                        },
                        data: {
                            tplData: {
                                msg: "盈利金额追号中的<b>[" + m + "]</b>的倍数超过了最大倍数限制，系统将自动调整为最大可设置倍数"
                            }
                        }
                    }),
                    !e)
                        return;
                    d = e
                }
                if (v *= d,
                b += v,
                y = f * d - b,
                C = y / b,
                a = r.getStartNumberByIndex(g),
                !a.number)
                    break;
                D = a.number,
                D == G && (D += T),
                N = g + 1,
                n = {
                    No: N,
                    traceNumber: D,
                    multiple: d,
                    money: r.formatMoney(v),
                    userGroupMoney: r.formatMoney(f * d),
                    winTotalAmout: r.formatMoney(y),
                    yinglilv: Number(100 * C).toFixed(2)
                },
                x = D.substr(0, 8),
                o.push(r.formatRow(i, n))
            }
            r.getRowTable().html(o.join(""))
        },
        trace_advanced_yingli_b: function(e) {
            var t, a, n, r = this, i = r.defConfig.dataRowTemplate, o = [], s = r.getTimes(), u = l.getCurrentGameOrder().getOrderMaxMultiple(), c = e || u.maxnum, m = l.getCurrentGame().getGameConfig().getInstance().getMethodFullName(u.gameMethod).join("-"), d = r.getMultiple(), g = 0, p = (r.getSameGameMethodName(),
            Number($("#J-trace-advanced-yingli-b-num").val())), f = Number($("#J-trace-advanced-yingli-b-money1").val()), h = Number($("#J-trace-advanced-yingli-b-money2").val()), v = (r.getSameGameMoneyUnti(),
            r.getWinMoney()), d = 1, i = r.defConfig.dataRowYingliTemplate, b = r.getOrderData().orders, y = 0, C = 0, G = 0, T = 0, D = l.getCurrentGame().getGameConfig().getInstance().getCurrentGameNumber(), w = '<span class="icon-period-current"></span>', x = "", N = r.traceStartNumberSelect.getValue(), M = (l.getCurrentGame().getGameConfig().getInstance().getGameNumbers().length,
            ""), S = "";
            for (o.push(r.defConfig.dataRowYingliHeader),
            t = r.getStartNumberIndexByNumber(N),
            g = t,
            s += g,
            a = r.getStartNumberByIndex(g); s > g; g++) {
                if (g + 1 > p + t && (f = h),
                y = 0,
                G = 0,
                d = 1,
                $.each(b, function(e) {
                    var t = this
                      , a = t.num
                      , n = t.onePrice
                      , r = t.multiple
                      , i = a * r * n
                      , o = v * r;
                    G += o,
                    y += i
                }),
                d = r.getMultipleByMoney(v, f, y, C),
                0 > d)
                    return void l.getCurrentGameMessage().show({
                        type: "normal",
                        closeText: "确定",
                        closeFun: function() {
                            this.hide()
                        },
                        data: {
                            tplData: {
                                msg: "盈利金额追号无法到达您预期设定的目标值，请修改您的设置"
                            }
                        }
                    });
                if (d > c) {
                    if (l.getCurrentGameMessage().show({
                        type: "normal",
                        closeText: "确定",
                        closeFun: function() {
                            r.trace_advanced_yingli_b(c),
                            r.updateStatistics(),
                            this.hide()
                        },
                        data: {
                            tplData: {
                                msg: "盈利金额追号中的<b>[" + m + "]</b>的倍数超过了最大倍数限制，系统将自动调整为最大可设置倍数"
                            }
                        }
                    }),
                    !e)
                        return;
                    d = e
                }
                if (y *= d,
                C += y,
                G = v * d - C,
                T = G / C,
                a = r.getStartNumberByIndex(g),
                !a.number)
                    break;
                x = a.number,
                x == D && (x += w),
                n = {
                    No: S,
                    traceNumber: x,
                    multiple: d,
                    money: r.formatMoney(y),
                    userGroupMoney: r.formatMoney(v * d),
                    winTotalAmout: r.formatMoney(G),
                    yinglilv: Number(100 * T).toFixed(2)
                },
                M = x.substr(0, 8),
                o.push(r.formatRow(i, n))
            }
            r.getRowTable().html(o.join(""))
        },
        trace_advanced_yinglilv_a: function() {
            var e, t = this, a = t.defConfig.dataRowTemplate, n = [], r = t.getTimes(), i = l.getCurrentGameOrder().getOrderMaxMultiple(), o = t.getMultiple(), s = [], u = Number($("#J-trace-advanced-yinglilv-a").val()) / 100, c = t.getSameGameMoneyUnti(), m = 0, d = 0, a = t.defConfig.dataRowYingliTemplate, g = t.getOrderData().orders, p = l.getCurrentGame().getGameConfig().getInstance().getCurrentGameNumber(), f = '<span class="icon-period-current"></span>', h = "", v = t.traceStartNumberSelect.getValue(), b = 0, y = l.getCurrentGame().getGameConfig().getInstance().getGameNumbers();
            if ($.each(g, function() {
                var e = l.getCurrentGame().getGameConfig().getInstance().getMethodById(this.mid)
                  , t = l.getCurrentGame().getGameConfig().getInstance().getPrizeById(this.mid);
                m += t.prize,
                d += this.num * e.price
            }),
            m *= c,
            d *= c,
            n.push(t.defConfig.dataRowYingliHeader),
            e = t.getStartNumberIndexByNumber(v),
            s = t.getMultipleByYinglilv(u, m, d, r, o, i.maxnum),
            s.length < 1)
                return void alert("您设置的参数无法达到盈利，请重新设置");
            for ($.each(s, function(e) {
                return this.oldMultiple > i.maxnum ? (alert("生成方案中的倍数超过了系统最大允许设置的倍数，将自动调整为系统最大可设置倍数"),
                !1) : void 0
            }); b < s.length; b++)
                h = y[b + e].number,
                h == p && (h += f),
                rowData = {
                    No: b + 1,
                    traceNumber: h,
                    multiple: s[b].multiple,
                    money: t.formatMoney(d * s[b].multiple),
                    userGroupMoney: t.formatMoney(m * s[b].multiple),
                    winTotalAmout: t.formatMoney(s[b].winAmountAll),
                    yinglilv: Number(s[b].winAmountAll / s[b].amountAll * 100).toFixed(2)
                },
                n.push(t.formatRow(a, rowData));
            t.getRowTable().html(n.join(""))
        },
        trace_advanced_yinglilv_b: function(e) {
            var t, a = this, n = a.defConfig.dataRowTemplate, r = [], i = a.getTimes(), o = i, s = l.getCurrentGameOrder().getOrderMaxMultiple(), u = a.getMultiple(), c = [], m = Number($("#J-trace-advanced-yingli-b-yinglilv1").val()) / 100, d = Number($("#J-trace-advanced-yingli-b-yinglilv2").val()) / 100, g = 0, p = Number($("#J-trace-advanced-yinglilv-b-num").val()), f = a.getSameGameMoneyUnti(), h = 0, v = 0, n = a.defConfig.dataRowYingliTemplate, b = a.getOrderData().orders, y = l.getCurrentGame().getGameConfig().getInstance().getCurrentGameNumber(), C = '<span class="icon-period-current"></span>', G = "", T = a.traceStartNumberSelect.getValue(), D = 0, w = !1, x = l.getCurrentGame().getGameConfig().getInstance().getGameNumbers();
            if ($.each(b, function() {
                var e = l.getCurrentGame().getGameConfig().getInstance().getMethodById(this.mid)
                  , t = l.getCurrentGame().getGameConfig().getInstance().getPrizeById(this.mid);
                h += t.prize,
                v += this.num * e.price
            }),
            h *= f,
            v *= f,
            r.push(a.defConfig.dataRowYingliHeader),
            t = a.getStartNumberIndexByNumber(T),
            o = p >= i ? i : p,
            c = a.getMultipleByYinglilv(m, h, v, o, u, s.maxnum),
            c.length < 1)
                return void alert("您设置的参数无法达到盈利，请重新设置");
            for ($.each(c, function() {
                return this.oldMultiple > s.maxnum ? (w = !0,
                alert("生成方案中的倍数超过了系统最大允许设置的倍数，将自动调整为系统最大可设置倍数"),
                !1) : void 0
            }); D < c.length; D++)
                G = x[D + t].number,
                G == y && (G += C),
                rowData = {
                    No: D + 1,
                    traceNumber: G,
                    multiple: c[D].multiple,
                    money: a.formatMoney(v * c[D].multiple),
                    userGroupMoney: a.formatMoney(h * c[D].multiple),
                    winTotalAmout: a.formatMoney(c[D].winAmountAll),
                    yinglilv: Number(c[D].winAmountAll / c[D].amountAll * 100).toFixed(2)
                },
                r.push(a.formatRow(n, rowData));
            if (i > p)
                for ($.each(c, function() {
                    u += this.multiple
                }),
                o = i - p,
                c = a.getMultipleByYinglilv(d, h, v, o, u, s.maxnum),
                $.each(c, function() {
                    return !w && this.oldMultiple > s.maxnum ? (alert("生成方案中的倍数超过了系统最大允许设置的倍数，将自动调整为系统最大倍数"),
                    !1) : void 0
                }),
                g = D,
                D = 0; D < c.length; D++)
                    G = x[D + g + t].number,
                    G == y && (G += C),
                    rowData = {
                        No: D + 1,
                        traceNumber: G,
                        multiple: c[D].multiple,
                        money: a.formatMoney(v * c[D].multiple),
                        userGroupMoney: a.formatMoney(h * c[D].multiple),
                        winTotalAmout: a.formatMoney(c[D].winAmountAll),
                        yinglilv: Number(c[D].winAmountAll / c[D].amountAll * 100).toFixed(2)
                    },
                    r.push(a.formatRow(n, rowData));
            a.getRowTable().html(r.join(""))
        },
        getMultipleByYinglilv: function(e, t, a, n, r, i) {
            for (var o, l = r * a, s = 0, u = 0, c = []; n > u && (o = Math.ceil(l * (1 + e) / (t - a * (1 + e))),
            !(1 > o)); u++)
                s = o,
                o = 0 == u ? o > i ? i : 1 : o > i ? i : o,
                0 == u ? l = o * a : l += o * a,
                c.push({
                    multiple: o,
                    amountAll: l,
                    winAmountAll: t * o - l,
                    oldMultiple: s
                });
            return c
        },
        getMultipleByMoney: function(e, t, a, n) {
            for (var r = 1, i = 1e5; i > r; r++)
                if (e * r - n - a * r > t)
                    return r;
            return -1
        },
        getPlayGroupMoneyByGameMethodName: function(e) {
            return Number(l.getCurrentGame().getGameConfig().getInstance().getPrizeById(e).prize)
        },
        formatRow: function(e, t) {
            var a, n, r = t;
            for (a in r)
                r.hasOwnProperty(a) && (n = RegExp("<#=" + a + "#>", "g"),
                e = e.replace(n, r[a]));
            return e
        },
        formatMoney: function(e) {
            var e = Number(e)
              , t = /(-?\d+)(\d{3})/;
            for (e = Number.prototype.toFixed ? e.toFixed(3) : Math.round(100 * e) / 100,
            e = "" + e; t.test(e); )
                e = e.replace(t, "$1,$2");
            return e
        },
        getAdvancedTable: function() {
            var e = this;
            return e._advancedTable || (e._advancedTable = $("#J-trace-table-advanced"))
        },
        getAdvancedRowTable: function() {
            var e = this;
            return e._advancedTableContainer || (e._advancedTableContainer = $("#J-trace-table-advanced-body"))
        },
        getNormalTable: function() {
            var e = this;
            return e._table || (e._table = $("#J-trace-table"))
        },
        getNormalRowTable: function() {
            var e = this;
            return e._tableContainer || (e._tableContainer = $("#J-trace-table-body"))
        },
        getTable: function() {
            var e = this;
            return e.isAdvanced() ? e._advancedTable || (e._advancedTable = $("#J-trace-table-advanced")) : e._table || (e._table = $("#J-trace-table"))
        },
        getRowTable: function(e) {
            return $("#J-trace-table-" + e + "-body")
        },
        setCurrentTraceNumber: function(e) {
            var t = this;
            t.currentTraceNumber = e
        },
        getCurrentTraceNumber: function() {
            return me.currentTraceNumber
        },
        setTraceStartNumber: function(e) {
            var t = this;
            t.traceStartNumber = e
        },
        getTraceStartNumber: function() {
            return me.traceStartNumber
        },
        getMultiple: function() {
            var e = this;
            return e.isAdvanced() ? e.getAdvancedMultiple() : e.getNormalMultiple()
        },
        getNormalMultiple: function() {
            return Number(this.normalSelectMultiple.getValue())
        },
        getAdvancedMultiple: function() {
            return Number($("#J-trace-advance-multiple").val())
        },
        setIsWinStop: function(e) {
            this.isWinStop = !!e
        },
        getTimes: function(e) {
            return Number($("#J-trace-" + e + "-times").val())
        },
        getAdvancedTimes: function() {
            return Number($("#J-trace-advanced-times").val())
        },
        isAdvanced: function() {
            var e = this;
            return "lirunlv" == e.traceType || "fanbei" == e.traceType
        },
        setTraceType: function(e) {
            var t = this;
            t.traceType = e
        },
        getTraceType: function() {
            return this.traceType
        },
        getRowTableType: function(e) {
            var t = this;
            return t.getRowTable(e).attr("data-type")
        },
        emptyRowTable: function() {
            $("#J-trace-table-body").html(""),
            $("#J-trace-table-advanced-body").html(""),
            $("#J-trace-statistics-times").html("0"),
            $("#J-trace-statistics-lotterys-num").html("0"),
            $("#J-trace-statistics-amount").html("0")
        },
        checkTraceAvailabity: function() {
            var e = l.getCurrentGameOrder().getTotal().amount
              , t = l.getCurrentGameMessage();
            return 0 >= e ? (t.show({
                type: "mustChoose",
                msg: "请至少选择一注投注号码！",
                data: {
                    tplData: {
                        msg: "请至少选择一注投注号码！"
                    }
                }
            }),
            !1) : (l.getCurrentGameOrder().editMultiples(1),
            !0)
        },
        show: function() {
            var e = this
              , t = l.getCurrentGameOrder().getTotal().amount
              , a = l.getCurrentGameMessage();
            return 0 >= t ? void a.show({
                type: "mustChoose",
                msg: "请至少选择一注投注号码！",
                data: {
                    tplData: {
                        msg: "请至少选择一注投注号码！"
                    }
                }
            }) : (l.getCurrentGameOrder().editMultiples(1),
            void e.showPanel())
        },
        hide: function() {
            var e = this;
            e.hidePanel(),
            1 == e.getIsTrace() ? l.getCurrentGameOrder().editMultiples(1) : l.getCurrentGameOrder().restoreMultiples()
        },
        showPanel: function() {
            var t = this;
            e.Mask.getInstance().show(),
            t.panel.show()
        },
        hidePanel: function() {
            var t = this;
            e.Mask.getInstance().hide(),
            t.panel.hide()
        },
        applyTraceData: function() {
            var e = this
              , t = Number($.trim($("#J-trace-statistics-times").text()))
              , a = Number($.trim($("#J-trace-statistics-lotterys-num").text()))
              , n = Number($.trim($("#J-trace-statistics-amount").text().replace(/[^\d|\.]/g, "")));
            $('#mobile_dealcount').html(a),$('#mobile_amount').html(n),
            t > 0 ? (e.setIsTrace(1),
            l.getCurrentGameOrder().setTotalLotterysNum(a),
            l.getCurrentGameOrder().setTotalAmount(n),
            typeof MobileTrace != 'undefined' && typeof MobileTrace.afterCal == 'function' && MobileTrace.afterCal()) : (l.getCurrentGameOrder().restoreMultiples(),
            e.setIsTrace(0),
            e.hide())
        },
        deleteTrace: function() {
            var e = this;
            l.getCurrentGameOrder().restoreMultiples(),
            e.setIsTrace(0),
            e.emptyRowTable(),
            $("#J-trace-num-tip-panel").hide(),
            e.getTbodys().html("")
        },
        getTbodys: function() {
            var e = this;
            return e.panel.find("tbody[data-type]")
        },
        autoDeleteTrace: function() {
            var t = this
              , a = new e.Tip({
                cls: "j-ui-tip-b"
            });
            t.deleteTrace(),
            setTimeout(function() {
                a.getDom().fadeOut()
            }, 2e3)
        },
        reSetTab: function() {
            var e = this
              , t = e.TraceTab
              , a = e.TraceAdvancedTab;
            t.triggers.removeClass(t.defConfig.currClass),
            t.triggers.eq(0).addClass(t.defConfig.currClass),
            t.panels.removeClass(t.defConfig.currPanelClass),
            t.panels.eq(0).addClass(t.defConfig.currPanelClass),
            t.index = 0,
            a.triggers.removeClass(a.defConfig.currClass),
            a.triggers.eq(0).addClass(a.defConfig.currClass),
            a.panels.removeClass(a.defConfig.currPanelClass),
            a.panels.eq(0).addClass(a.defConfig.currPanelClass),
            a.index = 0,
            $("#J-trace-normal-times").val(10),
            $("#J-function-select-tab .function-select-title li").removeClass("current").eq(1).addClass("current"),
            $("#J-trace-advanced-times").val(10),
            $("#J-trace-advance-multiple").val(1),
            $("#J-trace-advanced-fanbei-a-jiange").val(2),
            $("#J-trace-advanced-fanbei-a-multiple").val(2),
            $("#J-trace-advanced-fanbei-b-num").val(5),
            $("#J-trace-advanced-fanbei-b-multiple").val(3),
            $("#J-trace-advanced-yingli-a-money").val(100),
            $("#J-trace-advanced-yingli-b-num").val(2),
            $("#J-trace-advanced-yingli-b-money1").val(100),
            $("#J-trace-advanced-yingli-b-money2").val(50),
            $("#J-trace-advanced-yinglilv-a").val(10),
            $("#J-trace-advanced-yinglilv-b-num").val(5),
            $("#J-trace-advanced-yingli-b-yinglilv1").val(30),
            $("#J-trace-advanced-yingli-b-yinglilv2").val(10),
            e.setTraceType(e.opts.defaultType),
            e.advancedType = e.defConfig.advancedTypeHas[0],
            e.typeTypeType = "a",
            $("#J-trace-advanced-type-panel").find('input[type="radio"]').each(function(e) {
                if ((e + 1) % 2 != 0) {
                    var t, a = $(this), n = a.parent(), r = n.parent().children();
                    this.checked = !0,
                    r.each(function(e) {
                        t = r.get(e),
                        n.get(0) != t ? $(t).find('input[type="text"]').attr("disabled", "disabled") : $(t).find('input[type="text"]').attr("disabled", !1)
                    })
                }
            })
        }
    }, m = e.Class(c, a);
    m.defConfig = o,
    m.getInstance = function(e) {
        return r || (r = new m(e))
    }
    ,
    e[t] = m
}(dsgame, "GameTrace", dsgame.Event),
function(e, t, a, n) {
    var r, o = {}, l = e.Games, s = {
        init: function(e) {
            var t = this;
            t.defConfig;
            t.postLock = null ,
            l.setCurrentGameSubmit(t)
        },
        getSubmitData: function() {
            var e = {}
              , t = l.getCurrentGameOrder().orderData;
            l.getCurrentGame().getCurrentGameMethod().getOrderSplitType();
            if (i = 0,
            len = t.length,
            traceInfo = l.getCurrentGameTrace().getResultData(),
            j = 0,
            len2 = traceInfo.traceData.length,
            jsId = 0,
            e.gameId = l.getCurrentGame().getGameConfig().getInstance().getGameId(),
            e.isTrace = l.getCurrentGameTrace().getIsTrace(),
            e.traceWinStop = l.getCurrentGameTrace().getIsWinStop(),
            e.traceStopValue = l.getCurrentGameTrace().getTraceWinStopValue(),
            e.continus = t.continus || 1,
            e.balls = [],
            $.each(t, function(t, a) {
                if ("renxuan_zhixuan_fs" == a.orderSplitType) {
                    var n = a.postParameter.split("|")
                      , r = []
                      , i = 2
                      , o = a.type
                      , s = a.mid;
                    -1 != o.indexOf("renxuansan") ? i = 3 : -1 != o.indexOf("renxuansi") && (i = 4),
                    $.each(n, function(e, t) {
                        "" != t && r.push(e)
                    }),
                    r = l.getCurrentGame().k_combinations(r, i),
                    $.each(r, function(t, r) {
                        var i = []
                          , o = []
                          , u = [];
                        $.each(r, function(e, t) {
                            i.push(t),
                            o.push(n[t]),
                            u.push(n[t].split(""))
                        }),
                        i = i.join(","),
                        o = o.join("|");
                        var c = l.getCurrentGame().getGameConfig().getInstance().getSeriesWayId(s, i)
                          , m = l.getCurrentGame().zx_combinations(u).length;
                        _ball = {
                            ball: o,
                            viewBalls: o,
                            num: m,
                            type: a.type,
                            onePrice: a.onePrice,
                            moneyunit: a.moneyUnit,
                            multiple: a.multiple,
                            prizeGroup: a.prizeGroup,
                            index: i
                        },
                        jsId++,
                        _ball.jsId = jsId,
                        _ball.wayId = c,
                        e.balls.push(_ball)
                    })
                } else if (a.digitChoose && a.digitChoose.length) {
                    var u = a.digitChoose;
                    $.each(u, function(t, n) {
                        var r = n.join(",")
                          , i = l.getCurrentGame().getGameConfig().getInstance().getSeriesWayId(a.mid, r)
                          , o = {
                            ball: a.postParameter.split(",").join("|"),
                            viewBalls: a.viewBalls,
                            num: a.num / u.length,
                            type: a.type,
                            onePrice: a.onePrice,
                            moneyunit: a.moneyUnit,
                            multiple: a.multiple,
                            prizeGroup: a.prizeGroup,
                            index: r
                        };
                        jsId++,
                        o.jsId = jsId,
                        o.wayId = i,
                        e.balls.push(o)
                    })
                } else
                    jsId++,
                    e.balls.push({
                        jsId: jsId,
                        wayId: a.mid,
                        ball: a.postParameter.split(",").join("|"),
                        viewBalls: a.viewBalls,
                        num: a.num,
                        type: a.type,
                        onePrice: a.onePrice,
                        moneyunit: a.moneyUnit,
                        multiple: a.multiple,
                        prizeGroup: a.prizeGroup
                    })
            }),
            e.orders = {},
            e.isTrace < 1)
                e.orders[l.getCurrentGame().getGameConfig().getInstance().getCurrentGameNumber()] = 1,
                e.amount = l.getCurrentGameOrder().getTotal().amount;
            else {
                for (; j < len2; j++)
                    e.orders[traceInfo.traceData[j].traceNumber] = traceInfo.traceData[j].multiple;
                e.amount = traceInfo.amount
            }
            return e
        },
        doPostLock: function() {
            var e = this;
            e.postLock = !0
        },
        cancelPostLock: function() {
            var e = this;
            e.postLock = !1
        },
        clearData: function() {
            var e = l.getCurrentGameOrder();
            e.reSet(),
            e.cancelSelectOrder(),
            l.getCurrentGame().getCurrentGameMethod().reSet(),
            l.getCurrentGameTrace().emptyRowTable()
        },
        getFastSubmitData: function(e) {
            var e = e || l.getCurrentGameStatistics().getResultData()
              , t = {};
            l.getCurrentGame().getCurrentGameMethod().getOrderSplitType();
            if (i = 0,
            j = 0,
            jsId = 0,
            t.gameId = l.getCurrentGame().getGameConfig().getInstance().getGameId(),
            t.isTrace = 0,
            t.traceWinStop = 1,
            t.traceStopValue = 1,
            t.balls = [],
            e.postParameter || (e.postParameter = l.getCurrentGame().getCurrentGameMethod().makePostParameter(e.original)),
            "renxuan_zhixuan_fs" == e.orderSplitType) {
                var a = e.postParameter.split("|")
                  , n = []
                  , r = 2
                  , o = e.type
                  , s = e.mid;
                -1 != o.indexOf("renxuansan") ? r = 3 : -1 != o.indexOf("renxuansi") && (r = 4),
                $.each(a, function(e, t) {
                    "" != t && n.push(e)
                }),
                n = l.getCurrentGame().k_combinations(n, r),
                $.each(n, function(n, r) {
                    var i = []
                      , o = []
                      , u = [];
                    $.each(r, function(e, t) {
                        i.push(t),
                        o.push(a[t]),
                        u.push(a[t].split(""))
                    }),
                    i = i.join(","),
                    o = o.join("|");
                    var c = l.getCurrentGame().getGameConfig().getInstance().getSeriesWayId(s, i)
                      , m = l.getCurrentGame().zx_combinations(u).length;
                    _ball = {
                        ball: o,
                        viewBalls: o,
                        num: m,
                        type: e.type,
                        onePrice: e.onePrice,
                        moneyunit: e.moneyUnit,
                        multiple: e.multiple,
                        prizeGroup: e.prizeGroup,
                        index: i
                    },
                    jsId++,
                    _ball.jsId = jsId,
                    _ball.wayId = c,
                    t.balls.push(_ball)
                })
            } else if (e.digitChoose && e.digitChoose.length) {
                var u = e.digitChoose;
                $.each(u, function(a, n) {
                    var r = n.join(",")
                      , i = l.getCurrentGame().getGameConfig().getInstance().getSeriesWayId(e.mid, r)
                      , o = e.postParameter.split(",").join("|")
                      , s = {
                        ball: o,
                        viewBalls: o,
                        num: e.num / u.length,
                        type: e.type,
                        onePrice: e.onePrice,
                        moneyunit: e.moneyUnit,
                        multiple: e.multiple,
                        prizeGroup: e.prizeGroup,
                        index: r
                    };
                    jsId++,
                    s.jsId = jsId,
                    s.wayId = i,
                    t.balls.push(s)
                })
            } else {
                jsId++;
                var c = e.postParameter.split(",").join("|");
                t.balls.push({
                    jsId: jsId,
                    wayId: e.mid,
                    ball: c,
                    viewBalls: e.viewBalls,
                    num: e.num,
                    type: e.type,
                    onePrice: e.onePrice,
                    moneyunit: e.moneyUnit,
                    multiple: e.multiple,
                    prizeGroup: e.prizeGroup
                })
            }
            return t.orders = {},
            t.orders[l.getCurrentGame().getGameConfig().getInstance().getCurrentGameNumber()] = 1,
            t.amount = e.amount,
            t
        },
        submitData: function(t) {
            var a = this
              , n = t || a.getSubmitData()
              , r = l.getCurrentGameMessage();
            if (!a.postLock)
                return n.balls.length <= 0 ? (r.show({
                    type: "mustChoose",
                    msg: "请至少选择一注投注号码！",
                    data: {
                        tplData: {
                            msg: "请至少选择一注投注号码！"
                        }
                    }
                }),
                void a.cancelPostLock()) : void r.show({
                    type: "checkLotters",
                    msg: "请核对您的投注信息！",
                    confirmIsShow: !0,
                    confirmFun: function() {
                        a.postLock || $.ajax({
                            url: l.getCurrentGame().getGameConfig().getInstance().getSubmitUrl(),
                            data: l.getCurrentGame().editSubmitData(n),
                            dataType: "json",
                            method: "POST",
                            beforeSend: function() {
                                a.doPostLock(),
                                a.fireEvent("beforeSend", r)
                            },
                            success: function(e) {
                            	//投注成功后倍数返回一杯
                            	var selectMinVal =  $('#J-balls-statistics-multiple option:first-child').val();
                            	$('.multiple-choose .choose-input').val(selectMinVal);
                            	$('.multiple-choose .choose-input').attr('data-realvalue',selectMinVal);

                                if (String(e)=='-1') {
                                  a.cancelPostLock();
                                  e ={};
                                  e.data = undefined;
                                  e.isSuccess = false;
                                  e.Msg = '登录状态异常，请登录后重试！';
                                  //return false;
                                }
                                1 == Number(e.isSuccess) ? ((isMobile.any() ? e.data.tplData.link='#!record/&lottery_'+l.getCurrentGame().getGameConfig().getInstance().getGameId() :!0),r.show(e),

                                a.clearData(),
                                $('[data-user-account-balance]').html(e.data.tplData.money),
                                $('textarea.content-textarea-balls').keyup(),
                                a.fireEvent("afterSubmitSuccess")) : r.showError(e),
                                a.cancelPostLock()
                            },
                            complete: function() {
                                a.fireEvent("afterSubmit", r)
                            },
                            error: function() {
                                a.cancelPostLock()
                            }
                        })
                    },
                    cancelIsShow: !0,
                    cancelFun: function() {
                        a.cancelPostLock(),$('#J-balls-order-container .delete').trigger('click'),$('#clear_deals').trigger('click'),$('#multitimes').val(1),
                        this.hide()
                    },
                    normalCloseFun: function() {
                        a.cancelPostLock()
                    },
                    callback: function() {},
                    data: {
                        tplData: {
                            lotteryDate: "--",
                            lotteryName: l.getCurrentGame().getGameConfig().getInstance().getGameNameCn(),
                            lotteryIssue: l.getCurrentGame().getGameConfig().getInstance().getCurrentGameNumber(),
                            lotteryInfo: function() {
                                for (var e = "", t = l.getCurrentGame().getGameConfig().getInstance(), a = n.balls, r = ["万", "千", "百", "十", "个"], i = 0; i < a.length; i++) {
                                    var o = a[i]
                                      , s = t.getMethodCnFullNameById(o.wayId);
                                    if (s = s[0] == s[1] && s[1] == s[2] ? t.getMethodCnFullNameById(o.wayId)[2] : s[0] + "," + s[2],
                                    o.index) {
                                        var u = o.index.split(",")
                                          , c = "";
										 o.position = '';
                                        $.each(u, function(e, t) {
                                            c += r[t] || "";
											o.position += (Number(t)+1);
                                        }),
                                        s += "," + c + "位"
                                    }
                                    var m = o.moneyunit * o.onePrice * o.num * o.multiple;
                                    e += '<div class="game-submit-confirm-list">' + s + " " + o.viewBalls + '<span style="display:none;" class="amount-for-print">&nbsp;&nbsp;&nbsp' + m + "元</span></div>"
                                }
                                return e
                            },
                            lotteryamount: e.util.formatMoney(n.amount, 3),
                            lotteryAcc: l.getCurrentGame().getGameConfig().getInstance().getUserName(),
                            lotterOptionalPrizes: l.getCurrentGame().getGameConfig().getInstance().setOptionalPrizes()
                        }
                    }
                })
        },
        submitDataQuick: function(t) {
            var a = this
              , n = t || a.getSubmitData()
              , r = l.getCurrentGameMessage();
            if (!a.postLock)
                return n.balls.length <= 0 ? void a.cancelPostLock() : (a.postLock || $.ajax({
                            url: l.getCurrentGame().getGameConfig().getInstance().getSubmitUrl(),
                            data: l.getCurrentGame().editSubmitData(n),
                            dataType: "json",
                            method: "POST",
                            beforeSend: function() {
                                a.doPostLock(),
                                a.fireEvent("beforeSend", r)
                            },
                            success: function(e) {
                                if (String(e)=='-1') {
                                  a.cancelPostLock();
                                  e ={};
                                  e.data = undefined;
                                  e.isSuccess = false;
                                  e.Msg = '登录状态异常，请登录后重试！';
                                  //return false;
                                }
                                1 == Number(e.isSuccess) ? (r.show(e),
                                a.clearData(),
                                $('[data-user-account-balance]').html(e.data.tplData.money),
                                $('textarea.content-textarea-balls').keyup(),
                                a.fireEvent("afterSubmitSuccess")) : r.showError(e),
                                a.cancelPostLock()
                            },
                            complete: function() {
                                a.fireEvent("afterSubmit", r)
                            },
                            error: function() {
                                a.cancelPostLock()
                            }
                        }))
        }
    }, u = e.Class(s, a);
    u.defConfig = o,
    u.getInstance = function(e) {
        return r || (r = new u(e))
    }
    ,
    e[t] = u
}(dsgame, "GameSubmit", dsgame.Event);
function getOrders(){
    var $miniOrderDom = $('.history-content, .record-content');
    var cateGory = $miniOrderDom.data('value');
    var toparg = arguments;
    Api.getGameRecord_bet({
        'lottery': cateGory,
        'currPage': 1,
        'pageSize': 10
    }, function(res){
        if (typeof res.page == 'undefined') {
          return false;
        }
        var data = res.page;
        var orders = data.list;
        var table = $('#J-tbody')
        table.html('');
        $.each(orders,function(index,item){
          var code = item.code;
            if (code.length > 10) {
              code = code.substr(0, 10) + '...';
            }

          var content = "<tr>"
            +"<td>"+item.lottery+"</td>"
            +(cateGory == '' ? "<td>"+item.issue+"</td>" : '')
            +"<td>"+item.method+"</td>"
            +"<td>"+(item.odds*item.perAmount/2).toFixed(4)+"</td>"
            +"<td>"+code+"</td>"
            +"<td>"+item.amount+"</td>";
            if(item.awardMoney > 0){
              content += "<td class='c-important'>"+item.winningNumber+"</td>"
                  +  "<td class='c-important'>"+item.awardMoney+"</td>"
                  +  "<td class='c-important "+("status_" +item.status) +"'>"+item.state+"</td>";

            }else{
              content += "<td>"+item.winningNumber+"</td>"
                  +  "<td></td>"
                  +  "<td class='"+("status_" +item.status)+"'>"+item.state+"</td>";
            }
            content += '<td><a href="' + ctx + '/mkg/orders/view/' + item.orderItemId + '" target="_blank">详情</a>'

            if(item.canCancel === false){
                content += "";
            }else {
                if(item.cancelStatus === 1){
                    content += "<a class='disabled' id='cancelProject' href='javascript:void(0);' data-id='" + item.orderItemId + "'>已撤单</a></td>";
                }else {
                    content += "<a class='btn-cancel-order' id='cancelProject' href='javascript:void(0);' data-id='" + item.orderItemId + "'>撤单</a></td>";
                }
            }

          +"</tr>"
          table.append(content);
        });
        $('#J-tbody').find('a.btn-cancel-order').unbind('click').bind('click', function(){
            var orderItemId = $(this).data('id');
            commonUtil.confirmTip('撤销订单', '确定要撤单么？', 'cancelOrder', orderItemId, $(this));
        });
        if (toparg.length > 0) {
          if (typeof toparg[0] == 'function') {
            var callback = toparg[0];
            callback();
          }
        }
    });
}