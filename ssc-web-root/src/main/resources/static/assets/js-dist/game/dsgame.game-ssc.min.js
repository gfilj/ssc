/*‮*/!function(e, t, n, a) {
    var r, i = {
        name: "ssc",
        jsNamespace: "",
        digitConf: [0, 0, 0, 0, 0],
        digitNeed: 0
    }, s = e.Games, o = {
        init: function() {
            var e = this;
            e.eventProxy(),
            e.digitStatus = [],
            e.digitChoosed = []
        },
        getGameConfig: function() {
            return s.SSC.Config
        },
        digitStatusToggle: function(e) {
            var t = this
              , n = t.getDigitStatus()
              , a = !0;
            return n[e] = Number(!n[e]),
            t.setDigitChoosed(n),
            t.checkDigitStatus(n) ? t.digitStatus = n : (n[e] = Number(!n[e]),
            a = !1,
            t.setDigitChoosed(n)),
            t.setProjectNum(),
            s.getCurrentGame().fireEvent("afterDigitStatusChange"),
            a
        },
        initDigitStatus: function(e, t) {
            this.digitNeed = Number(e),
            this.digitStatus = t,
            this.setDigitChoosed(),
            this.setProjectNum()
        },
        getDigitStatus: function(e) {
            return e && this.digitStatus[e] || this.digitStatus
        },
        checkDigitStatus: function() {
            return digitChoosed = this.getDigitChoosed(),
            digitChoosed.length >= this.getDigitNeed() ? !0 : !1
        },
        getDigitNeed: function() {
            return this.digitNeed
        },
        setDigitChoosed: function(e) {
            var t = this
              , e = e || t.getDigitStatus()
              , n = [];
            return $.each(e, function(e, t) {
                var a = !1;
                t && (n.push(e),
                a = !0),
                s.getCurrentGame().fireEvent("digitLabelsEvent", e, a)
            }),
            this.digitChoosed = n
        },
        getDigitChoosed: function() {
            return this.digitChoosed
        },
        getProjectNum: function() {
            return this.digitProjectNum
        },
        setProjectNum: function() {
            var e = this
              , t = e.k_combinations(e.getDigitChoosed(), e.getDigitNeed())
              , n = e.getProjectNum() || 1;
            e.digitProjectNum = t.length || 1,
            s.getCurrentGame().fireEvent("afterProjectNumSet", n, t)
        },
        combination: function(e) {
            if (e.length < 1)
                return [];
            var t, n, a, r = (e[0].length,
            e.length), i = [], s = [], o = [];
            for (i[t = r] = 1; t--; )
                i[t] = i[t + 1] * e[t].length;
            for (a = i[0],
            t = 0; a > t; t++) {
                for (o = [],
                n = 0; r > n; n++)
                    o[n] = e[n][~~(t % i[n] / i[n + 1])];
                s[t] = o
            }
            return s
        },
        k_combinations: function(e, t) {
            var n, a, r, i, s, o = this;
            if (t > e.length || 0 >= t)
                return [];
            if (t == e.length)
                return [e];
            if (1 == t) {
                for (r = [],
                n = 0; n < e.length; n++)
                    r.push([e[n]]);
                return r
            }
            for (r = [],
            n = 0; n < e.length - t + 1; n++)
                for (i = e.slice(n, n + 1),
                s = o.k_combinations(e.slice(n + 1), t - 1),
                a = 0; a < s.length; a++)
                    r.push(i.concat(s[a]));
            return r
        },
        zx_combinations: function(e) {
            function t(e, t) {
                var n = [];
                return $.each(e, function(e, a) {
                    var r = [a];
                    t && t.length || n.push(a),
                    $.each(t, function(e, t) {
                        if ($.isArray(t))
                            var a = t;
                        else
                            var a = [t];
                        n.push(r.concat(a))
                    })
                }),
                n
            }
            for (var n = []; e.length; ) {
                var a = e.pop();
                n = t(a, n)
            }
            return n
        }
    }, u = e.Class(o, n);
    u.defConfig = i,
    u.getInstance = function(e) {
        return r || (r = new u(e))
    }
    ,
    e.Games[t] = u
}(dsgame, "SSC", dsgame.Game),
function(e, t, n, a) {  
    var r, i = gameConfigData, s = {}, o = {}, u = {};
    !function() {
        var e, t, n, a = i.wayGroups;
        $.each(a, function() {
            e = this,
            e.fullname_en = [e.name_en],
            e.fullname_cn = [e.name_cn],
            o["" + e.id] = e,
            e.children && $.each(e.children, function() {
                t = this,
                t.fullname_en = e.fullname_en.concat(t.name_en),
                t.fullname_cn = e.fullname_cn.concat(t.name_cn),
                o["" + t.id] = t,
                t.children && $.each(t.children, function() {
                    n = this,
                    n.fullname_en = t.fullname_en.concat(n.name_en),
                    n.fullname_cn = t.fullname_cn.concat(n.name_cn),
                    u["" + n.id] = n
                })
            })
        })
    }();
    var l = {
        init: function() {},
        getGameId: function() {
            return i.gameId
        },
        getGameNameEn: function() {
            return i.gameNameEn
        },
        getGameNameCn: function() {
            return i.gameNameCn
        },
        getTraceMaxTimes: function() {
            return Number(i.traceMaxTimes)
        },
        getCurrentLastTime: function() {
            return i.currentNumberTime
        },
        getNextLastTime: function() {
            return i.nextIssueEndTime
        },
        getNextNumber: function() {
            return i.nextIssueNumber
        },
        getCurrentTime: function() {
            return i.currentTime
        },
        getLoadSystemTimeUrl:function(){
          return i.loadCurrentTimeUrl
        },
        getCurrentGameNumber: function() {
            return i.currentNumber
        },
        getLastGameNumber: function() {
            if(!i.issueHistory){
              return "";
            }
            var e = i.issueHistory.last_number.issue
              , t = i.issueHistory.issues[0].issue;
            return t > e && (e = t),
            e
        },
        getLotteryBalls: function() {
            var e = i.issueHistory.last_number.wn_number
              , t = i.issueHistory.last_number.issue
              , n = i.issueHistory.issues[0].issue;
            return n > t && (e = i.issueHistory.issues[0].wn_number),
            e || ""
        },
        getLotteryNumbers: function() {
            return i.issueHistory.issues || []
        },
        getBallsHistory: function() {
            return i.ballsHistory || []
        },
        getFormatLotteryNumbers: function(e, t) {
            var n = this
              , a = {};
            return t = t ? t : n.getLotteryNumbers(),
            e = e || "hour",
            $.each(t, function(t, r) {
                var i = n.getKeyByDateStr("" + r.offical_time, e);
                i && (a[i] || (a[i] = []),
                a[i].push(r))
            }),
            a
        },
        getKeyByDateStr: function(e, t) {
            e = e || "0",
            t = t || "hour";
            var n = new Date;
            if (n.setTime(1e3 * parseInt(e)),
            "[object Date]" === Object.prototype.toString.call(n)) {
                if (isNaN(n.getTime()))
                    return "";
                var a = n.getMonth() + 1
                  , r = n.getDate()
                  , i = n.getHours()
                  , s = n.getMinutes();
                return 10 > a && (a = "0" + a),
                10 > r && (r = "0" + r),
                10 > i && (i = "0" + i),
                10 > s && (s = "0" + s),
                "month" == t ? a + "月" : "day" == t ? a + "月" + r + "日" : "minute" == t ? i + ":" + s : i + ":00"
            }
            return ""
        },
        getGameNumbers: function() {
            return i.gameNumbers
        },
        getLimitByMethodId: function(e, t) {
            var t = t || 1
              , n = Number(this.getPrizeById(e).max_multiple);
            return n / t
        },
        getSubmitUrl: function() {
            return i.submitUrl
        },
        getUpdateUrl: function() {
            return i.loaddataUrl
        },
        getUploadPath: function() {
            return i.uploadPath
        },
        getJsPath: function() {
            return i.jsPath
        },
        getDefaultMethodId: function() {
            return i.defaultMethodId
        },
        getUserName: function() {
            return i.username
        },
        getDelayTime: function() {
            return 5
        },
        getLastGameBallsUrl: function() {
            return i.lastGameBallsUrl
        },
        getMethods: function() {
            return i.wayGroups
        },
        getMethodById: function(e) {
            return u["" + e]
        },
        getPrizeById: function(e) {
            return i.prizeSettings["" + e]
        },
        getMethodNodeById: function(e) {
            return o["" + e]
        },
        getMethodNameById: function(e) {
            var t, n = this.getMethodById(e);
            return n ? t = n.name_en : $.each(u, function(n, a) {
                return t ? !1 : void (a.relation_series_ids && $.each(a.relation_series_ids, function(n, r) {
                    return r.series_way_id == e ? (t = a.name_en,
                    !1) : void 0
                }))
            }),
            t || ""
        },
        getMethodCnNameById: function(e) {
            var t, n = this.getMethodById(e);
            return n ? t = n.name_cn : $.each(u, function(n, a) {
                return t ? !1 : void (a.relation_series_ids && $.each(a.relation_series_ids, function(n, r) {
                    return r.series_way_id == e ? (t = a.name_cn,
                    !1) : void 0
                }))
            }),
            t || ""
        },
        getMethodFullNameById: function(e) {
            var t, n = this.getMethodById(e);
            return n ? t = n.fullname_en : $.each(u, function(n, a) {
                return t ? !1 : void (a.relation_series_ids && $.each(a.relation_series_ids, function(n, r) {
                    return r.series_way_id == e ? (t = a.fullname_en,
                    !1) : void 0
                }))
            }),
            t || ""
        },
        getMethodCnFullNameById: function(e) {
            var t, n = this.getMethodById(e);
            return n ? t = n.fullname_cn : $.each(u, function(n, a) {
                return t ? !1 : void (a.relation_series_ids && $.each(a.relation_series_ids, function(n, r) {
                    return r.series_way_id == e ? (t = a.fullname_cn,
                    !1) : void 0
                }))
            }),
            t || ""
        },
        getOnePriceById: function(e) {
            return this.getMethodById(e).price
        },
        getToken: function() {
            return i._token
        },
        updateConfig: function(e) {
            $.extend(!0, i, e)
        },
        getOptionalPrizes: function() {
            return i.optionalPrizes
        },
        setOptionalPrizes: function() {
            return $("#J-bonus-select-value").val()
        },
        getDefaultCoefficient: function() {
            return i.defaultCoefficient ? i.defaultCoefficient : "1"
        },
        getDefaultMultiple: function() {
            return i.defaultMultiple ? i.defaultMultiple : "1"
        },
        getLoadIssueUrl: function() {
            return i.loadIssueUrl
        },
        getMaxPrizeGroup: function() {
            return i.maxPrizeGroup
        },
        getSeriesWayId: function(e, t) {
            var n = this.getMethodById(e).relation_series_ids || []
              , a = -1;
            return $.each(n, function(e, n) {
                return n.index == t ? (a = n.series_way_id,
                !1) : void 0
            }),
            a
        }
    }
      , c = e.Class(l, n);
    c.defConfig = s,
    c.getInstance = function(e) {
        return r || (r = new c(e))
    }
    ,
    e.Games.SSC[t] = c
}(dsgame, "Config", dsgame.Event),
function(e, t, n, a) {
    var r, i = {}, s = e.Games, o = {
        init: function(e) {
            var t = this;
            s.setCurrentGameMessage(t)
        }
    }, u = e.Class(o, n);
    u.defConfig = i,
    u.getInstance = function(e) {
        return r || (r = new u(e))
    }
    ,
    e.Games.SSC[t] = u
}(dsgame, "Message", dsgame.GameMessage),
function(e, t, n, a) {
    var r = {
        name: "wuxing.zhixuan.danshi",
        editorobj: ".content-text-balls",
        uploadButton: "#file",
        exampleText: "12345 33456 87898 <br />12345 33456 87898 <br />12345 33456 87898 ",
        tips: "五星直选单式玩法提示",
        exampleTip: "这是单式弹出层提示",
        checkFont: /[\u4E00-\u9FA5]|[\/\n]|[\/W]/g,
        filtration: /[\s]|[,]|[;]|[<br>]|[，]|[；]/g,
        checkNum: /^[0-9]*$/,
        normalTips: ["说明：", "1、每一注号码之间的间隔符支持 回车  空格[ ]    逗号[,]   分号[;]", "2、文件格式必须是.txt格式,大小不超过200KB。", "3、将文件拖入文本框即可快速实现文件上传,大文件拖拽上传效果更佳。", "4、导入文本内容后将覆盖文本框中现有的内容。", "5、一次投注支持100,000注！"].join("\n")
    }
      , i = "SSC"
      , s = e.Games
      , o = e.Games[i]
      , u = {
        init: function(e) {
            var t = this;
            t.ieRange = "",
            t.vData = [],
            t.aData = [],
            t.tData = [],
            t.errorData = [],
            t.sameData = [],
            t.firstfocus = !0,
            t.ranNumTag = !1,
            t.isFirstAdd = !0,
            s.getCurrentGameOrder().addEvent("beforeAdd", function(e, n) {
                t.tData;
                n.type == t.defConfig.name && (t.isFirstAdd ? t.ranNumTag || (n.lotterys = [],
                t.isFirstAdd = null ,
                t.updateData(),
                s.getCurrentGameOrder().add(s.getCurrentGameStatistics().getResultData())) : (("" != t.errorData.join("") || "" != t.sameData.join("")) && t.ballsErrorTip(),
                t.isFirstAdd = !0))
            })
        },
        initTextarea: function() {
            var e = this
              , t = "content-textarea-balls-def"
              , n = e.defConfig
              , a = $.trim(n.normalTips);
            e.importTextarea = $('<textarea class="content-textarea-balls ' + t + '">' + a + "</textarea>"),
            e.container.find(".panel-select").html("").append(e.importTextarea),
            e.importTextarea.focus(function() {
                var n = $.trim(this.value);
                (n == a || n.length==a.length+5) && (this.value = "",$('textarea.content-textarea-balls').val(''),$('textarea.content-textarea-balls').removeClass(t),
                e.importTextarea.removeClass(t))
            }).on('blur',function() {
                var t = $.trim(this.value);
                "" == t && (e.removeOrderAll(),
                e.showNormalTips())
            }).on('keyup',function() {
                e.updateData();
            }).on('paste',function() {
                setTimeout(function() {
                  e.updateData();  
                },50)
            })
        },
        initFrame: function() {
            var e = this;
            e.initTextarea(),
            e.bindPressTextarea(),
            e.dragUpload()
        },
        getExampleText: function() {
            return this.defConfig.exampleText
        },
        rebuildData: function() {
            var e = this;
            e.balls = [[-1, -1, -1, -1, -1, -1, -1, -1, -1, -1], [-1, -1, -1, -1, -1, -1, -1, -1, -1, -1], [-1, -1, -1, -1, -1, -1, -1, -1, -1, -1], [-1, -1, -1, -1, -1, -1, -1, -1, -1, -1], [-1, -1, -1, -1, -1, -1, -1, -1, -1, -1]]
        },
        buildUI: function() {
            var e = this;
            e.container.html(e.getHTML())
        },
        reSelect: function() {},
        batchSetBallDom: function() {},
        getNormalTips: function() {
            return this.defConfig.normalTips
        },
        showNormalTips: function() {
            var e = this
              , t = "content-textarea-balls-def";
            e.importTextarea && e.importTextarea.addClass(t),
            e.replaceText(e.getNormalTips.call(e))
        },
        _bulidEditDom: function() {
            var e = this
              , t = "";
            e.doc.designMode = "On",
            e.doc.contentEditable = !0,
            e.doc.open(),
            t = '<head><meta http-equiv="Content-Type" content="text/html; charset=utf-8" />',
            t += "<style>*{margin:0;padding:0;font-size:14px;}</style>",
            t += "</head>",
            e.doc.writeln("<html>" + t + '<body style="word-break: break-all">' + e.getNormalTips() + "</body></html>"),
            e.doc.close(),
            e.bindPress(),
            document.all && (e.doc.onkeypress = function() {
                return e._ieEnter()
            }
            ),
            e.dragUpload()
        },
        dragUpload: function() {
            var e = this
              , t = e.importTextarea;
            window.FileReader && (t.bind("dragover", function(e) {
                e.preventDefault(),
                e.stopPropagation()
            }),
            t.get(0).addEventListener("drop", function(t) {
                t.preventDefault(),
                t.stopPropagation();
                var n = t.dataTransfer.files
                  , a = n[0]
                  , r = new FileReader
                  , i = a.type ? a.type : "n/a";
                "text/plain" == i && (r.onload = function(t) {
                    var n = t.target.result;
                    "" != $.trim(n) && (e.replaceText(n),
                    e.updateData())
                }
                ,
                r.readAsText(a))
            }, !1))
        },
        _ieEnter: function() {
            var e = this
              , t = e.win.event;
            return 13 == t.keyCode ? (this._saveRange(),
            this._insert("<br/>"),
            !1) : void 0
        },
        _insert: function(e) {
            var t = this;
            if (t.ieRange)
                t.ieRange.pasteHTML(e),
                t.ieRange.select(),
                t.ieRange = !1;
            else if (t.win.focus(),
            document.all)
                t.doc.body.innerHTML += e;
            else {
                var n = win.getSelection()
                  , a = n.getRangeAt(0)
                  , r = a.createContextualFragment(e);
                a.insertNode(r)
            }
        },
        _saveRange: function() {
            if (document.all && !me.ieRange) {
                var e = me.doc.selection;
                if (me.ieRange = e.createRange(),
                "Control" != e.type) {
                    var t = me.ieRange.parentElement();
                    ("INPUT" == t.tagName || t == document.body) && (me.ieRange = !1)
                }
            }
        },
        getHtml: function() {
            var e = this
              , t = e.importTextarea ? e.importTextarea.val() : "";
            return t
        },
        replaceText: function(e) {
            var t = this;
            t.importTextarea && t.importTextarea.val(e)
        },
        bindPressTextarea: function() {
            var e = this
              , t = e.container.find(e.defConfig.uploadButton);
            window.navigator.userAgent.toLowerCase();
            t.bind("change", function() {
                var t = $(this).parent();
                e.checkFile(this, t)
            })
        },
        bindPress: function() {
            var e = this
              , t = e.container.find(e.defConfig.uploadButton)
              , n = window.navigator.userAgent.toLowerCase();
            $(e.doc).bind("input", function() {
                e.updateData()
            }),
            n.indexOf("msie") > 0 && ($(e.doc.body).bind("keyup", function() {
                e.updateData()
            }),
            $(e.doc.body).bind("blur", function() {
                e.updateData()
            })),
            $(e.doc).bind("focus", function() {
                e.firstfocus && (e.replaceText(" "),
                e.firstfocus = !1)
            }),
            $(e.doc).bind("blur", function() {
                var t = e.getText();
                "" == $.trim(t) ? e.showNormalTips() : e.updateData()
            }),
            $(e.doc.body).bind("focus", function() {
                e.firstfocus && (e.replaceText(" "),
                e.firstfocus = !1)
            }),
            $(e.doc.body).bind("blur", function() {
                var t = e.getText();
                "" == $.trim(t) ? e.showNormalTips() : e.updateData()
            }),
            t.bind("change", function() {
                var t = $(this).parent();
                e.checkFile(this, t)
            })
        },
        iterator: function(e) {
            var t, n = this, a = n.defConfig, r = [], i = [];
            return e = $.trim(e),
            e = e.replace(a.filtration, "|"),
            e = e.replace(/\s+/g, " "),
            e = $.trim(e),
            i = e.split("|"),
            $.each(i, function(e) {
                t = $.trim(this),
                "" != t && r.push(t)
            }),
            r
        },
        checkResult: function(e, t) {
            for (var n = t.length - 1; n >= 0; n--)
                if (t[n].join("") == e)
                    return !1;
            return !0
        },
        filterLotters: function(e) {
            var t = this
              , n = "";
            return n = e.replace(/<br>+|&nbsp;+/gi, " "),
            n = n.replace(/\s\s|[\s]|[,]+|[;]+|[，]+|[；]+/gi, " "),
            n = n.replace(/<(?:"[^"]*"|'[^']*'|[^>'"]*)+>/g, " "),
            n = n.replace(t.defConfig.checkFont, "") + " "
        },
        checkSingleNum: function(e) {
            var t = this;
            return t.defConfig.checkNum.test(e) && e.length == t.balls.length
        },
        unique: function(e) {
            for (var t = {}, a = [], n = 0; n < e.length; n++)
                t[e[n]] || (t[e[n]] = !0,
                a.push(e[n]));
            return a
        },
        //验证粘贴入的号码是否完整
        checkBallIsComplete: function(e) {
            var t = this;
            t.aData = [],
            t.vData = [],
            t.sameData = [],
            t.errorData = [],
            t.tData = [],
            result = [],
            result = t.iterator(t.filterLotters(e)).sort() || [];
            for (var n = result.length; n--; ) {
                if (t.checkSingleNum(result[n])) {
                    var a = result[n];
                    a == result[n + 1] ? t.sameData.push(result[n].split("")) : t.tData.push(result[n].split("")),
                    t.vData.push(result[n].split(""))
                } else
                    t.errorData.push(result[n].split(""));
                t.aData.push(result[n].split(""))
            }
            return t.tData.length > 0 ? (t.isBallsComplete = !0,
            t.isFirstAdd ? t.vData : t.tData) : (t.isBallsComplete = !1,
            [])
        },
        //验证粘贴入的号码是否完整
        checkBallIsCompleteFast: function(e) {
            var t = this;
            t.aData = [],
            t.vData = [],
            t.sameData = [],
            t.errorData = [],
            t.tData = [],
            result = [];
            if (t.name=='wuxing.zhixuan.danshi') {
              e = e.replace(/\r\n/g," ").replace(/\r/g," ").replace(/\n/g," ").replace(/(\b\d{1,4}(\b|[\b ]))|(\b\d{6,}(\b|[\b ]))/g,"").replace(/(^\s+)/g,"").replace(/(\s+$)/g,"");
              e = t.filterLotters(e);
              if (e.replace(/\s/g,'').length==0 || e.indexOf('.txt')!=-1) {
                result = [];
              }else {
                result = t.unique(e.replace(/(\s*$)/g,"").split(' ')) || [];
              }
            }else {
              result = t.iterator(t.filterLotters(e)).sort() || [];
            }
            if (result.length>0) {
              t.qData = result;
              for (var n = result.length; n--; ) {
                  //if (t.checkSingleNum(result[n])) {
                  var a = result[n];
                  a == result[n + 1] ? t.sameData.push(result[n].split("")) : t.tData.push(result[n].split("")),
                  t.vData.push(result[n].split(""));
                  //} else
                  //t.errorData.push(result[n].split(""));
                  t.aData.push(result[n].split(""));
              }
            }
            return t.tData.length > 0 ? (t.isBallsComplete = !0,
            t.isFirstAdd ? t.vData : t.tData) : (t.isBallsComplete = !1,
            [])
        },
        countInstances: function(e, t) {
            var n = []
              , a = 0;
            do
                a = e.indexOf(t, a),
                -1 != a && (n.push(a),
                a += t.length);
            while (-1 != a);return n
        },
        removeOrderError: function() {
            var e = this
              , t = []
              , n = 0
              , a = e.tData.length;
            for (n = 0; a > n; n++)
                t[n] = e.tData[n].join("");
            t = $.trim(t.join(" ")),
            e.errorDataTips(),
            e.replaceText(t),
            e.errorData = [],
            e.sameData = [],
            "" == t && e.showNormalTips()
        },
        removeOrderSame: function() {
            var e = this
              , t = []
              , n = 0
              , a = e.tData.length;
            for (n = 0; a > n; n++)
                t[n] = e.tData[n].join("");
            t = $.trim(t.join(" ")),
            e.sameDataTips(),
            e.replaceText(t),
            e.errorData = [],
            e.sameData = [],
            "" == t && e.showNormalTips()
        },
        filterOrder: function(e) {
            var t = this
              , n = []
              , a = 0
              , r = t.tData.length;
            for (a = 0; r > a; a++)
                n[a] = t.tData[a].join("");
            n = $.trim(n.join(" ")),
            "hide" != e && (t.errorData.length || t.sameData.length) && t.ballsErrorTip(),
            t.replaceText(n),
            t.errorData = [],
            t.sameData = [],
            "" == n && t.showNormalTips()
        },
        removeOrderAll: function() {
            var e = this;
            e.replaceText(""),
            e.sameData = [],
            e.aData = [],
            e.tData = [],
            e.vData = [],
            s.getCurrentGameStatistics().reSet(),
            e.showNormalTips()
        },
        checkFile: function(e, t) {
            var n = e.value
              , a = n.substring(n.lastIndexOf("."), n.length)
              , a = a.toLowerCase();
            return ".txt" != a ? (alert("对不起，导入数据格式必须是.txt格式文件哦，请您调整格式后重新上传，谢谢 ！"),
            !1) : void t[0].submit()
        },
        getFile: function(e) {
            var t = this
              , n = t.container.find(":reset");
            e && (t.replaceText(e),
            t.firstfocus = !1,
            t.updateData(),
            n.click())
        },
        errorTip: function(e, t) {
            var n = this;
            alert(n.errorData.join())
        },
        sameDataTips: function() {
            var e = this
              , t = e.sameData
              , n = ""
              , a = s.getCurrentGameMessage()
              , r = [];
            if ("" != t.join("")) {
                for (var i = 0; i < t.length; i++)
                    $.trim(t[i].join("")) && r.push(t[i].join(""));
                n = '<h4 class="pop-text" style="display:block;font-weight:bold">以下号码重复，已进行自动过滤</h4><p class="pop-text" style="display:block">' + r.join(", ") + "</p>",
                a.show({
                    mask: !0,
                    content: ['<div class="bd text-center">', '<div class="pop-waring">', '<i class="ico-waring <#=icon-class#>"></i>', '<div style="display:inline-block;*zoom:1;*display:inline;vertical-align:middle">' + n + "</div>", "</div>", "</div>"].join(""),
                    closeIsShow: !0,
                    closeFun: function() {
                        this.hide()
                    }
                })
            }
        },
        errorDataTips: function() {
            var e = this
              , t = e.errorData
              , n = ""
              , a = s.getCurrentGameMessage()
              , r = [];
            if ("" != t.join("")) {
                for (var i = 0; i < t.length; i++)
                    $.trim(t[i].join("")) && r.push(t[i].join(""));
                n = '<h4 class="pop-text" style="display:block;font-weight:bold">以下号码错误，已进行自动过滤</h4><p class="pop-text" style="display:block">' + r.join(", ") + "</p>",
                a.show({
                    mask: !0,
                    content: ['<div class="bd text-center">', '<div class="pop-waring">', '<i class="ico-waring <#=icon-class#>"></i>', '<div style="display:inline-block;*zoom:1;*display:inline;vertical-align:middle">' + n + "</div>", "</div>", "</div>"].join(""),
                    closeIsShow: !0,
                    closeFun: function() {
                        this.hide()
                    }
                })
            }
        },
        ballsErrorTip: function(e, t) {
            var n = this
              , a = n.errorData
              , r = n.sameData
              , i = ""
              , o = ""
              , u = s.getCurrentGameMessage()
              , l = []
              , c = [];
            if ("" != r.join("")) {
                for (var d = 0; d < r.length; d++)
                    $.trim(r[d].join("")) && c.push(r[d].join(""));
                o = '<h4 class="pop-text" style="display:block;font-weight:bold">以下号码重复，已进行自动过滤</h4><p class="pop-text" style="display:block">' + c.join(", ") + "</p>"
            }
            if ("" != a.join("")) {
                for (var d = 0; d < a.length; d++)
                    $.trim(a[d].join("")) && l.push(a[d].join(""));
                i = '<h4 class="pop-text" style="display:block;font-weight:bold">以下号码错误，已进行自动过滤</h4><p class="pop-text" style="display:block">' + l.join(", ") + "</p>"
            }
            u.show({
                mask: !0,
                content: ['<div class="bd text-center">', '<div class="pop-waring">', '<i class="ico-waring <#=icon-class#>"></i>', '<div style="display:inline-block;*zoom:1;*display:inline;vertical-align:middle">' + o + i + "</div>", "</div>", "</div>"].join(""),
                closeIsShow: !0,
                closeFun: function() {
                    this.hide()
                }
            })
        },
        reSet: function() {
            var e = this;
            e.isBallsComplete = !1,
            e.rebuildData(),
            e.updateData(),
            e.ranNumTag || e.showNormalTips(),
            e.removeRanNumTag()
        },
        formatViewBalls: function(e) {
            for (var t = [], n = e.length, a = 0; n > a; a++)
                t[a] = e[a].join("");
            var r = t.join("|");
            return r
        },
        makePostParameterQuick: function(e, t) {
            return e.join("|")
        },
        makePostParameter: function(e, t) {
            for (var n = [], e = t.lotterys, a = e.length, r = 0; a > r; r++)
                n[r] = e[r].join("");
            return n.join("|")
        },
        getLottery: function() {
            var e = this
              , t = e.getHtml();
            if ("" != t && String(t).indexOf('说明：')<0){
               var alldata = (e.name== 'wuxing.zhixuan.danshi' ? e.checkBallIsCompleteFast(t) : e.checkBallIsComplete(t));
               return alldata;
            }
        },
        removeSameNum: function(e) {
            var t, n = 0, a = this, r = this.getBallData()[0].length;
            for (len = e.length,
            t = Math.floor(Math.random() * r); n < e.length; n++)
                if (t == e[n])
                    return arguments.callee.call(a, e);
            return t
        },
        emptySameData: function() {
            this.sameData = []
        },
        emptyErrorData: function() {
            this.errorData = []
        },
        addRanNumTag: function() {
            var e = this;
            e.ranNumTag = !0,
            e.emptySameData(),
            e.emptyErrorData()
        },
        getTdata: function() {
            return this.tData
        },
        getOriginal: function() {
            return this.getTdata()
        },
        getQTdata: function() {
            return this.qData
        },
        getQuickOriginal: function() {
            return this.getQTdata()
        },
        removeRanNumTag: function() {
            this.ranNumTag = !1
        },
        checkRandomBets: function(e, t) {
            var n = this
              , a = "undefined" == typeof e ? !0 : !1
              , e = e || {}
              , r = []
              , t = t || 0
              , i = (n.getBallData().length,
            n.getBallData()[0].length,
            s.getCurrentGameOrder().getTotal().orders);
            if (r = n.createRandomNum(),
            Number(t) > Number(n.getRandomBetsNum()))
                return r;
            if (a)
                for (var o = 0; o < i.length; o++)
                    if (i[o].type == n.defConfig.name) {
                        var u = i[o].original.join("").replace(/,/g, "");
                        e[u] = u
                    }
            return e[r.join("")] ? (t++,
            arguments.callee.call(n, e, t)) : r
        },
        randomNum: function() {
            var e = this
              , t = []
              , n = null
              , a = (e.getBallData(),
            e.defConfig.name,
            s.getCurrentGame().getCurrentGameMethod().getGameMethodName())
              , r = []
              , i = [];
            return e.addRanNumTag(),
            t = e.checkRandomBets(),
            i = t,
            r = e.combination(i),
            n = {
                type: a,
                original: i,
                lotterys: r,
                moneyUnit: s.getCurrentGameStatistics().getMoneyUnit(),
                multiple: s.getCurrentGameStatistics().getMultip(),
                onePrice: s.getCurrentGame().getGameConfig().getInstance().getOnePrice(a),
                num: r.length
            },
            n.amountText = s.getCurrentGameStatistics().formatMoney(n.num * n.moneyUnit * n.multiple * n.onePrice),
            n
        },
        getHTML: function() {
            var e = s.getCurrentGame().getGameConfig().getInstance().getUploadPath()
              , t = s.getCurrentGame().getGameConfig().getInstance().getToken()
              , n = [];
            return n.push('<div class="number-select-title balls-type-title clearfix"><div class="number-select-link"><a href="#" class="pick-rule">选号规则</a><a href="#" class="win-info">中奖说明</a></div></div>'),
            n.push('<div class="balls-import clearfix">'),
            n.push('<form id="form1" name="form1" enctype="multipart/form-data" method="post" action="' + e + '" target="check_file_frame" style="position:relative;padding-bottom:10px;">'),
            n.push('<input name="betNumber" type="file" id="file" size="40" hidefocus="true" value="导入" style="outline:none;-ms-share.filter:progid:DXImageTransform.Microsoft.Alpha(Opacity=0);share.filter:alpha(opacity=0);opacity: 0;position:absolute;top:0px; left:0px; width:115px; height:30px;z-index:1;background:#000;cursor: pointer;" />'),
            n.push('<input name="_token" type="hidden" value="' + t + '" />'),
            n.push('<input type="button" class="btn balls-import-input" style="cursor: pointer;" value="导入注单" onclick=document.getElementById("form1").file.click()>&nbsp;&nbsp;&nbsp;&nbsp;<a style="display:none;" class="balls-example-danshi-tip" href="#">查看标准格式样本</a>'),
            n.push('<input type="reset" style="outline:none;-ms-share.filter:progid:DXImageTransform.Microsoft.Alpha(Opacity=0);share.filter:alpha(opacity=0);opacity: 0;width:0px; height:0px;z-index:1;background:#000" />'),
            n.push('<iframe src="' + e + '" name="check_file_frame" style="display:none;"></iframe>'),
            n.push("</form>"),
            n.push('<div class="panel-select"><iframe style="width:100%;height:100%;border:0 none;background-color:#F9F9F9;" class="content-text-balls"></iframe></div>'),
            n.push('<div class="panel-btn">'),
            n.push('<a class="btn filter-order" href="javascript:void(0);">清除错误或重复项</a>'),
            n.push('<a class="btn remove-all" href="javascript:void(0);">清空文本框</a>'),
            n.push("</div>"),
            n.push("</div>"),
            n.join("")
        }
    }
      , l = e.Class(u, n);
    l.defConfig = r,
    o[t] = l
}(dsgame, "Danshi", dsgame.GameMethod),
$(function() {
    dsgame.Games.SSC.getInstance({
        jsNameSpace: "dsgame.Games.SSC."
    }),
    dsgame.GameTypes.getInstance(),
    dsgame.GameStatistics.getInstance(),
    dsgame.GameOrder.getInstance(),
    dsgame.GameTrace.getInstance(),
    dsgame.GameSubmit.getInstance(),
    dsgame.Games.SSC.Message.getInstance();
    var e, t, n, a = dsgame.Games, r = a.getCurrentGame().getGameConfig().getInstance(), i = r, s = r.getCurrentGameNumber(), o = {
        issue: r.getCurrentGameNumber(),
        wn_number: r.getLotteryBalls()
    },oname=r.getGameNameCn(), u = !0, l = new dsgame.Tip({
        cls: "j-ui-tip-alert j-ui-tip-b j-ui-tip-showrule",
        text: "使用厘模式进行投注，单注注单最小金额为0.01元"
    }), c = (new dsgame.MiniWindow({
        cls: "lottery-board-pop",
        effectShow: function() {
            var e = this;
            e.dom.css({
                display: "block",
                left: "50%",
                marginLeft: -e.dom.outerWidth() / 2,
                top: 2 * -e.dom.outerHeight()
            }).animate({
                top: 206
            })
        },
        effectHide: function() {
            var e = this;
            e.dom.animate({
                top: 2 * -e.dom.outerHeight()
            }, function() {
                e.dom.hide()
            })
        }
    }),
    [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]), d = 64, m = function(e, t) {
        var a = $("#lottery-numbers-board");
        $("#J-ernie-issue").html(e),
        t && t.length ? (n || (a.find("[data-lottery-ernie-numbers]").replaceWith(f(t.length)),
        n = new dsgame.Ernie({
            dom: a.find("li"),
            height: 64,
            length: c.length,
            callback: g
        })),
        $("#J-lottery-ernie-numbers").show(),
        $(".J-loading-lottery").hide(),$('.limitopen .opens').html(t.join(' '))
        ,typeof animOpen !== 'undefined' && animOpen(),
        n.start(),
        n.stop(t)
        ) : ($("#J-lottery-ernie-numbers").hide(),
        $(".J-loading-lottery").show(),$('.limitopen .opens').html('开奖中...'),typeof animOpen !== 'undefined' && animOpen())
    }
    , g = function() {
        s = r.getCurrentGameNumber()
    }
    , f = function(e) {
        for (var t = ['<ul style="display:none;" id="J-lottery-ernie-numbers" class="lottery-ernie-numbers lottery-ernie-numbers-' + e + '">'], n = 0; e > n; n++) {
            var a = "<li>";
            $.each(c, function(e, t) {
                a += "<span>" + t + "</span>"
            }),
            a += "</li>",
            t.push(a)
        }
        return t.push("</ul>"),
        t.join("")
    }
    , h = function() {
        var rb = r;
        u && (s = r.getLastGameNumber(),
        u = !1),
        jQuery.ajax({
            url: r.getLoadIssueUrl(),
            dataType: "JSON",
    	      cache: false,
            timeout:6000,
            success: function(n) {
                var dd = {};
                dd.issueHistory = n;
                dd.currentNumber = n.current_issue;
                rb.updateConfig(dd);
                var o = "" + rb.getCurrentGameNumber();
                var oname=rb.getGameNameCn();
                $("#J-header-currentNumber,#issuenum").html(o),$('#lotteryname').html(oname);
                
                var ri = n.issues
                  , i = ri[0];
                t = ri,
                (i.issue != o.issue || i.wn_number != o.wn_number) && (o.issue = i.issue,
                o.wn_number = i.wn_number,
                i.wn_number ? (e.stop(),
                m(i.issue, i.wn_number.split(""))) : m(i.issue)),
                a.getCurrentGame().getCurrentGameMethod() && a.getCurrentGame().getCurrentGameMethod().miniTrend_updateTrend(t)
            },
            error:function(er) {
              if (typeof LoopManage !== 'undefined') {
                if (typeof LoopManage.refreshIssusError == 'undefined') {
                  LoopManage.refreshIssusError = 1;  
                }else {
                  LoopManage.refreshIssusError += 1;
                }
              }
            }
        })
    }
    , p = function() {
        var e,next=0,repeatCount=0, t,k, n = r.getCurrentLastTime(), i = r.getCurrentTime(), s = n - i, o = "" + r.getCurrentGameNumber(), u = $(".J-lottery-countdown li em"), l = $("#J-trace-statistics-countdown"),ln = $("#mcounter"),lm = $("#mcounter_other,#topmcounter"), c = a.getCurrentGameMessage();
        next = r.getNextLastTime()-r.getCurrentLastTime();
        
        var gmid= r.getGameId();
        
        t = function() {
          if (s%10==0 && s>0) {
            jQuery.ajax({
              url: r.getLoadSystemTimeUrl() + "?id=" + Math.random()+'&gameId='+gmid,
              dataType: "JSON",
              timeout:6000,
              success: function(st) {
                if (st && st.isSuccess == 1) {
                  var de = {};
                  var res = st.data;
                  de.currentTime = res.currentTime;
                  if (typeof res.currentIssueNumber == 'undefined') {
                    repeatCount+=1;
                    if (repeatCount>repeatTime) {
                      window.location.reload();  
                    }
                  }
                  de.currentNumber = res.currentIssueNumber; 
                  de.currentNumberTime = res.currentIssueEndTime;
                  r.updateConfig(de);
                  var syncs = r.getCurrentLastTime() - res.currentTime;
                  if (syncs>0) {
                    s = syncs;  
                  }else {
                    s = 0;
                  }
                }
              },
              error:function(er) {
                if (typeof LoopManage !== 'undefined') {
                  if (typeof LoopManage.synctimeError == 'undefined') {
                    LoopManage.synctimeError = 1;  
                  }else {
                    LoopManage.synctimeError += 1;
                  }
                }
              }
            });
          }
            if (0 == s) {
              if (typeof LoopManage.refreshIssusError !== 'undefined') {
                if (LoopManage.refreshIssusError>20) {
                  location.reload(); 
                  clearInterval(LoopManage.refreshIssus);
                }  
              }
              typeof SoundNotify !== 'undefined' ? SoundNotify.init() : !0;
              a.getCurrentGame().getServerDynamicConfig(function() {
                var ef, t = "" + r.getCurrentGameNumber();
                if(!t || t === null || t== 'null'){
                  return;
                }
                var n = 2;
                c.hide(),
                a.getCurrentGameTrace().autoDeleteTrace(),
                a.getCurrentGameTrace().hide(),
                o != t && (c.showTip('<div class="tipdom-cont">当前已进入第<div class="row" style="color:#F60;font-size:18px;"><span id="J-header-currentNo">' + t + '</span> 期</div><div class="row">请留意期号变化 (<span id="J-gamenumber-change-s-num">3</span>)</div><div><a href="javascript:void(0);" style="margin-top:10px;" class="btn counterd_close cancel">关闭</a></div></div>'),
                $('.ui-miniwindow-tip .counterd_close').off('click').on('click',function() {
                  c.hideTip();
                }),
                ef = setInterval(function() {
                    $("#J-gamenumber-change-s-num").text(n),
                    //$("#J-header-currentNo").text($('#J-header-currentNumber').text()),
                    n -= 1,
                    -1 > n && (clearInterval(ef),
                    c.hideTip())
                }, 1e3))
              });
            }
            var t = [],mt=[]
              , n = Math.floor(s / 3600)
              , i = Math.floor(s % 3600 / 60)
              , d = s % 3600 % 60;
            n = 10 > n ? "0" + n : "" + n,
            i = 10 > i ? "0" + i : "" + i,
            d = 10 > d ? "0" + d : "" + d,
            t.push(n),n!='00' && mt.push(n),
            t.push(i),mt.push(i),
            t.push(d),mt.push(d),
            u.each(function(e, n) {
                $(this).text(t[e])
            }),
            ln.html(mt.join(":")),
            lm.html(mt.join(":")),
            l.html(t.join(":")),
            s==0 ? s=next : !0,
            s--
        },
        kk = function(){
          jQuery.ajax({
            url: r.getLoadSystemTimeUrl() +"?id=" + Math.random(),
            dataType: "JSON",
            timeout:6000,
            success: function(n) {
              if(n && n.isSuccess == 1){
                var dd = {};
                dd.currentTime = n.data;
                r.updateConfig(dd);
                s = r.getCurrentLastTime() - n.data;
                //console.info(s);
              }
            },
            error:function(er) {
              if (typeof LoopManage !== 'undefined') {
                if (typeof LoopManage.synctimeError == 'undefined') {
                  LoopManage.synctimeError = 1;  
                }else {
                  LoopManage.synctimeError += 1;
                }
              }
            }
          });
        },
        ((typeof lotteryFrameLooop !== 'undefined' && lotteryFrameLooop !=null && lotteryFrameLooop.constructor.name =='Main') ? clearInterval(lotteryFrameLooop._timer) : !0),
        e = new dsgame.Timer({
            time: 1e3,//isNew: 0,
            fn: t
        }),
        typeof lotteryFrameLooop !== 'undefined' ? (lotteryFrameLooop = e): !0,
        $("#J-header-currentNumber,#issuenum").html(o),$('#lotteryname').html(oname)

    }
    , pa=function() {
      var e,next=0, t,k, n = r.getCurrentLastTime(), i = r.getCurrentTime(), s = n - i, o = "" + r.getCurrentGameNumber(), u = $(".J-lottery-countdown li em"), l = $("#J-trace-statistics-countdown"),ln = $("#mcounter"),lm = $("#mcounter_other"), c = a.getCurrentGameMessage();
      next = r.getNextLastTime()/1000-r.getCurrentLastTime();
      $("#J-header-currentNumber,#issuenum").html(o),$('#lotteryname').html(oname)
    }
    , v = function() {
        $("div.game-record-section>ul>li").click(function() {
            var e = $(this);
            getOrders();
            // $("div.game-record-section>ul>li").removeClass("current"),
            // e.addClass("current"),
            // $("#record-iframe").attr("src", e.attr("srclink"))
        })
    }
    , C = function() {
        var t = i.last_number ? i.last_number.issue : i.getLastGameNumber()
          , n = i.last_number ? ("" + i.last_number.wn_number).split("") : ("" + i.getLotteryBalls()).split("");
        var refresh = 0;
        if (arguments.length > 0) {
          refresh = arguments[0];  
        }
        ((typeof lotteryFrameIssue !== 'undefined' && lotteryFrameIssue !=null && lotteryFrameIssue.constructor.name =='Main') ? clearInterval(lotteryFrameIssue._timer) : !0);
        return (("" == i.getLotteryBalls() || refresh) && !isMobile.any())  ? (e = new dsgame.Timer({
            time: 5e3,
            isNew: !0,
            fn: h
        }),typeof LoopManage !== 'undefined' ? LoopManage.refreshIssus=e._timer :!0,typeof lotteryFrameIssue !== 'undefined' ? lotteryFrameIssue = e :1) : m(t, n),
        !1
    }
    ;
    p(),
    v(),
    C(),
    a.getCurrentGame().addEvent("changeDynamicConfig", function(t, n) {
        if (typeof e =='undefined') {
          e = new dsgame.Timer({
            time: 5e3,
            isNew: !0,
            fn: h
          });
            typeof lotteryFrameIssue !== 'undefined' ? lotteryFrameIssue = e :1
        }
        p()
    }),
    a.getCurrentGame().addEvent("changeDynamicConfigQuick", function(t, n) {
        pa(),C(1)
    }),
    a.getCurrentGameTypes().addEvent("beforeChange", function(e, t) {
        var n,loid,demid,allgp, r = $("#J-panel-gameTypes li"), i = jQuery("#J-gametyes-menu-panel"), s = i.find('[data-id="' + t + '"]'), o = (a.getCurrentGame().getGameConfig().getInstance().getMethodCnNameById(t),
        "current current-sec");
        s.size() > 0 && (i.find("dd").removeClass(o).end(),
        s.addClass(o),
        n = s.parents("li").addClass("current").show(),
        jQuery('.method-lst li').removeClass('on'),
        jQuery('.method-lst li.'+r.eq(n.index()).attr('class')).addClass('on'),
        r.removeClass("current").eq(n.index()).addClass("current"),
        allgp = a.getCurrentGame().getGameConfig().getInstance().getOptionalPrizes(),
        allgp.length>0 ? ($('.footer-bar-deal span.topprize').html('奖金&nbsp;'+allgp[allgp.length-1].prize_group+'<br>返点&nbsp;'+Number(parseFloat(allgp[allgp.length-1].rate)*100).toFixed(2)+'%')) : (!0,$('.footer-bar-deal span.topprize').html('')),
        $('.method_title label').html(r.eq(n.index()).text()+'-'+s.text()),
        jQuery('.second-method-lst ul li').removeClass('on'),
        jQuery('.second-method-lst dd[data-id='+s.data('id')+']').parents('li').addClass('on'),
        jQuery('.second-method-lst dd[data-id='+s.data('id')+']').addClass('current'),
        loid = a.getCurrentGame().getGameConfig().getInstance().getGameId(),
        demid = a.getCurrentGame().getGameConfig().getInstance().getDefaultMethodId(),
        (typeof $.cookie('mymethod'+$('lottery .now_lottery').data('lid')) == 'undefined' && ($('lottery ul.quick_mymethod').html()=='' || $('lottery ul.quick_mymethod[lottery="'+loid+'"]').size()==0)) ? ($('lottery ul.quick_mymethod').html('<li class="directgo on top"><a data-id="'+s.data('id')+'" data-cls="'+String(r.eq(n.index()).attr('class')).replace(' current','')+'">'+r.eq(n.index()).text()+s.text()+'</a></li>'),$('lottery ul.quick_mymethod').attr('lottery',loid),$('lottery .quick_mymethod').animate({'left':0},200)) : (
          !0 
        )
        )
    });
    var b = new dsgame.Tip({
        cls: (isMobile.any() ? "j-ui-tip-t j-ui-tip-showrule" : "j-ui-tip-b j-ui-tip-showrule")
    });
    typeof layoutOpen == 'function' ? layoutOpen(r) : !0;
    $("#J-balls-main-panel").on("mouseover", ".pick-rule, .win-info", function() {
        var e = $(this)
          , t = a.getCurrentGame().getCurrentGameMethod().getId()
          , n = a.getCurrentGame().getGameConfig().getInstance().getMethodById(t)
          , r = e.hasClass("pick-rule") ? n.bet_note : n.bonus_note;
        b.setText(r);
        if (isMobile.any()) {
          b.show(b.getDom().width() / 2 * -1 + e.width() / 2, 32, e)
        }else {
          b.show(b.getDom().width() / 2 * -1 + e.width() / 2, -1 * b.getDom().height() - 20, e)
        }
    }),
    $("#J-balls-main-panel").on("mouseleave", ".pick-rule, .win-info", function() {
        b.hide()
    }),
    $("#J-balls-main-panel").on("click", ".pick-rule, .win-info", function() {
        return !1
    });
    var y = 0;
    a.getCurrentGame().addEvent("afterSwitchGameMethod", function(e, n) {
        var n = a.getCurrentGame().getCurrentGameMethod().getId()
		  , s = a.getCurrentGame().getGameConfig().getInstance().getPrizeById(n)
          , r = a.getCurrentGameStatistics().getMoneyUnit()
          , i = a.getCurrentGame().getGameConfig().getInstance().getLimitByMethodId(n, r)
          , u = a.getCurrentGame().getGameConfig().getInstance().getOptionalPrizes().length
          , l = a.getCurrentGame().getGameConfig().getInstance().getOptionalPrizes()[0].rate
		  , lx = a.getCurrentGame().getGameConfig().getInstance().getOptionalPrizes()[u-1].rate
		  , point = a.getCurrentGameStatistics().point || Number(lx)
		  , point = Number(l) - point
          , c = 0
          , d = !1;
        if (y = Number(s.prize),
        d = s.display_prize,
		c = (y + s.x * point)* r,
        a.getCurrentGameStatistics().getMultipleDom().setMaxValue(i),
        d ? ($("#J-method-prize").show(),
        $("#J-method-prize").data('nowprize',c).find("span").html(dsgame.util.formatMoneySmall(c,4))) : $("#J-method-prize").hide(),
        a.getCurrentGame().getCurrentGameMethod().miniTrend_updateTrend(t),
        a.getCurrentGame().getCurrentGameMethod().defConfig.digitConf) {
            var m = a.getCurrentGame().getCurrentGameMethod().defConfig
              , g = m.digitNeed || 0
              , f = m.digitConf;
            a.getCurrentGame().initDigitStatus(g, f)
        } else
            a.getCurrentGameStatistics().setProjectNum(1),
            a.getCurrentGameStatistics().setDigitChoose([]);
        if (a.getCurrentGame().getCurrentGameMethod().defConfig.orderSplitType) {
            var h = a.getCurrentGame().getCurrentGameMethod().defConfig.orderSplitType;
            a.getCurrentGame().getCurrentGameMethod().setOrderSplitType(h)
        } else
            a.getCurrentGame().getCurrentGameMethod().setOrderSplitType("")
    }),
    a.getCurrentGameTypes().addEvent("endShow", function() {
        this.changeMode(a.getCurrentGame().getGameConfig().getInstance().getDefaultMethodId());
        //绑定玩法菜单事件
        $('.method-lst li').click(function(){
          var nowcls = $(this).attr('class')
          $('.method-lst li.on').removeClass('on');
          $('.second-method-lst ul li.on').removeClass('on');
          $('#J-panel-gameTypes .'+nowcls+' div').trigger('click');
          if (nowcls.indexOf(' ')>-1) {
            nowcls = nowcls.split(' ')[0];
          }
          $('.second-method-lst ul li.'+nowcls).addClass('on');
          $(this).addClass('on');
          $('.second-method-lst em').css('top',parseInt($('.method-lst li.on').position().top,10)-185+22);
        });
        $('.second-method-lst dd').click(function(){
          $('.second-method-lst dd.current').removeClass('current');
          var nowids = $(this).data('id');$('#multitimes').val('1');
          $(this).addClass('current');
          var initMethod=[];
          var secname = $('#method-float .method-lst .on').text();
          var lid = $('lottery .now_lottery').data('lid');
          var mname = $('#method-float .method-lst .on').text()+$(this).text();
          if (String($(this).text()).indexOf(String(secname))>=0 || String($(this).text()).indexOf(String(secname.split('')[0]))>=0){
             mname = $(this).text();  
          }
          initMethod.push('<li class="directgo'+($('#editMymethod').hasClass('editing') ? ' inedit' : '')+'"><a data-id="'+nowids+'" data-cls="'+$('#method-float .method-lst .on').attr('class').replace(' on','')+'">'+mname+'</a><em class="m_ico">&#59215;</em></li>')
          var cookieket = 'mymethod'+lid;
          if ($('lottery #custompart ul li').length<6) {
            //保存cookie
            if (typeof $.cookie(cookieket) == 'undefined') {
              $.cookie(cookieket,nowids,{expires:365}); 
              $('lottery .second-method-lst ul dd.types-item[data-id="'+nowids+'"]').addClass('added');
            }else {
              var mnowallmid = $.cookie(cookieket).split(','); 
              var indexin = $.inArray(String(nowids),mnowallmid);
              if (indexin==-1) {
                mnowallmid.push(nowids);
                $('lottery .second-method-lst ul dd.types-item[data-id="'+nowids+'"]').addClass('added');
                $('lottery #custompart ul').append(initMethod.join(''));
                if ($('lottery #custompart ul li').length>1 && $('#editMymethod').hasClass('editing')) {
                  jQuery('lottery #custompart ul li:eq(0) em').show();
                }
                //oldmy.splice(indexin, 1);
                $.cookie(cookieket,mnowallmid.join(','),{expires:365});
              }
            }

          }else {
            if (typeof phonon !== 'undefined') {
              jQuery('#auto-gen-alert').remove();
              jQuery('div.backdrop-dialog[data-id=auto-gen-alert]').remove();
              phonon.alert('每个彩种最多设置6个玩法', '提示：', '', '确定').on('confirm', function(){
                return false;
              });      
            }
          }
          readCookieMethod($('lottery .now_lottery').data('lid'));
          if (typeof swipeMethod !== 'undefined') {
            swipeMethod();  
          }
          $('lottery #custompart ul').off('click').on('click','li',function() {
            var adata = $(this).find('a');
            var thisnowids = adata.data('id');
            var thisnowcls = adata.data('cls');
            if (!$(this).hasClass('inedit')) {
              if ($('#J-gametyes-menu-panel li.'+thisnowcls+' dd.types-item[data-id="'+thisnowids+'"]').size()>0) {
                $('#J-gametyes-menu-panel li.'+thisnowcls+' dd.types-item[data-id="'+thisnowids+'"]').trigger('click');
              }else {
                $('#J-gametyes-menu-panel dd.types-item[data-id="'+thisnowids+'"]').trigger('click');
              }
              $('.quick_mymethod li.on').removeClass('on');
              $('.quick_mymethod a[data-id="'+thisnowids+'"]').parent().addClass('on'); 
              var offsetleft = $('.quick_mymethod li a[data-id="'+thisnowids+'"]').parent().attr('w');
              if (typeof offsetleft !== 'undefined') {
                var maxleft = -(parseInt(jQuery('lottery .quick_mymethod').attr('max'),10));
                if (parseInt(offsetleft,10)>maxleft) {
                  offsetleft = maxleft; 
                }
                jQuery('lottery .quick_mymethod').animate({'left':-offsetleft},200);  
              }
            }else {
              if ($('lottery #custompart ul li').length==1) {
                return false; 
              }
              //保存cookie
              var cookieket = 'mymethod'+$('lottery .now_lottery').data('lid');
              if (typeof $.cookie(cookieket) != 'undefined') {
                var mnowallmid = String($.cookie(cookieket)).split(','); 
                var nowids = $(this).find('a').data('id');
                var indexin = $.inArray(String(nowids),mnowallmid);
                if (indexin>-1) {
                  mnowallmid.splice(indexin, 1);
                  $(this).remove();
                  $('lottery .second-method-lst ul dd.types-item[data-id="'+nowids+'"]').removeClass('added');
                  $.cookie(cookieket,mnowallmid.join(','),{expires:365});
                  readCookieMethod($('lottery .now_lottery').data('lid'));
                }
                if ($('lottery #custompart ul li').length==1) {
                  jQuery('lottery #custompart ul li:eq(0) em').hide(); 
                  $('lottery .quick_mymethod').animate({'left':0},200);
                }else {
                  jQuery('lottery #custompart ul li:eq(0) em').show();  
                }
              }  
            }
            
          });
        });
        if (typeof $.cookie('mymethod'+$('lottery .now_lottery').data('lid')) !== 'undefined') {
          $('#J-gametyes-menu-panel dd.types-item[data-id="'+$.cookie('mymethod'+$('lottery .now_lottery').data('lid')).split(',')[0]+'"]').trigger('click');  
        }
    }),
    a.getCurrentGameTypes().addEvent("afterGametypesChange", function(e, t) {
        var n = $(t)
          , a = "renxuan-is-visible";
        n.hasClass(a) ? n.removeClass(a).text("任选玩法").siblings().show().filter(".gametypes-menu-renxuan").hide() : n.addClass(a).text("普通玩法").siblings().hide().filter(".gametypes-menu-renxuan").show()
    }),
    $("#J-add-order").click(function() {
        var e = a.getCurrentGameStatistics().getResultData();
        !e.mid || e.amount < "0.01" || a.getCurrentGameOrder().add(e)
    }),
    $("#J-fast-submit").click(function() {
        a.getCurrentGame().getCurrentGameMethod().filterOrder && (a.getCurrentGame().getCurrentGameMethod().filterOrder("hide"),
        a.getCurrentGame().getCurrentGameMethod().updateData());
        var e = a.getCurrentGameStatistics().getResultData();
        !e.mid || e.amount < "0.01" || a.getCurrentGameOrder().fastOrder(e)
    }),
    a.getCurrentGameStatistics().addEvent("afterUpdate", function(e, t, n) {
        var r = this
          , i = $("#J-add-order")
          , s = $("#J-fast-submit")
		  , nn = a.getCurrentGame().getCurrentGameMethod().getId()
		  , z = a.getCurrentGame().getGameConfig().getInstance().getPrizeById(nn)
          , o = a.getCurrentGame().getGameConfig().getInstance().getMaxPrizeGroup()
          , u = a.getCurrentGame().getGameConfig().getInstance().getOptionalPrizes().length
          , c = a.getCurrentGame().getGameConfig().getInstance().getOptionalPrizes()[0].rate
		  , lx = a.getCurrentGame().getGameConfig().getInstance().getOptionalPrizes()[u-1].rate
		  , point = a.getCurrentGameStatistics().point || Number(lx)
		  , point = Number(c) - point
        if (t > 0)
            if (n >= "0.01") {
                i.add(s).removeClass("btn-disable");
                var d = r.getPrizeGroupRate() || 0;
                r.setRebate(n, d),$('.money-part .submit,.money-part .trace').removeClass('disabled'),
                l.hide()
            } else
                l.show(-s.parent().width() / 2, -1 * l.getDom().height() - 20, s),
                $('.money-part .submit').attr('error','below').addClass('disabled'),
                $('.money-part .trace').attr('error','below').addClass('disabled'),
                i.add(s).addClass("btn-disable"),
                r.setRebate(0);
        else
            i.add(s).addClass("btn-disable"),
            $('.money-part .submit').attr('error','zero').addClass('disabled'),
            $('.money-part .trace').attr('error','zero').addClass('disabled'),
            r.setRebate(0),
            l.hide();
        var m = (y + z.x * point)* Number(r.getMoneyUnit());
        $("#J-method-prize").data('nowprize',m).find("span").html(dsgame.util.formatMoneySmall(m,4));
        setTimeout(function() {
          $('textarea.content-textarea-balls').removeData('checking');  
        },500);
    });
    var G, T = $("#J-panel-order-list-cont");
    typeof T.jScrollPane == 'function' && T.jScrollPane(),G = T.data("jsp"),
    a.getCurrentGameOrder().addEvent("afterChangeLotterysNum", function(e, t) {
        var n = $("#J-submit-order")
          , a = $("#J-trace-switch")
          , r = e.data.orderData
          , i = !1
          , s = $(".J-cart-empty");
        if (t > 0) {
            for (var o = 0; o < r.length; o++){
                .001 == r[o].moneyUnit ? i = !0 : "";
            }
            i ? (n.removeClass("btn-bet-disable"),
            a.addClass("btn-bet-disable")
            ) : n.add(a).removeClass("btn-bet-disable"),
            s.hide(),
            typeof G !== 'undefined' && G.reinitialise()
        } else
            n.add(a).addClass("btn-bet-disable"),
            s.show()
    }),
    $("body").on("click", ".remove-error", function() {
        a.getCurrentGame().getCurrentGameMethod().removeOrderError()
    }).on("click", ".remove-same", function() {
        a.getCurrentGame().getCurrentGameMethod().removeOrderSame()
    }).on("click", ".filter-order", function() {
        a.getCurrentGame().getCurrentGameMethod().filterOrder()
    }).on("click", ".remove-all", function() {
        a.getCurrentGame().getCurrentGameMethod().removeOrderAll()
    }).on("click", "[digit-status]", function(e) {
        var t = $(this).parent().index();
        return a.getCurrentGame().digitStatusToggle(t) ? void 0 : !1
    }),
    a.getCurrentGame().addEvent("afterDigitStatusChange", function(e, t) {
        $(".J-digit-num-choosed").text(a.getCurrentGame().getDigitChoosed().length),
        $(".J-digit-project-num").text(a.getCurrentGame().getProjectNum())
    }),
    a.getCurrentGame().addEvent("digitLabelsEvent", function(e, t) {
        var n = $("[digit-status]", a.getCurrentGame().getCurrentGameMethod().container);
        n.eq(e).length && n.eq(e).prop("checked", t)
    }),
    a.getCurrentGameStatistics().setMultiple(a.getCurrentGame().getGameConfig().getInstance().getDefaultMultiple()),
    a.getCurrentGameStatistics().setMoneyUnitDom(a.getCurrentGame().getGameConfig().getInstance().getDefaultCoefficient()),
    $("body").on("click", "#J-submit-order", function() {
        a.getCurrentGameTrace().deleteTrace(),
        a.getCurrentGameSubmit().submitData()
    }),
    $("#J-trace-switch").click(function() {
        for (var e = a.getCurrentGameOrder().orderData, t = !1, n = 0; n < e.length; n++)
            "0.001" == e[n].moneyUnit ? t = !0 : "";
        return t ? !1 : ($("#J-trace-statistics-balance").html($("[data-user-account-balance]").html()),
        a.getCurrentGameTrace().show(),
        !1)
    }),
    $("#J-trace-panel").on("click", ".closeBtn", function() {
        a.getCurrentGameTrace().hide(),
        a.getCurrentGameTrace().deleteTrace()
    }),
    $("#J-button-trace-confirm").click(function() {
        if (!$("#J-button-trace-confirm").hasClass('quick')) {
          a.getCurrentGameTrace().getIsTrace() && (a.getCurrentGameTrace().hide(),
          a.getCurrentGameSubmit().submitData(),
          a.getCurrentGameTrace().deleteTrace())
        }else {
          a.getCurrentGameTrace().getIsTrace() && (a.getCurrentGameTrace().hide(),
          a.getCurrentGameSubmit().submitDataQuick(),
          a.getCurrentGameTrace().deleteTrace())
        }
    }),
    a.getCurrentGameSubmit().addEvent("beforeSend", function(e, t) {
        var n = t.win.dom.find(".pop-control")
          , a = n.find("a.confirm");
        n.find("a.cancel");
        a.addClass("btn-disabled"),
        a.text("提交中..."),
        t.win.hideCancelButton()
    }),
    a.getCurrentGameSubmit().addEvent("afterSubmit", function(e, t) {
        getOrders();
        $('record').attr('refresh',1); 
        var n = t.win.dom.find(".pop-control")
          , a = n.find("a.confirm");
        n.find("a.cancel");
        a.removeClass("btn-disabled"),
        a.text("确 认"),
        $("#record-iframe").attr("src", $(".game-record-section >ul.tabs >li.current").attr("srclink")),
        jQuery("[data-refresh-balance]:eq(0)").trigger("click")
    }),
    (!isMobile.any() && setTimeout(function() {
        $("html,body").animate({
            scrollTop: 140
        }, 400)
    }, 1e3)),
    $(".play-section").addClass("play-section-ssc")
});
